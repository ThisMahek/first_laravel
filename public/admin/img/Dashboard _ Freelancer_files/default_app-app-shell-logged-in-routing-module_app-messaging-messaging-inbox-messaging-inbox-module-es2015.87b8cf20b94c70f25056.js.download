(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{Kqyd:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("fVXH"),s=i("f6cb"),a=i("tbiQ"),r=i("pLZG"),c=i("zp1y"),o=i("lJxs");function l(e,t,i){return e.fromServerStream$.pipe(Object(r.a)(n.a),Object(c.a)(t.pipe(Object(r.a)(s.h)),i),Object(r.a)(([e,t,i])=>"messages"===e.body.parent_type),Object(o.a)(([e,t,i])=>{const{body:n}=e,s=Number(t.userId);if("messages"===n.parent_type&&"thread_id"in n.data){const e=n.targets.filter(e=>e!==s),t=n.data.thread_id;switch(n.type){case"video:request":if(n.data.user_id!==s&&!i)return{type:a.a.VIDEO,otherMembers:e,threadId:t,makingCall:!1,recorded:!1};break;case"video:request:audio_only":if(n.data.user_id!==s&&!i)return{type:a.a.AUDIO,otherMembers:e,threadId:t,makingCall:!1,recorded:!1};break;case"video:request:audio_only:recorded":if(n.data.user_id!==s&&!i)return{type:a.a.AUDIO,otherMembers:e,threadId:t,makingCall:!1,recorded:!0};break;case"video:close":case"video:reject":return{type:a.a.NONE,otherMembers:e,threadId:t,makingCall:!1,recorded:!1};case"video:accept":return{type:a.a.NONE,otherMembers:e,threadId:t,makingCall:!0,recorded:!1}}}}))}},Pza9:function(e,t,i){"use strict";i.d(t,"b",function(){return v}),i.d(t,"a",function(){return z});var n=i("8Y7J"),s=i("B23V"),a=i("dO68"),r=i("QLMp"),c=i("bxmY"),o=i("HsDr"),l=i("9Aot"),h=i("Krui"),d=i("o9eT"),u=i("qf7G"),b=i("SVse"),g=i("ZJBR"),f=i("w13q");const p=["button"],S=["content"];function m(e,t){if(1&e&&n.Tb(0,"fl-icon",15),2&e){const e=n.rc(2);n.zc("name",e.iconLabel)("size",e.IconSize.SMALL)("flMarginRight",e.Margin.XXSMALL)}}function T(e,t){if(1&e&&(n.Yb(0,"fl-bit",16),n.Tb(1,"fl-picture",17),n.Xb()),2&e){const e=n.rc(2);n.zc("flMarginRight",e.Margin.XXSMALL),n.Gb(1),n.zc("src",e.logoSrc)("alt",e.logoAlt)("fullWidth",!0)("display",e.PictureDisplay.BLOCK)}}function C(e,t){if(1&e&&(n.Wb(0),n.bd(1),n.Vb()),2&e){const e=n.rc(2);n.Gb(1),n.dd(" ",e.buttonTextApplied," ")}}function M(e,t){if(1&e&&n.bd(0),2&e){const e=n.rc(2);n.dd(" ",e.buttonText," ")}}function I(e,t){if(1&e&&n.Tb(0,"fl-icon",18),2&e){const e=n.rc(2);n.zc("name","ui-chevron-down")("size",e.IconSize.XSMALL)}}const y=function(e){return{IsActive:e}},O=function(e){return{DropdownFilterLabel:e}};function $(e,t){if(1&e&&(n.Yb(0,"fl-button",6,7),n.Yb(2,"fl-bit",8),n.Yb(3,"fl-bit",9),n.Zc(4,m,1,3,"fl-icon",10),n.Zc(5,T,2,5,"fl-bit",11),n.Zc(6,C,2,1,"ng-container",12),n.Zc(7,M,1,1,"ng-template",null,13,n.ad),n.Xb(),n.Zc(9,I,1,2,"fl-icon",14),n.Xb(),n.Xb()),2&e){const e=n.Mc(8),t=n.rc();n.zc("ngClass",n.Ec(12,y,t.isActive))("color",t.ButtonColor.CUSTOM)("display","block")("size",t.ButtonSize.SMALL)("disabled",t.disabled),n.Hb("data-applied",t.filterApplied),n.Gb(2),n.zc("ngClass",n.Ec(14,O,!t.hideDropdownIcon)),n.Gb(2),n.zc("ngIf",t.iconLabel),n.Gb(1),n.zc("ngIf",t.logoSrc&&!t.iconLabel),n.Gb(1),n.zc("ngIf",t.filterApplied&&t.buttonTextApplied)("ngIfElse",e),n.Gb(3),n.zc("ngIf",!t.hideDropdownIcon)}}function x(e,t){if(1&e&&n.Tb(0,"fl-icon",20),2&e){const e=n.rc(2);n.zc("clickable",!0)("color",e.iconColor)("name",e.iconLabel)("size",e.iconSize)}}function w(e,t){if(1&e&&n.Zc(0,x,1,4,"fl-icon",19),2&e){const e=n.rc();n.zc("ngIf",e.iconLabel)}}const L=["*"];var v=function(e){return e.FLUID="fluid",e.INHERIT="inherit",e}({});let z=(()=>{class e{constructor(e){this.renderer=e,this.ButtonColor=s.a,this.ButtonSize=a.a,this.CalloutPlacement=r.a,this.IconColor=o.c,this.IconSize=o.e,this.FontType=d.b,this.Margin=l.a,this.PictureDisplay=h.b,this.isActive=!1,this.contentPlacement=r.a.BOTTOM,this.contentSize=v.FLUID,this.edgeToEdge=!1,this.hideDropdownIcon=!1,this.logoAlt="",this.disabled=!1,this.display="inline",this.filterApplied=!1,this.autoClose=!1,this.iconOnly=!1,this.iconColor=o.c.DARK,this.iconSize=o.e.MID}close(){this.calloutComponent.close()}handleTrigger(){this.contentSize===v.INHERIT&&this.setContentWidth()}toggleState(){this.isActive=!this.isActive}handleContentClicked(){this.autoClose&&this.close()}setContentWidth(){const e=this.button.nativeElement.getBoundingClientRect().width;this.renderer.setStyle(this.content.nativeElement,"width",`${e}px`)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(n.G))},e.\u0275cmp=n.Mb({type:e,selectors:[["fl-dropdown-filter"]],viewQuery:function(e,t){if(1&e&&(n.id(p,1,n.l),n.id(S,1,n.l),n.id(c.a,1)),2&e){let e;n.Lc(e=n.oc())&&(t.button=e.first),n.Lc(e=n.oc())&&(t.content=e.first),n.Lc(e=n.oc())&&(t.calloutComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("disabled",t.disabled)("data-display",t.display)},inputs:{buttonText:"buttonText",buttonTextApplied:"buttonTextApplied",contentPlacement:"contentPlacement",contentSize:"contentSize",edgeToEdge:"edgeToEdge",hideDropdownIcon:"hideDropdownIcon",iconLabel:"iconLabel",logoSrc:"logoSrc",logoAlt:"logoAlt",disabled:"disabled",display:"display",filterApplied:"filterApplied",autoClose:"autoClose",iconOnly:"iconOnly",iconColor:"iconColor",iconSize:"iconSize"},ngContentSelectors:L,decls:9,vars:10,consts:[[3,"edgeToEdge","hideArrow","hideCloseButton","placement","mobileCloseButton","calloutOpen","calloutClose"],[1,"DropdownFilterTrigger",3,"trigger"],["class","DropdownFilterButton",3,"ngClass","color","display","size","disabled",4,"ngIf","ngIfElse"],["showIconOnly",""],[1,"DropdownFilterContent",3,"fontType","click"],["content",""],[1,"DropdownFilterButton",3,"ngClass","color","display","size","disabled"],["button",""],[3,"ngClass"],[1,"DropdownFilterButtonInner"],["class","DropdownFilterIcon",3,"name","size","flMarginRight",4,"ngIf"],["class","DropdownLogo",3,"flMarginRight",4,"ngIf"],[4,"ngIf","ngIfElse"],["plainButtonText",""],["class","DropdownFilterArrow",3,"name","size",4,"ngIf"],[1,"DropdownFilterIcon",3,"name","size","flMarginRight"],[1,"DropdownLogo",3,"flMarginRight"],[3,"src","alt","fullWidth","display"],[1,"DropdownFilterArrow",3,"name","size"],[3,"clickable","color","name","size",4,"ngIf"],[3,"clickable","color","name","size"]],template:function(e,t){if(1&e&&(n.yc(),n.Yb(0,"fl-callout",0),n.nc("calloutOpen",function(){return t.toggleState()})("calloutClose",function(){return t.toggleState()}),n.Yb(1,"fl-callout-trigger",1),n.nc("trigger",function(){return t.handleTrigger()}),n.Zc(2,$,10,16,"fl-button",2),n.Zc(3,w,1,1,"ng-template",null,3,n.ad),n.Xb(),n.Yb(5,"fl-callout-content"),n.Yb(6,"fl-text",4,5),n.nc("click",function(){return t.handleContentClicked()}),n.xc(8),n.Xb(),n.Xb(),n.Xb()),2&e){const e=n.Mc(4);n.zc("edgeToEdge",!0)("hideArrow",!0)("hideCloseButton",!0)("placement",t.contentPlacement)("mobileCloseButton",!1),n.Gb(1),n.Hb("disabled",t.disabled),n.Gb(1),n.zc("ngIf",!t.iconOnly)("ngIfElse",e),n.Gb(4),n.zc("fontType",t.FontType.CONTAINER),n.Hb("data-edge-to-edge",t.edgeToEdge)}},directives:[c.a,u.a,b.q,g.a,d.e,s.b,b.o,f.a,o.d,l.b,h.a],styles:["[_nghost-%COMP%]{display:inline-block}[disabled=true][_nghost-%COMP%]{pointer-events:none}[data-display=block][_nghost-%COMP%]{display:block;width:100%}.DropdownFilterButton[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #bec0c2;display:block;font-weight:400}.DropdownFilterButton[disabled=true][_ngcontent-%COMP%]{background:#f7f7f7;border-color:#f7f7f7;color:#4d525b}.DropdownFilterButton[data-applied=true][_ngcontent-%COMP%]{background:#dbf4ff;border-color:#139ff0}.DropdownFilterButton.IsActive[_ngcontent-%COMP%], .DropdownFilterButton[_ngcontent-%COMP%]:hover{border-color:#139ff0}.DropdownFilterButtonInner[_ngcontent-%COMP%]{align-items:center;display:flex}.DropdownFilterContent[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word}.DropdownFilterContent[data-edge-to-edge=false][_ngcontent-%COMP%]{padding:16px}.DropdownFilterArrow[_ngcontent-%COMP%]{padding-left:4px}.DropdownFilterTrigger[_ngcontent-%COMP%]{display:block}.DropdownFilterLabel[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between}.DropdownLogo[_ngcontent-%COMP%]{flex:0 0 30px;width:30px}"],changeDetection:0}),e})()},VSCx:function(e,t,i){"use strict";i.d(t,"a",function(){return Ce});var n=i("iInd"),s=i("97vJ"),a=i("yeKy"),r=i("9Aot"),c=i("4ykm"),o=i("2zwU"),l=i("f6cb"),h=i("tbiQ"),d=i("tsv4"),u=i("b6KT"),b=i("LRne"),g=i("2Vo4"),f=i("VRyK"),p=i("itXk"),S=i("lJxs"),m=i("JX91"),T=i("pLZG"),C=i("/uUt"),M=i("CqXF"),I=i("1G5W"),y=i("zp1y"),O=i("Kqyd"),$=i("8Y7J"),x=i("s7LF"),w=i("HsDr"),L=i("KtYJ"),v=i("/KOA"),z=i("Pza9"),j=i("KUXl"),A=i("/zj7"),k=i("DSso"),R=i("o9eT");const E=v.a.ACTIVE;let F=(()=>{class e{constructor(){this.IconColor=w.c,this.ListItemType=L.f,this.ThreadFilterOption=v.a,this.filterSelected=new $.n}ngOnInit(){this.filterControl=new x.f(E),this.filterControlSubscription=this.filterControl.valueChanges.subscribe(e=>this.filterSelected.emit(e))}ngOnDestroy(){this.filterControlSubscription&&this.filterControlSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$.Mb({type:e,selectors:[["app-messaging-threads-filters"]],inputs:{hasExistingThreads:"hasExistingThreads"},outputs:{filterSelected:"filterSelected"},decls:14,vars:17,consts:function(){let e,t,i,n,s;return e="Filter",t=" Active ",i=" Unread ",n=" Support ",s=" Archived ",[["flTrackingSection","InboxWidgetThreadFilters","buttonText",e,3,"buttonTextApplied","autoClose","edgeToEdge","filterApplied","hideDropdownIcon","iconLabel","disabled"],[3,"clickable","type"],["flTrackingLabel","InboxWidgetActiveFilter",3,"control","radioValue"],t,["flTrackingLabel","InboxWidgetUnreadFilter",3,"control","radioValue"],i,["flTrackingLabel","InboxWidgetSupportFilter",3,"control","radioValue"],n,["flTrackingLabel","InboxWidgetArchivedFilter",3,"control","radioValue"],s]},template:function(e,t){1&e&&($.Yb(0,"fl-dropdown-filter",0),$.Yb(1,"fl-list",1),$.Yb(2,"fl-list-item",2),$.Yb(3,"fl-text"),$.cc(4,3),$.Xb(),$.Xb(),$.Yb(5,"fl-list-item",4),$.Yb(6,"fl-text"),$.cc(7,5),$.Xb(),$.Xb(),$.Yb(8,"fl-list-item",6),$.Yb(9,"fl-text"),$.cc(10,7),$.Xb(),$.Xb(),$.Yb(11,"fl-list-item",8),$.Yb(12,"fl-text"),$.cc(13,9),$.Xb(),$.Xb(),$.Xb(),$.Xb()),2&e&&($.Ac("buttonTextApplied",t.filterControl.value),$.zc("autoClose",!0)("edgeToEdge",!0)("filterApplied",!0)("hideDropdownIcon",!0)("iconLabel","ui-setting-filter-v2")("disabled",!t.hasExistingThreads),$.Gb(1),$.zc("clickable",!0)("type",t.ListItemType.NON_BORDERED),$.Gb(1),$.zc("control",t.filterControl)("radioValue",t.ThreadFilterOption.ACTIVE),$.Gb(3),$.zc("control",t.filterControl)("radioValue",t.ThreadFilterOption.UNREAD),$.Gb(3),$.zc("control",t.filterControl)("radioValue",t.ThreadFilterOption.SUPPORT),$.Gb(3),$.zc("control",t.filterControl)("radioValue",t.ThreadFilterOption.ARCHIVED))},directives:[z.a,j.a,A.a,L.b,k.a,R.e],styles:[""],changeDetection:0}),e})();var P=i("/wLE"),U=i("eCtd"),X=i("w792"),_=i("3A0Z"),D=i("YFxV"),G=i("SVse"),N=i("wXpH"),B=i("SMHo"),Y=i("w13q"),Z=i("LLeR"),H=i("Rnop"),V=i("71eJ"),W=i("wZbG"),K=i("dJr3"),q=i("3S66");function J(e,t){if(1&e&&($.Yb(0,"fl-text",2),$.cc(1,3),$.Xb()),2&e){const e=$.rc();$.zc("flMarginBottom",e.Margin.XXSMALL)("size",e.TextSize.XXSMALL)}}const Q=function(e){return[e]};function ee(e,t){if(1&e){const e=$.Zb();$.Yb(0,"fl-list-item",11),$.nc("click",function(){$.Pc(e);const i=t.$implicit;return $.rc(4).handleSearchUserSelected(i)}),$.Yb(1,"fl-bit",12),$.Tb(2,"fl-user-avatar",13),$.Tb(3,"fl-username",14),$.Xb(),$.Xb()}if(2&e){const e=t.$implicit,i=$.rc(4);$.Gb(2),$.zc("flMarginRight",i.Margin.XXSMALL)("size",i.AvatarSize.XSMALL)("users",$.Ec(5,Q,e)),$.Gb(1),$.zc("displayName",e.displayName)("username",e.username)}}function te(e,t){if(1&e&&($.Yb(0,"fl-list",9),$.Zc(1,ee,4,7,"fl-list-item",10),$.Xb()),2&e){const e=$.rc(3);$.zc("flMarginBottom",e.Margin.XXSMALL)("clickable",!0)("padding",e.ListItemPadding.XXXSMALL)("type",e.ListItemType.NON_BORDERED),$.Gb(1),$.zc("ngForOf",e.users)}}function ie(e,t){if(1&e&&($.Yb(0,"fl-text",15),$.cc(1,16),$.Xb()),2&e){const e=$.rc(3);$.zc("flMarginBottom",e.Margin.XXSMALL)}}function ne(e,t){if(1&e&&($.Wb(0),$.Zc(1,te,2,5,"fl-list",7),$.Zc(2,ie,2,1,"ng-template",null,8,$.ad),$.Vb()),2&e){const e=$.Mc(3),t=$.rc(2);$.Gb(1),$.zc("ngIf",t.users.length>0)("ngIfElse",e)}}const se=function(){return[void 0]};function ae(e,t){if(1&e&&($.Wb(0),$.Yb(1,"fl-bit",17),$.Tb(2,"fl-user-avatar",13),$.Tb(3,"fl-loading-text",18),$.Xb(),$.Vb()),2&e){const e=$.rc(2);$.Gb(1),$.zc("flMarginBottom",e.Margin.XXSMALL),$.Gb(1),$.zc("flMarginRight",e.Margin.XXSMALL)("size",e.AvatarSize.XSMALL)("users",$.Dc(6,se)),$.Gb(1),$.zc("rows",1)("padded",!1)}}function re(e,t){if(1&e&&($.Wb(0),$.Yb(1,"fl-bit",17),$.Tb(2,"fl-icon",19),$.Yb(3,"fl-text",20),$.cc(4,21),$.Xb(),$.Xb(),$.Vb()),2&e){const e=$.rc(2);$.Gb(1),$.zc("flMarginBottom",e.Margin.XXSMALL),$.Gb(1),$.zc("flMarginRight",e.Margin.XXSMALL)("name","ui-warning-alt-v2")("color",e.IconColor.ERROR),$.Gb(1),$.zc("color",e.FontColor.ERROR)}}function ce(e,t){if(1&e&&($.Yb(0,"fl-text",4),$.cc(1,5),$.Xb(),$.Zc(2,ne,4,2,"ng-container",6),$.Zc(3,ae,4,7,"ng-container",6),$.Zc(4,re,5,5,"ng-container",6)),2&e){const e=$.rc();$.zc("flMarginBottom",e.Margin.XXSMALL)("weight",e.FontWeight.BOLD),$.Gb(2),$.zc("ngIf",e.status.ready),$.Gb(1),$.zc("ngIf",!e.status.ready&&!e.status.error),$.Gb(1),$.zc("ngIf",e.status.error)}}let oe=(()=>{class e{constructor(){this.AvatarSize=V.a,this.FontColor=H.a,this.FontWeight=R.c,this.IconColor=w.c,this.ListItemPadding=L.e,this.ListItemType=L.f,this.Margin=r.a,this.TextSize=R.f,this.startChat=new $.n}handleSearchUserSelected(e){this.startChat.emit({userIds:[e.id],threadType:d.ThreadTypeApi.ADMIN_PREFERRED_CHAT,origin:"ng-contact-list-user-search",context:{type:d.ContextTypeApi.SUPPORT_CHAT,id:e.id}})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$.Mb({type:e,selectors:[["app-messaging-thread-recruiter-search"]],inputs:{searching:"searching",status:"status",users:"users"},outputs:{startChat:"startChat"},decls:4,vars:2,consts:function(){let e,t,i,n;return e=" Press Enter on the search bar to search for users by username. ",t=" Direct Chat ",i=" No user found. ",n=" Something went wrong while searching for this user. Please try again. ",[[3,"flMarginBottom","size",4,"ngIf","ngIfElse"],["result",""],[3,"flMarginBottom","size"],e,[3,"flMarginBottom","weight"],t,[4,"ngIf"],["flTrackingSection","MessagingRecruiterSearchResult",3,"flMarginBottom","clickable","padding","type",4,"ngIf","ngIfElse"],["emptyResult",""],["flTrackingSection","MessagingRecruiterSearchResult",3,"flMarginBottom","clickable","padding","type"],["flTrackingLabel","MessagingRecruiterSearchItem",3,"click",4,"ngFor","ngForOf"],["flTrackingLabel","MessagingRecruiterSearchItem",3,"click"],[1,"RecruiterUserSearchResult-item"],[3,"flMarginRight","size","users"],[3,"displayName","username"],[3,"flMarginBottom"],i,[1,"RecruiterUserSearchResult-item",3,"flMarginBottom"],[1,"RecruiterUserSearchResult-loading",3,"rows","padded"],[3,"flMarginRight","name","color"],[3,"color"],n]},template:function(e,t){if(1&e&&($.Zc(0,J,2,2,"fl-text",0),$.Zc(1,ce,5,5,"ng-template",null,1,$.ad),$.Tb(3,"fl-hr")),2&e){const e=$.Mc(2);$.zc("ngIf",!t.searching)("ngIfElse",e)}},directives:[G.q,W.a,R.e,r.b,A.a,j.a,G.p,L.b,k.a,Y.a,V.b,K.b,q.a,w.d],styles:["[_nghost-%COMP%]{background-color:#fff;display:block;padding:0 12px}.RecruiterUserSearchResult-item[_ngcontent-%COMP%]{align-items:center;display:flex}.RecruiterUserSearchResult-loading[_ngcontent-%COMP%]{height:20px}"],changeDetection:0}),e})();var le=i("uB2V"),he=i("al+g");function de(e,t){1&e&&$.Ub(0)}function ue(e,t){1&e&&$.Ub(0)}function be(e,t){if(1&e&&($.Yb(0,"fl-bit"),$.Yb(1,"fl-bit",4),$.Zc(2,de,1,0,"ng-container",5),$.Xb(),$.Yb(3,"fl-bit",6),$.Zc(4,ue,1,0,"ng-container",5),$.Xb(),$.Xb()),2&e){$.rc();const e=$.Mc(4),t=$.rc();$.Gb(1),$.zc("flHideMobile",!0),$.Gb(1),$.zc("ngTemplateOutlet",e),$.Gb(1),$.zc("flShowMobile",!0)("flSticky",!0)("flStickyBehaviour",t.StickyBehaviour.ALWAYS)("flStickyPosition",t.StickyPosition.TOP),$.Gb(1),$.zc("ngTemplateOutlet",e)}}function ge(e,t){if(1&e){const e=$.Zb();$.Yb(0,"app-messaging-thread-recruiter-search",11),$.nc("startChat",function(t){return $.Pc(e),$.rc(3).onStartChat(t)}),$.sc(1,"flAsync"),$.sc(2,"flAsync"),$.sc(3,"flAsync"),$.Xb()}if(2&e){const e=$.rc(3);let t=null;$.zc("searching",(null==(t=$.tc(1,3,e.recruiterUserSearchQuery$))?null:t.length)>0)("status",$.tc(2,5,e.recruiterUserSearchResultFetchStatus$))("users",$.tc(3,7,e.recruiterUserSearchResult$))}}function fe(e,t){if(1&e){const e=$.Zb();$.Yb(0,"fl-bit",7),$.Yb(1,"fl-search",8),$.nc("query",function(t){return $.Pc(e),$.rc(2).onSearch(t)})("submit",function(){$.Pc(e);const t=$.rc().ngIf;return $.rc().onSubmitSearch(t.loggedInUser)}),$.Xb(),$.Yb(2,"app-messaging-threads-filters",9),$.nc("filterSelected",function(t){return $.Pc(e),$.rc(2).onFilterSelected(t)}),$.sc(3,"flAsync"),$.Xb(),$.Xb(),$.Zc(4,ge,4,9,"app-messaging-thread-recruiter-search",10)}if(2&e){const e=$.rc().ngIf,t=$.rc();$.Gb(1),$.zc("flMarginRight",t.Margin.XXSMALL),$.Gb(1),$.zc("hasExistingThreads",$.tc(3,3,t.hasExistingThreads$)),$.Gb(2),$.zc("ngIf",null==e.loggedInUser||null==e.loggedInUser.supportStatus?null:e.loggedInUser.supportStatus.type)}}function pe(e,t){if(1&e){const e=$.Zb();$.Yb(0,"app-messaging-search-results",12),$.nc("loadMoreThreads",function(){return $.Pc(e),$.rc(2).onLoadMoreThreads()})("loadMoreMessageSearchThreads",function(){return $.Pc(e),$.rc(2).onLoadMoreMessageSearchThreads()})("startChat",function(t){return $.Pc(e),$.rc(2).onStartChat(t)}),$.Xb()}if(2&e){const e=$.rc(2);$.zc("jobsSearchResult$",e.jobsSearchResult$)("hasExistingThreads$",e.hasExistingThreads$)("hasMoreThreads$",e.hasMoreThreads$)("hasMoreMessageSearchThreads$",e.hasMoreMessageSearchThreads$)("isInboxMode$",e.isInboxMode$)("isSearching$",e.isSearching$)("loggedInUser$",e.loggedInUser$)("messageSearchResult$",e.messageSearchResult$)("messageSearchThreadsFetchStatus$",e.messageSearchThreadsFetchStatus$)("peopleSearchResult$",e.peopleSearchResult$)("threadsDetails$",e.threadsDetails$)("threadsFetchStatus$",e.threadsFetchStatus$)}}const Se=function(e){return{"ThreadList--recruiter":e}};function me(e,t){if(1&e){const e=$.Zb();$.Wb(0),$.Zc(1,be,5,7,"fl-bit",0),$.sc(2,"flAsync"),$.Zc(3,fe,5,5,"ng-template",null,1,$.ad),$.Yb(5,"app-messaging-thread-list",2),$.nc("loadMoreThreads",function(){return $.Pc(e),$.rc().onLoadMoreThreads()})("startChat",function(t){return $.Pc(e),$.rc().onStartChat(t)}),$.sc(6,"flAsync"),$.Xb(),$.Zc(7,pe,1,12,"app-messaging-search-results",3),$.sc(8,"flAsync"),$.Vb()}if(2&e){const e=t.ngIf,i=$.rc();$.Gb(1),$.zc("ngIf",!$.tc(2,13,i.isNav$)),$.Gb(4),$.zc("ngClass",$.Ec(19,Se,!(null==e.loggedInUser||null==e.loggedInUser.supportStatus||!e.loggedInUser.supportStatus.type)))("flHide",$.tc(6,15,i.showNewSearch$))("hasExistingThreads$",i.hasExistingThreads$)("hasMoreThreads$",i.hasMoreThreads$)("isInboxMode$",i.isInboxMode$)("isNav$",i.isNav$)("loggedInUser$",i.loggedInUser$)("selectedThreadId$",i.selectedThreadId$)("threadsDetails$",i.visibleThreadsDetails$)("threadsFetchStatus$",i.threadsFetchStatus$)("threadsLoadingStateType$",i.threadsLoadingStateType$),$.Gb(2),$.zc("ngIf",$.tc(8,17,i.showNewSearch$))}}const Te=function(e){return{loggedInUser:e}};let Ce=(()=>{class e{constructor(e,t,i,n,s,a,c,l){this.auth=e,this.datastore=t,this.messagingChat=i,this.modalService=n,this.router=s,this.timeUtils=a,this.videochat=c,this.webSocketService=l,this.Margin=r.a,this.StickyBehaviour=o.a,this.StickyPosition=o.c,this.isNav$=b.a(!1),this.isInboxMode$=b.a(!1),this.isNewInboxShown$=b.a(!1),this.autoOpenedThreads={},this.threadFilterSubject$=new g.a(E),this.threadFilter$=this.threadFilterSubject$.asObservable(),this.searchQuerySubject$=new g.a(""),this.recruiterUserSearchQuerySubject$=new g.a(""),this.recruiterUserSearchQuery$=this.recruiterUserSearchQuerySubject$.asObservable(),this.THREADS_LIMIT_INCREMENT=100,this.messageSearchThreadsLimitSubject$=new g.a(this.THREADS_LIMIT_INCREMENT),this.messageSearchThreadsLimit$=this.messageSearchThreadsLimitSubject$.asObservable(),this.NON_ARCHIVE_FOLDERS=[d.FolderApi.INBOX,d.FolderApi.SENT,d.FolderApi.FREELANCER,d.FolderApi.NONE]}ngOnInit(){const e=this.auth.getUserId().pipe(Object(S.a)(e=>Object(l.s)(e)));this.loggedInUser$=this.datastore.document("users",e).valueChanges(),this.threadsLimitSubject$=new g.a(this.THREADS_LIMIT_INCREMENT),this.threadsLimit$=this.threadsLimitSubject$.asObservable(),this.threadsLoadingStateType$=f.a(this.threadsLimit$.pipe(Object(S.a)(e=>v.d.SPINNER)),this.threadFilter$.pipe(Object(S.a)(e=>v.d.FULL_LIST))),this.hasExistingThreads$=this.datastore.collection("threads",e=>e.limit(1)).valueChanges().pipe(Object(S.a)(e=>e.length>0),Object(m.a)(!0));const t=this.datastore.collection("threads",e=>p.a([this.threadsLimit$,this.threadFilter$,this.isNav$]).pipe(Object(S.a)(([t,i,n])=>{if(n)return e.where("folder","in",this.NON_ARCHIVE_FOLDERS).limit(5);let s=e.limit(t+1);switch(i){case v.a.ACTIVE:s=s.where("folder","in",this.NON_ARCHIVE_FOLDERS);break;case v.a.UNREAD:s=s.where("isRead","==",!1);break;case v.a.SUPPORT:s=s.where("folder","in",this.NON_ARCHIVE_FOLDERS).where("threadType","==",d.ThreadTypeApi.ADMIN_PREFERRED_CHAT).where("contextType","==",d.ContextTypeApi.SUPPORT_SESSION);break;case v.a.ARCHIVED:s=s.where("folder","==",d.FolderApi.ARCHIVED);break;default:Object(l.b)(i)}return s})));this.threadsFetchStatus$=t.status$;const i=t.valueChanges();this.hasMoreThreads$=p.a([i,this.threadsLimit$]).pipe(Object(S.a)(([e,t])=>t<e.length));const r=p.a([i,this.hasMoreThreads$]).pipe(Object(S.a)(([e,t])=>t?e.slice(0,-1):e)),c=this.datastore.collection("users",e=>e.limit(1).where("username","equalsIgnoreCase",this.recruiterUserSearchQuery$.pipe(Object(S.a)(e=>e.trim()),Object(T.a)(e=>!!e))));this.recruiterUserSearchResult$=c.valueChanges().pipe(),this.recruiterUserSearchResultFetchStatus$=c.status$,this.searchQuery$=this.searchQuerySubject$.asObservable().pipe(this.timeUtils.rxDebounceTime(1e3)),this.isSearching$=this.searchQuery$.pipe(Object(S.a)(e=>!!e)),this.showNewSearch$=p.a([this.isInboxMode$,this.isNewInboxShown$,this.isSearching$]).pipe(Object(S.a)(([e,t,i])=>i&&(!e||t)));const o=p.a([this.searchQuery$,this.showNewSearch$]).pipe(Object(T.a)(([e,t])=>t),Object(T.a)(([e,t])=>void 0!==e&&""!==e),Object(S.a)(([e,t])=>({searchTerm:e}))),y=this.datastore.collection("searchThreads",e=>e.search(o).limit(this.messageSearchThreadsLimit$)).valueChanges().pipe(Object(s.a)());this.messageSearchThreadsFetchStatus$=t.status$;const $=t.valueChanges();this.hasMoreMessageSearchThreads$=p.a([$,this.messageSearchThreadsLimit$]).pipe(Object(S.a)(([e,t])=>t<e.length));const x=p.a([r,y]).pipe(Object(S.a)(([e,t])=>[...e,...t])),w=x.pipe(Object(S.a)(e=>{const t=Object(l.d)(e.map(e=>e.members));return t.filter((e,i)=>t.indexOf(e)===i)})),L=this.datastore.collection("users",w).valueChanges(),z=x.pipe(Object(S.a)(e=>Object(u.g)(e,d.ContextTypeApi.PROJECT))),j=this.datastore.collection("threadProjects",z).valueChanges(),A=x.pipe(Object(S.a)(e=>Object(u.g)(e,d.ContextTypeApi.CONTEST))),k=this.datastore.collection("contests",A).valueChanges();this.messageSearchResult$=this.constructThreadDetails(y,L,j,k),this.threadsDetails$=this.constructThreadDetails(r,L,j,k),this.peopleSearchResult$=p.a([L,e,this.searchQuery$]).pipe(Object(S.a)(([e,t,i])=>e.filter(e=>e.id!==t&&(e.displayName.toLowerCase().includes(i)||e.username.toLowerCase().includes(i))))),this.jobsSearchResult$=p.a([this.threadsDetails$,this.searchQuery$]).pipe(Object(S.a)(([e,t])=>{const i=e.map(e=>e.contextObject).filter(l.h).filter(e=>e.title.toLowerCase().includes(t));return i.filter((e,t)=>i.indexOf(e)===t)})),this.visibleThreadsDetails$=p.a([e,this.threadsDetails$,this.searchQuerySubject$.asObservable(),this.isInboxMode$,this.isNewInboxShown$]).pipe(Object(S.a)(([e,t,i,n,s])=>""===i||!n||s?t:t.filter(t=>{var n;return(null===(n=t.contextObject)||void 0===n?void 0:n.title.toLowerCase().includes(i))||t.members.some(t=>t.id!==e&&(t.displayName.toLowerCase().includes(i)||t.username.toLowerCase().includes(i)))}))),this.inCall$=this.videochat.getInCall();const R=Object(O.a)(this.webSocketService,this.auth.authState$,this.inCall$.pipe(Object(C.a)()));this.callAlertSubscription=p.a([R,this.isNav$]).subscribe(([e,t])=>{t||void 0!==e&&(e.type!==h.a.NONE?this.popCallAlertModal(e):(this.videochat.setInCall(!!e.makingCall),this.modalService.close()))}),this.defaultThreadNavigateSubscription=p.a([this.messagingChat.getInboxViewState(),this.router.events.pipe(Object(T.a)(e=>e instanceof n.b),Object(M.a)(!0),Object(m.a)(!0)),r,this.isNav$]).subscribe(([e,t,i,s])=>{if(e===a.c.PAGE||s)return;const r=this.router.parseUrl(this.router.url),c=r.root.children[n.d];if(i.length>0&&c&&1===c.segments.length&&"messages"===c.segments[0].path){const e=r.fragment&&r.fragment.includes("thread/")?r.fragment.split("thread/")[1]:i[0].id;this.router.navigate([`/messages/thread/${e}`],{queryParamsHandling:"merge",replaceUrl:!0})}}),this.startChatSubscription=p.a([r.pipe(Object(I.a)(this.timeUtils.rxTimer(3e4))),b.a(Date.now()),this.isNav$]).subscribe(([e,t,i])=>{i||e.map(e=>{!this.autoOpenedThreads[e.id]&&e.messageUnreadCount>0&&e.message&&t-e.message.timeCreated<3e4&&(this.autoOpenedThreads[e.id]=!0,this.messagingChat.startChat({userIds:e.members,threadType:e.threadType,origin:"contactList",context:e.context,threadId:e.id,focus:!1,doNotRedirect:!0}))})})}onLoadMoreThreads(){this.threadsLimitSubject$.next(this.threadsLimitSubject$.value+this.THREADS_LIMIT_INCREMENT)}onLoadMoreMessageSearchThreads(){this.messageSearchThreadsLimitSubject$.next(this.messageSearchThreadsLimitSubject$.value+this.THREADS_LIMIT_INCREMENT)}onFilterSelected(e){this.threadFilterSubject$.next(e)}onSearch(e){this.searchQuerySubject$.next(e.toLowerCase().trim()),this.recruiterUserSearchQuerySubject$.next("")}onStartChat(e){this.messagingChat.startChat(e)}onSubmitSearch(e){var t;(null===(t=null==e?void 0:e.supportStatus)||void 0===t?void 0:t.type)&&this.recruiterUserSearchQuerySubject$.next(this.searchQuerySubject$.getValue())}trackByThreadId(e,t){return t.thread.id}popCallAlertModal(e){this.modalService.open("CallAlertModal",{inputs:{otherUserIds:e.otherMembers,callType:e.type,threadId:e.threadId,recorded:e.recorded},size:c.a.SMALL}).afterClosed().pipe(Object(y.a)(this.inCall$)).toPromise().then(([t,i])=>{i||(t?(this.videochat.openCallWindow({action:e.type,threadId:e.threadId,accepting:!0}),this.videochat.notifyAction("accept",e.threadId)):this.videochat.notifyAction("reject",e.threadId))})}constructThreadDetails(e,t,i,n){return p.a([e,t,i,n]).pipe(Object(S.a)(([e,t,i,n])=>e.map(e=>{let s;if(e.context.type===d.ContextTypeApi.CONTEST){const t=e.context.id;s=n.find(e=>e.id===t)}else if(e.context.type===d.ContextTypeApi.PROJECT){const t=e.context.id;s=i.find(e=>e.id===t)}return{thread:e,contextObject:s,members:e.members.map(e=>t.find(t=>t.id===e)||void 0).filter(l.h)}})))}ngOnDestroy(){var e,t,i,n;null===(e=this.threadFilterSubscription)||void 0===e||e.unsubscribe(),null===(t=this.defaultThreadNavigateSubscription)||void 0===t||t.unsubscribe(),null===(i=this.startChatSubscription)||void 0===i||i.unsubscribe(),null===(n=this.callAlertSubscription)||void 0===n||n.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)($.Sb(P.a),$.Sb(U.a),$.Sb(a.d),$.Sb(_.b),$.Sb(n.e),$.Sb(D.a),$.Sb(h.b),$.Sb(X.a))},e.\u0275cmp=$.Mb({type:e,selectors:[["app-messaging-threads"]],inputs:{isNav$:"isNav$",isInboxMode$:"isInboxMode$",isNewInboxShown$:"isNewInboxShown$",selectedThreadId$:"selectedThreadId$"},decls:2,vars:5,consts:[[4,"ngIf"],["actions",""],[1,"ThreadList",3,"ngClass","flHide","hasExistingThreads$","hasMoreThreads$","isInboxMode$","isNav$","loggedInUser$","selectedThreadId$","threadsDetails$","threadsFetchStatus$","threadsLoadingStateType$","loadMoreThreads","startChat"],[3,"jobsSearchResult$","hasExistingThreads$","hasMoreThreads$","hasMoreMessageSearchThreads$","isInboxMode$","isSearching$","loggedInUser$","messageSearchResult$","messageSearchThreadsFetchStatus$","peopleSearchResult$","threadsDetails$","threadsFetchStatus$","loadMoreThreads","loadMoreMessageSearchThreads","startChat",4,"ngIf"],[3,"flHideMobile"],[4,"ngTemplateOutlet"],[3,"flShowMobile","flSticky","flStickyBehaviour","flStickyPosition"],[1,"MessagingThreads-actions"],[1,"MessagingThreads-actions-search",3,"flMarginRight","query","submit"],[3,"hasExistingThreads","filterSelected"],[3,"searching","status","users","startChat",4,"ngIf"],[3,"searching","status","users","startChat"],[3,"jobsSearchResult$","hasExistingThreads$","hasMoreThreads$","hasMoreMessageSearchThreads$","isInboxMode$","isSearching$","loggedInUser$","messageSearchResult$","messageSearchThreadsFetchStatus$","peopleSearchResult$","threadsDetails$","threadsFetchStatus$","loadMoreThreads","loadMoreMessageSearchThreads","startChat"]],template:function(e,t){1&e&&($.Zc(0,me,9,21,"ng-container",0),$.sc(1,"flAsync")),2&e&&$.zc("ngIf",$.Ec(3,Te,$.tc(1,1,t.loggedInUser$)))},directives:[G.q,N.a,G.o,B.a,Y.a,G.v,o.b,Z.a,r.b,F,oe,le.a],pipes:[he.a],styles:["[_nghost-%COMP%]{background:#fff;display:flex;flex-direction:column;height:100%}.MessagingThreads-actions[_ngcontent-%COMP%]{align-items:center;background-color:#fff;display:flex;justify-content:flex-end;padding:12px}.MessagingThreads-actions-search[_ngcontent-%COMP%]{flex-grow:1}.ThreadList[_ngcontent-%COMP%]{display:block;flex:0 1 100%;overflow-y:hidden;position:relative;width:100%}"],changeDetection:0}),e})()},hkQL:function(e,t,i){"use strict";i.d(t,"a",function(){return L});var n=i("SVse"),s=i("s7LF"),a=i("JADw"),r=i("Nr4O"),c=i("48dK"),o=i("tKIg"),l=i("EgRV"),h=i("9u4R"),d=i("tqRt"),u=i("OpNG"),b=i("cUs2");function g(){return{defaultOrder:{field:"id",direction:u.a.ASC},fetch:(e,t,i,n)=>({endpoint:`users/0.1/teams/${Object(b.h)(i,"teamId")[0]}/members/`,isGaf:!1,params:{}}),push:void 0,set:void 0,update:void 0,remove:void 0}}var f=i("f6cb");function p(e,t){if(!(e.id&&t&&e.user_id&&e.role&&e.permissions&&void 0!==e.is_deleted))throw new ReferenceError("Missing a required team member field.");const i=Object(f.e)(Object.entries(e.permissions).map(([e,t])=>[e,t||!1]));return{id:e.id,teamId:t,userId:e.user_id,description:e.description,role:e.role,permissions:i,isDeleted:e.is_deleted||!1,accessToken:e.access_token,lastUpdated:e.last_updated?1e3*e.last_updated:void 0,joined:e.joined?1e3*e.joined:void 0}}function S(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("teamMembers"===t.payload.type){const{result:i,ref:n,order:s}=t.payload;return i.team&&i.team.members?Object(b.o)(e,Object(b.z)(i.team.members,p,i.team.id),s,n):e}return e;default:return e}}var m=i("8Y7J");let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Qb({type:e}),e.\u0275inj=m.Pb({imports:[[d.j.forFeature("teamMembers",S),h.d.forFeature("teamMembers",g)]]}),e})();var C=i("ynQg"),M=i("jnT3"),I=i("7LCa"),y=i("pjJp"),O=i("EXHp"),$=i("18b0"),x=i("cokP"),w=i("knEe");let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Qb({type:e}),e.\u0275inj=m.Pb({imports:[[x.a,n.c,s.u,$.a,w.a,O.a,a.a,r.a,c.a,o.a,l.a,T,C.a,M.a,I.a,y.a]]}),e})()},kuzk:function(e,t,i){"use strict";i.d(t,"a",function(){return kt});var n=i("8Y7J"),s=i("s7LF"),a=i("iInd"),r=i("97vJ"),c=i("OpNG"),o=i("jnZY"),l=i("3f1L"),h=i("ph87"),d=i("yeKy"),u=i("4ykm"),b=i("Rnop"),g=i("o9eT"),f=i("f6cb"),p=i("tbiQ"),S=i("tsv4"),m=i("b6KT"),T=i("qSur"),C=i("2Vo4"),M=i("XNiG"),I=i("itXk"),y=i("VRyK"),O=i("LRne"),$=i("05l1"),x=i("x+ZX"),w=i("lJxs"),L=i("JX91"),v=i("/uUt"),z=i("pLZG"),j=i("CqXF"),A=i("Kj3r"),k=i("vkgz"),R=i("1G5W"),E=i("zp1y"),F=i("Kqyd"),P=i("HsDr"),U=i("w5Bh"),X=i("9Aot"),_=i("DSso"),D=i("SVse"),G=i("/zj7"),N=i("KtYJ"),B=i("al+g");function Y(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-list-item",5),n.nc("click",function(){return n.Pc(e),n.rc(2).handleThreadSearchToggle()}),n.Tb(1,"fl-icon",6),n.Yb(2,"fl-text",7),n.cc(3,8),n.Xb(),n.Xb()}if(2&e){const e=n.rc(2);n.Gb(1),n.zc("size",e.IconSize.SMALL),n.Gb(1),n.zc("fontType",e.FontType.SPAN)}}function Z(e,t){if(1&e&&(n.Yb(0,"fl-list",3),n.Zc(1,Y,4,2,"fl-list-item",4),n.Xb()),2&e){const e=n.rc();n.zc("clickable",!0),n.Gb(1),n.zc("ngIf",e.showThreadSearchOption)}}var H=function(e){return e.USER="user",e.THREAD="thread",e}({});let V=(()=>{class e{constructor(){this.Margin=X.a,this.FontType=g.b,this.IconColor=P.c,this.IconSize=P.e,this.InputSize=U.c,this.threadSearchEnabled=!1,this.showThreadSearchOption=!1,this.searchMode=H.USER,this.keyEnter=new n.n,this.threadSearchSelected=new n.n}ngOnInit(){this.showClearInputIcon$=this.inputControl.valueChanges.pipe(Object(w.a)(e=>""!==e.trim()),Object(v.a)(),Object(L.a)(!1))}handleThreadSearchToggle(){this.threadSearchSelected.emit()}handleInputKeypress(e){(e.key&&"enter"===e.key.toLowerCase()||13===(e.which||e.keyCode||e.charCode))&&this.keyEnter.emit()}handleClearInput(){this.inputControl.setValue("")}ngOnDestroy(){this.contactsToggleSubscription&&this.contactsToggleSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-search"]],inputs:{inputControl:"inputControl",threadSearchEnabled:"threadSearchEnabled",showThreadSearchOption:"showThreadSearchOption",searchMode:"searchMode"},outputs:{keyEnter:"keyEnter",threadSearchSelected:"threadSearchSelected"},decls:4,vars:11,consts:function(){let e,t;return e="Search for People",t=" Search your messages instead ",[["ngDefaultControl","","flTrackingLabel","Search","iconStart","ui-search","placeholder",e,1,"InputField",3,"control","leftIconSize","leftIconColor","iconEnd","rightIconSize","rightIconColor","size","flMarginBottom","keypress","iconEndClick"],["searchInput",""],["class","ToggleContainer",3,"clickable",4,"ngIf"],[1,"ToggleContainer",3,"clickable"],["flTrackingLabel","ThreadSearchToggle",3,"click",4,"ngIf"],["flTrackingLabel","ThreadSearchToggle",3,"click"],["name","ui-search",3,"size"],[3,"fontType"],t]},template:function(e,t){1&e&&(n.Yb(0,"fl-input",0,1),n.nc("keypress",function(e){return t.handleInputKeypress(e)})("iconEndClick",function(){return t.handleClearInput()}),n.sc(2,"flAsync"),n.Xb(),n.Zc(3,Z,2,2,"fl-list",2)),2&e&&(n.zc("control",t.inputControl)("leftIconSize",t.IconSize.SMALL)("leftIconColor",t.IconColor.DARK)("iconEnd",n.tc(2,9,t.showClearInputIcon$)?"ui-close":void 0)("rightIconSize",t.IconSize.SMALL)("rightIconColor",t.IconColor.DARK)("size",t.InputSize.SMALL)("flMarginBottom",t.threadSearchEnabled&&t.showThreadSearchOption?t.Margin.XSMALL:t.Margin.NONE),n.Gb(3),n.zc("ngIf",t.threadSearchEnabled))},directives:[U.b,s.c,_.a,X.b,D.q,G.a,N.b,P.d,g.e],pipes:[B.a],styles:["[_nghost-%COMP%]{background-color:#fff;padding:8px;width:100%}@media (max-width:767px){[_nghost-%COMP%]{padding-left:calc(env(safe-area-inset-left) + 16px);padding-right:calc(env(safe-area-inset-left) + 16px)}}.InputField[_ngcontent-%COMP%]{width:100%}.ToggleContainer[_ngcontent-%COMP%]{display:flex;width:100%}.IconContainer[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}"],changeDetection:0}),e})();var W=i("YKAE"),K=i("w13q"),q=i("71eJ"),J=i("dJr3"),Q=i("pZRy"),ee=i("Z8zW");function te(e,t){if(1&e&&(n.Yb(0,"fl-text",9),n.cc(1,10),n.Xb()),2&e){const e=n.rc(3);n.zc("size",e.TextSize.XSMALL)("fontType",e.FontType.SPAN)}}function ie(e,t){if(1&e&&(n.Yb(0,"fl-text",9),n.bd(1),n.sc(2,"uppercase"),n.Xb()),2&e){const e=n.rc(3);n.zc("size",e.TextSize.XSMALL)("fontType",e.FontType.SPAN),n.Gb(1),n.dd(" ",n.tc(2,3,e.threadSet.title)," ")}}function ne(e,t){if(1&e&&(n.Yb(0,"fl-list-item-header",5),n.Wb(1,6),n.Zc(2,te,2,2,"fl-text",7),n.Zc(3,ie,3,5,"fl-text",8),n.Vb(),n.Xb()),2&e){const e=n.rc(2);n.Gb(1),n.zc("ngSwitch",e.threadSet.index),n.Gb(1),n.zc("ngSwitchCase",e.ThreadSetIndex.OTHER)}}function se(e,t){if(1&e&&(n.Tb(0,"fl-user-avatar",27),n.sc(1,"isOnline"),n.sc(2,"flAsync")),2&e){const e=n.rc().$implicit,t=n.rc(3);n.zc("users",t.getThreadMembers(e))("isOnline",1===e.otherMembers.length&&t.users[e.otherMembers[0]]?n.uc(1,3,t.users[e.otherMembers[0]],n.tc(2,6,t.onlineOfflineStatuses$)):void 0)("flMarginRight",t.Margin.XXXSMALL)}}function ae(e,t){if(1&e&&n.Tb(0,"fl-username",30),2&e){const e=n.rc(2).$implicit,t=n.rc(3);n.zc("truncateText",!0)("displayName",null==t.users[e.otherMembers[0]]?null:t.users[e.otherMembers[0]].displayName)("truncateText",!0)("username",null==t.users[e.otherMembers[0]]?null:t.users[e.otherMembers[0]].username)("flMarginBottom",t.Margin.XXXSMALL)}}function re(e,t){if(1&e&&(n.Yb(0,"fl-text",31),n.bd(1),n.Xb()),2&e){const e=n.rc(2).$implicit,t=n.rc(3);n.zc("size",t.TextSize.XSMALL)("weight",t.FontWeight.MEDIUM)("flMarginBottom",t.Margin.XXXSMALL),n.Gb(1),n.dd(" ",t.getTitle(e)," ")}}function ce(e,t){if(1&e&&(n.Yb(0,"fl-bit",22),n.Zc(1,ae,1,5,"fl-username",28),n.Zc(2,re,2,4,"ng-template",null,29,n.ad),n.Xb()),2&e){const e=t.ngIf,i=n.Mc(3),s=n.rc().$implicit,a=n.rc(3);n.Gb(1),n.zc("ngIf",e===a.ThreadTitleType.USERNAME&&(null==s.otherMembers?null:s.otherMembers.length)>0&&a.users[s.otherMembers[0]])("ngIfElse",i)}}function oe(e,t){if(1&e&&(n.Yb(0,"fl-bit",25),n.Tb(1,"fl-relative-time",32),n.Xb()),2&e){const e=n.rc().$implicit;n.Gb(1),n.zc("date",null==e.message?null:e.message.timeCreated)("strict",!0)("includeSeconds",!1)}}function le(e,t){if(1&e&&(n.Yb(0,"fl-text",33),n.Yb(1,"fl-text",34),n.bd(2),n.Xb(),n.Yb(3,"fl-text",35),n.bd(4),n.Xb(),n.Yb(5,"fl-text",34),n.bd(6),n.Xb(),n.Xb()),2&e){const e=n.rc().$implicit,t=n.rc(3);n.zc("fontType",t.FontType.SPAN),n.Gb(1),n.Vc(t.FontStyle.ITALIC),n.zc("fontType",t.FontType.SPAN)("color",t.FontColor.MID),n.Gb(1),n.dd(" ",e.highlights[0].highlightedText.preceding," "),n.Gb(1),n.Vc(t.FontStyle.ITALIC),n.zc("fontType",t.FontType.SPAN)("color",t.FontColor.MID),n.Gb(1),n.dd(" ",e.highlights[0].highlightedText.highlighted," "),n.Gb(1),n.Vc(t.FontStyle.ITALIC),n.zc("fontType",t.FontType.SPAN)("color",t.FontColor.MID),n.Gb(1),n.dd(" ",e.highlights[0].highlightedText.succeeding," ")}}function he(e,t){if(1&e&&(n.Yb(0,"fl-text",37),n.bd(1),n.Xb()),2&e){const e=n.rc(2).$implicit,t=n.rc(3);n.zc("fontType",t.FontType.SPAN)("color",e.messageUnreadCount>0?t.FontColor.DARK:t.FontColor.MID)("weight",e.messageUnreadCount>0?t.FontWeight.BOLD:t.FontWeight.NORMAL),n.Gb(1),n.dd(" ",t.getSubtitle(e)," ")}}function de(e,t){if(1&e&&n.Zc(0,he,2,4,"fl-text",36),2&e){const e=n.rc().$implicit,t=n.rc(3);n.zc("ngIf",!!t.getSubtitle(e))}}function ue(e,t){if(1&e&&(n.Yb(0,"fl-text",38),n.bd(1),n.Xb()),2&e){const e=n.rc().$implicit,t=n.rc(3);n.zc("size",t.TextSize.XXXSMALL)("fontType",t.FontType.SPAN)("weight",t.FontWeight.BOLD)("color",t.FontColor.LIGHT),n.Gb(1),n.dd(" ",e.messageUnreadCount<100?e.messageUnreadCount:"99+"," ")}}const be=function(e){return{Selected:e}};function ge(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-bit",14),n.Yb(1,"fl-bit",15),n.nc("click",function(){n.Pc(e);const i=t.$implicit;return n.rc(3).handleThreadSelected(i)}),n.Yb(2,"fl-bit",16),n.Zc(3,se,3,8,"fl-user-avatar",17),n.Xb(),n.Yb(4,"fl-bit",18),n.Yb(5,"fl-bit",19),n.Zc(6,ce,4,2,"fl-bit",20),n.Zc(7,oe,2,3,"fl-bit",21),n.Xb(),n.Yb(8,"fl-bit",19),n.Yb(9,"fl-bit",22),n.Zc(10,le,7,16,"fl-text",23),n.Zc(11,de,1,1,"ng-template",null,24,n.ad),n.Xb(),n.Yb(13,"fl-bit",25),n.Zc(14,ue,2,5,"fl-text",26),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Xb()}if(2&e){const e=t.$implicit,i=n.Mc(12),s=n.rc(3);n.Gb(1),n.Ac("flTrackingReferenceId",e.id),n.zc("ngClass",n.Ec(8,be,s.inboxMode&&s.selectedThreadId===e.id)),n.Gb(2),n.zc("ngIf",e.otherMembers.length>0),n.Gb(3),n.zc("ngIf",s.getTitleType(e)),n.Gb(1),n.zc("ngIf",s.inboxMode&&(null==e.message?null:e.message.timeCreated)),n.Gb(3),n.zc("ngIf",e.highlights&&e.highlights[0])("ngIfElse",i),n.Gb(4),n.zc("ngIf",e.messageUnreadCount>0)}}function fe(e,t){if(1&e&&(n.Yb(0,"fl-list-item-body",11),n.Yb(1,"fl-bit",12),n.Zc(2,ge,15,10,"fl-bit",13),n.Xb(),n.Xb()),2&e){const e=n.rc(2);n.Gb(2),n.zc("ngForOf",e.threadSet.threads)("ngForTrackBy",e.identifyThread)}}const pe=function(e){return{GrayBackground:e}};function Se(e,t){if(1&e&&(n.Yb(0,"fl-list",1),n.Yb(1,"fl-list-item",2),n.Zc(2,ne,4,2,"fl-list-item-header",3),n.Zc(3,fe,3,2,"fl-list-item-body",4),n.Xb(),n.Xb()),2&e){const e=n.rc();n.zc("bodyEdgeToEdge",!0)("clickable",e.threadSet.index===e.ThreadSetIndex.TEAMS)("expandable",e.threadSet.index===e.ThreadSetIndex.TEAMS)("padding",e.ListItemPadding.XXXSMALL)("type",e.ListItemType.DEFAULT),n.Gb(1),n.zc("ngClass",n.Ec(8,pe,e.grayBackground)),n.Gb(1),n.zc("ngIf",e.threadSet.title),n.Gb(1),n.zc("ngIf",e.threadSet.threads.length>0)}}var me=function(e){return e.SEARCH="search_results",e.ACTIVE="default",e.OTHER="other",e}({}),Te=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ACTIVE=1]="ACTIVE",e[e.TEAMS=2]="TEAMS",e[e.OTHER=3]="OTHER",e[e.SUPPORT=4]="SUPPORT",e}({}),Ce=function(e){return e.CONTEXT_TITLE="Context Title",e.USERNAME="Username",e}({});let Me=(()=>{class e{constructor(){this.Margin=X.a,this.TextSize=g.f,this.FontColor=b.a,this.FontStyle=g.a,this.FontType=g.b,this.FontWeight=g.c,this.HoverColor=P.a,this.IconColor=P.c,this.IconSize=P.e,this.TooltipPosition=W.b,this.ListItemType=N.f,this.ListItemPadding=N.e,this.ThreadSetIndex=Te,this.ThreadTitleType=Ce,this.grayBackground=!1,this.selectThread=new n.n}handleThreadSelected(e){this.selectThread.emit(e)}getThreadMembers(e){return e.otherMembers.map(e=>this.users[e]||void 0).filter(f.h)}getTitleType(e){return e.threadType===S.ThreadTypeApi.PRIVATE_CHAT||e.threadType===S.ThreadTypeApi.ADMIN_PREFERRED_CHAT||e.threadType===S.ThreadTypeApi.PRIMARY?Ce.USERNAME:Ce.CONTEXT_TITLE}getTitle(e){return"project"===e.context.type&&this.projects&&this.projects[e.context.id]?this.projects[e.context.id].title:"contest"===e.context.type&&this.contests&&this.contests[e.context.id]?this.contests[e.context.id].title:e.threadType===S.ThreadTypeApi.TEAM_OFFICIAL&&this.threadSet.title?this.threadSet.title:e.otherMembers.filter(e=>this.users[e]).map(e=>this.users[e].displayName).join(", ")}getSubtitle(e){if("contest"===e.context.type&&!this.contests[e.context.id]||"project"===e.context.type&&!this.projects[e.context.id])return`This ${e.context.type} has been deleted`;if(e.message){if(e.message.message)return e.message.message;const t=this.users[e.message.fromUser];if(e.message.attachments&&t)return`${t.displayName} sent an attachment`}return e.message||e.threadType===S.ThreadTypeApi.ADMIN_PREFERRED_CHAT||e.threadType===S.ThreadTypeApi.GROUP||"project"!==e.context.type&&"contest"!==e.context.type?e.threadType===S.ThreadTypeApi.TEAM_OFFICIAL?"Official Group Chat":void 0:this.getTitle(e)}identifyThread(e,t){return t.id}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-thread-set"]],inputs:{grayBackground:"grayBackground",threadSet:"threadSet",users:"users",contests:"contests",projects:"projects",inboxMode:"inboxMode",onlineOfflineStatuses$:"onlineOfflineStatuses$",selectedThreadId:"selectedThreadId"},outputs:{selectThread:"selectThread"},decls:1,vars:1,consts:function(){let e;return e=" OTHER CHATS ",[[3,"bodyEdgeToEdge","clickable","expandable","padding","type",4,"ngIf"],[3,"bodyEdgeToEdge","clickable","expandable","padding","type"],[3,"ngClass"],["class","ThreadSetHeader",4,"ngIf"],["class","ThreadSetBody",4,"ngIf"],[1,"ThreadSetHeader"],[3,"ngSwitch"],["class","ThreadRowTitle",3,"size","fontType",4,"ngSwitchCase"],["class","ThreadRowTitle",3,"size","fontType",4,"ngSwitchDefault"],[1,"ThreadRowTitle",3,"size","fontType"],e,[1,"ThreadSetBody"],[1,"ThreadList"],["class","ThreadListItem",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ThreadListItem"],["flTrackingLabel","ThreadSelected","flTrackingReferenceType","thread_id",1,"ThreadListItemRow",3,"ngClass","flTrackingReferenceId","click"],[1,"AvatarContainer"],[3,"users","isOnline","flMarginRight",4,"ngIf"],[1,"MainRow"],[1,"MainRowContent"],["class","TextContainer",4,"ngIf"],["class","IconContainer",4,"ngIf"],[1,"TextContainer"],[3,"fontType",4,"ngIf","ngIfElse"],["displaySubtitle",""],[1,"IconContainer"],["class","UnreadCount","data-size","mid",3,"size","fontType","weight","color",4,"ngIf"],[3,"users","isOnline","flMarginRight"],["class","Username",3,"truncateText","displayName","username","flMarginBottom",4,"ngIf","ngIfElse"],["displayThreadTitle",""],[1,"Username",3,"truncateText","displayName","username","flMarginBottom"],["data-uitest-target","contactlist-thread-item-title",1,"Title",3,"size","weight","flMarginBottom"],[3,"date","strict","includeSeconds"],[3,"fontType"],[1,"Subtitle",3,"fontType","color"],[1,"Highlighted","Subtitle",3,"fontType","color"],["class","Subtitle",3,"fontType","color","weight",4,"ngIf"],[1,"Subtitle",3,"fontType","color","weight"],["data-size","mid",1,"UnreadCount",3,"size","fontType","weight","color"]]},template:function(e,t){1&e&&n.Zc(0,Se,4,10,"fl-list",0),2&e&&n.zc("ngIf",t.threadSet.threads.length>0)},directives:[D.q,G.a,N.b,D.o,N.c,D.s,D.t,D.u,g.e,N.a,K.a,D.p,_.a,q.b,X.b,J.b,Q.b],pipes:[D.B,ee.a,B.a],styles:["[_nghost-%COMP%]{color:#0e1724;margin:0 0 4px}.GrayBackground[_ngcontent-%COMP%]{background:#f0f0f0}.ThreadList[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;width:auto}.ThreadListItem[_ngcontent-%COMP%]{box-sizing:border-box;display:block;width:100%}.ThreadListItem[_ngcontent-%COMP%]:hover{background-color:#f7f7f7}.ThreadListItemRow[_ngcontent-%COMP%]{cursor:pointer;display:flex;padding:8px}@media (max-width:767px){.ThreadListItemRow[_ngcontent-%COMP%]{padding-left:calc(env(safe-area-inset-left) + 16px);padding-right:calc(env(safe-area-inset-left) + 16px)}}.ThreadListItemRow[_ngcontent-%COMP%]:hover   .ToggleArchive[_ngcontent-%COMP%]{opacity:1}.MainRow[_ngcontent-%COMP%]{flex:1 1 0%;flex-direction:column;min-width:0}.MainRow[_ngcontent-%COMP%], .MainRowContent[_ngcontent-%COMP%]{display:flex}.TextContainer[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0;padding-right:4px}.TextContainer[_ngcontent-%COMP%], .ThreadRowTitle[_ngcontent-%COMP%], .Title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.IconContainer[_ngcontent-%COMP%]{align-items:flex-end;display:flex;flex-direction:column}.ThreadSetHeader[_ngcontent-%COMP%]{display:flex;padding:4px}.ToggleArchive[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s ease-in-out}.ToggleArchive[_ngcontent-%COMP%]:hover{opacity:1}.UnreadCount[_ngcontent-%COMP%]{align-items:center;background:#eb3730;border-radius:50%;display:flex;justify-content:center}.UnreadCount[data-size=mid][_ngcontent-%COMP%]{height:23px;width:23px}.UnreadCount[data-size=small][_ngcontent-%COMP%]{height:20px;width:20px}.Username[_ngcontent-%COMP%]{flex-wrap:nowrap}.Highlighted[_ngcontent-%COMP%]{background-color:#ffeb3b}@media (max-width:960px){.ThreadRowTitle[_ngcontent-%COMP%]{white-space:normal}}.AvatarContainer[_ngcontent-%COMP%]{position:relative}.FloatingUnreadCountContainer[_ngcontent-%COMP%]{display:inline-block;line-height:0;position:absolute;right:0;top:0}.Selected[_ngcontent-%COMP%]{background-color:#f0f0f0}"],changeDetection:0}),e})();var Ie=i("/wLE"),ye=i("eCtd"),Oe=i("w792"),$e=i("3A0Z"),xe=i("YFxV"),we=i("SMHo"),Le=i("2zwU"),ve=i("lDT0"),ze=i("KUXl");function je(e,t){if(1&e&&(n.Wb(0),n.Tb(1,"fl-text",10),n.Vb()),2&e){const e=n.rc();n.Gb(1),n.zc("fontType",e.FontType.SPAN)}}function Ae(e,t){if(1&e&&(n.Yb(0,"fl-text",11),n.cc(1,12),n.Xb()),2&e){const e=n.rc();n.zc("color",e.FontColor.DARK)("weight",e.FontWeight.BOLD)("flMarginRight",e.Margin.XXSMALL)}}function ke(e,t){if(1&e&&(n.Yb(0,"fl-text",13),n.cc(1,14),n.Xb()),2&e){const e=n.rc();n.zc("color",e.FontColor.LIGHT)("weight",e.FontWeight.BOLD)("fontType",e.FontType.SPAN)}}function Re(e,t){if(1&e&&(n.Wb(0),n.Yb(1,"fl-text",15),n.bd(2),n.Xb(),n.Vb()),2&e){const e=n.rc();n.Gb(1),n.zc("fontType",e.FontType.SPAN)("color",e.FontColor.LIGHT),n.Gb(1),n.dd(" (",e.unreadCount,") ")}}function Ee(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-icon",16),n.nc("click",function(){return n.Pc(e),n.rc().toggleSounds()}),n.Xb()}if(2&e){const e=n.rc();n.zc("color",e.isCompact?e.IconColor.LIGHT:e.IconColor.DARK)("size",e.IconSize.SMALL)("hoverColor",e.HoverColor.PRIMARY)}}function Fe(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-icon",17),n.nc("click",function(){return n.Pc(e),n.rc().toggleSounds()}),n.Xb()}if(2&e){const e=n.rc();n.zc("color",e.isCompact?e.IconColor.LIGHT:e.IconColor.PRIMARY)("size",e.IconSize.SMALL)("hoverColor",e.HoverColor.PRIMARY)}}function Pe(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-icon",18),n.nc("click",function(){return n.Pc(e),n.rc().toggleMinimise()}),n.Xb()}if(2&e){const e=n.rc();n.zc("color",e.IconColor.LIGHT)("size",e.IconSize.SMALL)("hoverColor",e.HoverColor.PRIMARY)}}function Ue(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-icon",19),n.nc("click",function(){return n.Pc(e),n.rc().toggleMinimise()}),n.Xb()}if(2&e){const e=n.rc();n.zc("color",e.IconColor.LIGHT)("size",e.IconSize.SMALL)("hoverColor",e.HoverColor.PRIMARY)}}let Xe=(()=>{class e{constructor(){this.Margin=X.a,this.FontType=g.b,this.FontColor=b.a,this.FontWeight=g.c,this.IconColor=P.c,this.IconSize=P.e,this.HoverColor=P.a,this.LinkUnderline=ve.e,this.minimise=new n.n,this.setChatSoundSetting=new n.n}handleClick(){(this.isCompact||this.isMinimised)&&this.toggleMinimise()}toggleMinimise(){this.minimise.emit()}toggleSounds(){this.setChatSoundSetting.emit({setting:this.soundSetting,enabled:!(this.soundSetting&&this.soundSetting.enabled)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-header"]],hostVars:4,hostBindings:function(e,t){1&e&&n.nc("click",function(){return t.handleClick()}),2&e&&n.Kb("IsCompact",t.isCompact)("IsMinimised",t.isMinimised)},inputs:{isCompact:"isCompact",isMinimised:"isMinimised",soundSetting:"soundSetting",unreadCount:"unreadCount"},outputs:{minimise:"minimise",setChatSoundSetting:"setChatSoundSetting"},decls:12,vars:12,consts:function(){let e,t,i,n,s,a,r;return e="Go to inbox",t="Disable sounds",i="Enable sounds",n="Minimise contact list",s="Un-minimise contact list",a=" Notifications ",r=" Chats ",[[4,"ngIf"],[3,"color","weight","flMarginRight",4,"ngIf"],[3,"color","weight","fontType",4,"ngIf"],["flTrackingSection","contact-list-header",3,"click"],["flTrackingLabel","GoToMessages","link","/messages",3,"underline"],["name","ui-inbox","label",e,"data-uitest-target","contactlist-inbox-button",1,"Icon",3,"color","size","hoverColor"],["flTrackingLabel","DisableSounds","class","Icon","name","ui-bell-v2","label",t,3,"color","size","hoverColor","click",4,"ngIf"],["flTrackingLabel","EnableSounds","class","Icon","name","ui-bell-silent-v2","label",i,3,"color","size","hoverColor","click",4,"ngIf"],["flTrackingLabel","Minimise","class","Icon","name","ui-minimise","label",n,"data-uitest-target","contactlist-minimise-button",3,"color","size","hoverColor","click",4,"ngIf"],["flTrackingLabel","Maximise","class","Icon","name","ui-maximise","label",s,3,"color","size","hoverColor","click",4,"ngIf"],[1,"DotAlert",3,"fontType"],[3,"color","weight","flMarginRight"],a,[3,"color","weight","fontType"],r,[3,"fontType","color"],["flTrackingLabel","DisableSounds","name","ui-bell-v2","label",t,1,"Icon",3,"color","size","hoverColor","click"],["flTrackingLabel","EnableSounds","name","ui-bell-silent-v2","label",i,1,"Icon",3,"color","size","hoverColor","click"],["flTrackingLabel","Minimise","name","ui-minimise","label",n,"data-uitest-target","contactlist-minimise-button",1,"Icon",3,"color","size","hoverColor","click"],["flTrackingLabel","Maximise","name","ui-maximise","label",s,1,"Icon",3,"color","size","hoverColor","click"]]},template:function(e,t){1&e&&(n.Yb(0,"fl-bit"),n.Zc(1,je,2,1,"ng-container",0),n.Zc(2,Ae,2,3,"fl-text",1),n.Zc(3,ke,2,3,"fl-text",2),n.Zc(4,Re,3,3,"ng-container",0),n.Xb(),n.Yb(5,"fl-bit",3),n.nc("click",function(e){return e.stopPropagation()}),n.Yb(6,"fl-link",4),n.Tb(7,"fl-icon",5),n.Xb(),n.Zc(8,Ee,1,3,"fl-icon",6),n.Zc(9,Fe,1,3,"fl-icon",7),n.Zc(10,Pe,1,3,"fl-icon",8),n.Zc(11,Ue,1,3,"fl-icon",9),n.Xb()),2&e&&(n.Gb(1),n.zc("ngIf",t.isMinimised&&t.unreadCount>0),n.Gb(1),n.zc("ngIf",!t.isCompact),n.Gb(1),n.zc("ngIf",t.isCompact),n.Gb(1),n.zc("ngIf",t.isMinimised&&t.unreadCount>0),n.Gb(2),n.zc("underline",t.LinkUnderline.NEVER),n.Gb(1),n.zc("color",t.isCompact?t.IconColor.LIGHT:t.IconColor.DARK)("size",t.IconSize.SMALL)("hoverColor",t.HoverColor.PRIMARY),n.Gb(1),n.zc("ngIf",null==t.soundSetting?null:t.soundSetting.enabled),n.Gb(1),n.zc("ngIf",!(null!=t.soundSetting&&t.soundSetting.enabled)),n.Gb(1),n.zc("ngIf",t.isCompact&&!t.isMinimised),n.Gb(1),n.zc("ngIf",t.isCompact&&t.isMinimised))},directives:[K.a,D.q,ze.a,ve.b,_.a,P.d,g.e,X.b],styles:["[_nghost-%COMP%]{font-size:14px;line-height:1.43;align-items:center;background:#fff;box-shadow:0 0 4px 0 rgba(0,0,0,.08),0 2px 4px 0 rgba(0,0,0,.12);color:#0e1724;display:flex;flex:0 0 auto;height:50px;justify-content:space-between;padding:24px 12px;position:relative;width:100%}.IsMinimised[_nghost-%COMP%]{height:30px}.IsCompact[_nghost-%COMP%]{background:#1073cb;border-radius:0 0 0 0;cursor:pointer;height:30px;padding:8px 12px}.Icon[_ngcontent-%COMP%]{cursor:pointer;padding:4px;-webkit-user-select:none;-ms-user-select:none;user-select:none}.DotAlert[_ngcontent-%COMP%]{background-color:#eb3730;border:0;border-radius:6px;display:inline-block;height:10px;width:10px}"],changeDetection:0}),e})();var _e=i("HLWz"),De=i("Te+H"),Ge=i("7ENy");const Ne=["scrollableContent"];function Be(e,t){if(1&e&&n.Tb(0,"app-notification-item",5),2&e){const e=n.rc().$implicit;n.zc("size","small")("event",e.entry)}}function Ye(e,t){if(1&e&&n.Tb(0,"app-project-item",6),2&e){const e=n.rc().$implicit;n.zc("size","small")("entry",e.entry)}}function Ze(e,t){if(1&e&&(n.Yb(0,"fl-bit"),n.Zc(1,Be,1,2,"app-notification-item",3),n.Zc(2,Ye,1,2,"app-project-item",4),n.Xb()),2&e){const e=t.$implicit;n.Gb(1),n.zc("ngIf","notification"===e.tag),n.Gb(1),n.zc("ngIf","project"===e.tag)}}let He=(()=>{class e{constructor(e){this.messagingChat=e,this.hasScrolledOnce=!1,this.hasNewContent=!1,this.prevHeight=0}ngOnInit(){this.messagingChat.disableToastNotifications()}ngOnDestroy(){this.messagingChat.enableToastNotifications()}ngOnChanges(e){this.hasNewContent=!0,!e.items||e.items.previousValue&&!this.isAtBottom()||setTimeout(()=>this.scrollToBottom(),0)}ngAfterViewChecked(){const e=this.scrollableContent.getScrollHeight();this.hasNewContent&&e!==this.prevHeight&&(this.hasNewContent=!1,!this.isAtBottom()&&this.hasScrolledOnce||(this.prevHeight=e,requestAnimationFrame(()=>this.scrollToBottom())))}scrollToBottom(){this.scrollableContent.scrollToBottom(),this.hasScrolledOnce=!0}isAtBottom(){return 0===this.itemComponents.length||this.scrollableContent.isAtBottom(this.itemComponents.last.nativeElement.clientHeight)}trackById(e,t){return t.entry.type+String(t.entry.id)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(d.d))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-ticker"]],viewQuery:function(e,t){if(1&e&&(n.id(Ne,1),n.id(K.a,1,n.l)),2&e){let e;n.Lc(e=n.oc())&&(t.scrollableContent=e.first),n.Lc(e=n.oc())&&(t.itemComponents=e)}},inputs:{items:"items"},features:[n.Eb],decls:3,vars:2,consts:[["flTrackingSection","ContactListTicker"],["scrollableContent",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"size","event",4,"ngIf"],[3,"size","entry",4,"ngIf"],[3,"size","event"],[3,"size","entry"]],template:function(e,t){1&e&&(n.Yb(0,"fl-scrollable-content",0,1),n.Zc(2,Ze,3,2,"fl-bit",2),n.Xb()),2&e&&(n.Gb(2),n.zc("ngForOf",t.items)("ngForTrackBy",t.trackById))},directives:[_e.a,ze.a,D.p,K.a,D.q,De.a,Ge.a],styles:["[_nghost-%COMP%]{background-color:#fff;font-size:13px}"],changeDetection:0}),e})();const Ve=function(e){return{FilterActive:e}};function We(e,t){if(1&e){const e=n.Zb();n.Yb(0,"span",6),n.nc("click",function(){return n.Pc(e),n.rc().setFilter("unread")}),n.cc(1,7),n.Xb()}if(2&e){const e=n.rc();n.zc("ngClass",n.Ec(2,Ve,"unread"===e.activeFilter)),n.Gb(1),n.gc(e.unreadCount),n.dc(1)}}function Ke(e,t){if(1&e){const e=n.Zb();n.Yb(0,"span",8),n.nc("click",function(){return n.Pc(e),n.rc().setFilter("support")}),n.cc(1,9),n.Xb()}if(2&e){const e=n.rc();n.zc("ngClass",n.Ec(1,Ve,"support"===e.activeFilter))}}let qe=(()=>{class e{constructor(){this.setActiveFilter=new n.n}setFilter(e){this.setActiveFilter.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-filter-switch"]],inputs:{activeFilter:"activeFilter",inboxMode:"inboxMode",unreadCount:"unreadCount"},outputs:{setActiveFilter:"setActiveFilter"},decls:6,vars:8,consts:function(){let e,t,i,n;return e=" Active ",t=" Archived ",i=" Unread (" + "\ufffd0\ufffd" + ") ",n=" Support ",[["flTrackingLabel","ActiveThreads","flTrackingSection","ThreadListFilter",1,"FilterItem",3,"ngClass","click"],e,["class","FilterItem","flTrackingLabel","UnreadThreads","flTrackingSection","ThreadListFilter",3,"ngClass","click",4,"ngIf"],["class","FilterItem","flTrackingLabel","SupportThreads","flTrackingSection","ThreadListFilter",3,"ngClass","click",4,"ngIf"],["flTrackingLabel","ArchivedThreads","flTrackingSection","ThreadListFilter",1,"FilterItem",3,"ngClass","click"],t,["flTrackingLabel","UnreadThreads","flTrackingSection","ThreadListFilter",1,"FilterItem",3,"ngClass","click"],i,["flTrackingLabel","SupportThreads","flTrackingSection","ThreadListFilter",1,"FilterItem",3,"ngClass","click"],n]},template:function(e,t){1&e&&(n.Yb(0,"span",0),n.nc("click",function(){return t.setFilter("active")}),n.cc(1,1),n.Xb(),n.Zc(2,We,2,4,"span",2),n.Zc(3,Ke,2,3,"span",3),n.Yb(4,"span",4),n.nc("click",function(){return t.setFilter("archived")}),n.cc(5,5),n.Xb()),2&e&&(n.zc("ngClass",n.Ec(4,Ve,"active"===t.activeFilter)),n.Gb(2),n.zc("ngIf",t.inboxMode),n.Gb(1),n.zc("ngIf",t.inboxMode),n.Gb(1),n.zc("ngClass",n.Ec(6,Ve,"archived"===t.activeFilter)))},directives:[_.a,ze.a,D.o,D.q],styles:["[_nghost-%COMP%]{font-size:13px;line-height:1.2;align-items:center;background:#f7f7f7;border-bottom:1px solid #dedede;color:#139ff0;cursor:pointer;display:flex;height:30px;justify-content:space-around;text-transform:uppercase;width:100%}[_nghost-%COMP%]   [_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.FilterActive[_ngcontent-%COMP%]{font-weight:700}.FilterItem[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0}),e})();var Je=i("jASZ"),Qe=i("565b"),et=i("JIr8");function tt(e,t){1&e&&(n.Wb(0),n.cc(1,2),n.Vb())}function it(e,t){1&e&&(n.Wb(0),n.cc(1,3),n.Vb())}function nt(e,t){1&e&&(n.Wb(0),n.cc(1,4),n.Vb())}function st(e,t){1&e&&(n.Wb(0),n.cc(1,5),n.Vb())}const at=function(e){return[e]};function rt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-bit",8),n.nc("click",function(){return n.Pc(e),n.rc(2).handleClick()}),n.Tb(1,"fl-user-avatar",9),n.sc(2,"isOnline"),n.sc(3,"flAsync"),n.Yb(4,"div",10),n.bd(5),n.Xb(),n.Xb()}if(2&e){const e=n.rc(2);n.Ac("flTrackingReferenceId",e.searchUser.id),n.Gb(1),n.zc("users",n.Ec(10,at,e.searchUser))("isOnline",e.searchUser?n.uc(2,5,e.searchUser,n.tc(3,8,e.onlineOfflineStatuses$)):void 0)("flMarginRight",e.Margin.XXXSMALL),n.Gb(4),n.dd(" ",e.searchUser.displayName," ")}}function ct(e,t){if(1&e&&(n.Wb(0),n.Yb(1,"fl-text"),n.cc(2,6),n.Xb(),n.Zc(3,rt,6,12,"fl-bit",7),n.Vb()),2&e){const e=n.rc();n.Gb(3),n.zc("ngIf",e.searchUser)}}let ot=(()=>{class e{constructor(){this.Margin=X.a,this.TextSize=g.f,this.FontType=g.b,this.searchStatus="idle",this.userSelected=new n.n,this.showSearchResults=!1}handleClick(){this.searchUser&&this.userSelected.emit(this.searchUser)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-user-search-result"]],inputs:{searchUser:"searchUser",onlineOfflineStatuses$:"onlineOfflineStatuses$",searchStatus:"searchStatus",showSearchResults:"showSearchResults"},outputs:{userSelected:"userSelected"},decls:6,vars:6,consts:function(){let e,t,i,n,s;return e=" Press Enter on the search bar to search for users by username. ",t=" Searching... ",i=" Something went wrong while searching for this user. Please try again. ",n=" No user found. ",s=" DIRECT CHAT ",[[1,"StatusMessage",3,"flMarginBottom"],[4,"ngIf"],e,t,i,n,s,["class","MainRow","flTrackingLabel","OpenSearchResult","flTrackingReferenceType","user_id",3,"flTrackingReferenceId","click",4,"ngIf"],["flTrackingLabel","OpenSearchResult","flTrackingReferenceType","user_id",1,"MainRow",3,"flTrackingReferenceId","click"],[3,"users","isOnline","flMarginRight"],["data-uitest-target","contactlist-user-item-title",1,"TextContainer"]]},template:function(e,t){1&e&&(n.Yb(0,"fl-bit",0),n.Zc(1,tt,2,0,"ng-container",1),n.Zc(2,it,2,0,"ng-container",1),n.Zc(3,nt,2,0,"ng-container",1),n.Zc(4,st,2,0,"ng-container",1),n.Xb(),n.Zc(5,ct,4,1,"ng-container",1)),2&e&&(n.zc("flMarginBottom",t.Margin.XXSMALL),n.Gb(1),n.zc("ngIf","idle"===t.searchStatus),n.Gb(1),n.zc("ngIf","searching"===t.searchStatus),n.Gb(1),n.zc("ngIf","error"===t.searchStatus),n.Gb(1),n.zc("ngIf","empty"===t.searchStatus),n.Gb(1),n.zc("ngIf",t.searchUser&&t.showSearchResults))},directives:[K.a,X.b,D.q,g.e,_.a,q.b],pipes:[ee.a,B.a],styles:["[_nghost-%COMP%]{border-bottom:1px solid #dedede;color:#0e1724;display:block;padding:8px}.MainRow[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;flex-direction:row;height:48px;padding-right:8px}.StatusMessage[_ngcontent-%COMP%]{font-size:13px;line-height:1.2}.TextContainer[_ngcontent-%COMP%]{font-size:14px;line-height:1.43;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;flex-direction:column;min-width:0;padding-right:4px}"],changeDetection:0}),e})();function lt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-thread-set",2),n.nc("selectThread",function(t){return n.Pc(e),n.rc().handleThreadSelected(t)}),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.Xb()}if(2&e){const e=n.rc();n.zc("threadSet",n.tc(1,4,e.candidateUserThreadSearch$))("users",n.tc(2,6,e.users$))("grayBackground",e.grayBackground)("onlineOfflineStatuses$",e.onlineOfflineStatuses$)}}const ht=function(e){return{GrayBackground:e}};let dt=(()=>{class e{constructor(e){this.datastore=e,this.showSearchResults=!1,this.grayBackground=!0,this.userSelected=new n.n,this.threadSelected=new n.n,this.searchStatus="idle"}ngOnInit(){const e=this.datastore.collection("users",e=>e.limit(1).where("username","equalsIgnoreCase",this.searchUsernameString$.pipe(Object(k.a)(()=>{this.searchStatus="searching"})))).valueChanges().pipe(Object(et.a)((e,t)=>(this.searchStatus="error",t)),Object($.a)(1),Object(x.a)());this.userFound$=e.pipe(Object(k.a)(e=>{this.searchStatus=e.length>0?"idle":"empty"}),Object(w.a)(e=>e.length>0),Object(v.a)(),Object(L.a)(!1)),this.searchUser$=e.pipe(Object(z.a)(e=>1===e.length),Object(w.a)(([e])=>e)),this.candidateUserThreadSearch$=O.a([]).pipe(Object(w.a)(e=>({title:"Support Session Chats",threads:e,index:Te.SUPPORT}))),this.users$=this.datastore.collection("users",this.candidateUserThreadSearch$.pipe(Object(w.a)(e=>e.threads.map(e=>e.members).reduce((e,t)=>[...e,...t],[])))).valueChanges().pipe(Object(w.a)(e=>{const t={};return e.forEach(e=>t[e.id]=e),t}))}handleSearchUserSelected(e){this.userSelected.emit(e)}handleThreadSelected(e){this.threadSelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(ye.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-recruiter-chat-search-result"]],inputs:{searchUsernameString$:"searchUsernameString$",onlineOfflineStatuses$:"onlineOfflineStatuses$",showSearchResults:"showSearchResults",grayBackground:"grayBackground"},outputs:{userSelected:"userSelected",threadSelected:"threadSelected"},decls:6,vars:15,consts:[["flTrackingSection","MessagingRecruiterUserSearch",3,"ngClass","searchUser","searchStatus","showSearchResults","userSelected"],[3,"threadSet","users","grayBackground","onlineOfflineStatuses$","selectThread",4,"ngIf"],[3,"threadSet","users","grayBackground","onlineOfflineStatuses$","selectThread"]],template:function(e,t){if(1&e&&(n.Yb(0,"app-user-search-result",0),n.nc("userSelected",function(e){return t.handleSearchUserSelected(e)}),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.Xb(),n.Zc(3,lt,3,8,"app-thread-set",1),n.sc(4,"flAsync"),n.sc(5,"flAsync")),2&e){let e=null;n.zc("ngClass",n.Ec(13,ht,t.grayBackground))("searchUser",n.tc(1,5,t.searchUser$))("searchStatus",t.searchStatus)("showSearchResults",t.showSearchResults&&n.tc(2,7,t.userFound$)),n.Gb(3),n.zc("ngIf",t.showSearchResults&&n.tc(4,9,t.userFound$)&&(null==(e=n.tc(5,11,t.candidateUserThreadSearch$))?null:e.threads.length)>0)}},directives:[ot,ze.a,D.o,D.q,Me],pipes:[B.a],styles:["[_nghost-%COMP%]{border-bottom:1px solid #dedede;color:#f7f7f7;display:block;flex:none;overflow-y:hidden;width:100%}.GrayBackground[_ngcontent-%COMP%]{background:#f0f0f0}"],changeDetection:0}),e})();function ut(e,t){1&e&&n.Tb(0,"fl-spinner",8),2&e&&n.zc("overlay",!0)}const bt=function(e){return{GrayBackground:e}};function gt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-recruiter-chat-search-result",9),n.nc("userSelected",function(t){return n.Pc(e),n.rc().handleSearchUserSelected(t)})("threadSelected",function(t){return n.Pc(e),n.rc().handleThreadSelected(t)}),n.Xb()}if(2&e){const e=n.rc();n.zc("ngClass",n.Ec(5,bt,e.grayBackground))("grayBackground",e.grayBackground)("showSearchResults",e.showRecruiterSearchResults)("searchUsernameString$",e.recruiterUserSearchUsername$)("onlineOfflineStatuses$",e.onlineOfflineStatuses$)}}function ft(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-thread-set",11),n.nc("selectThread",function(t){return n.Pc(e),n.rc(2).handleThreadSelected(t)}),n.Xb()}if(2&e){const e=t.$implicit,i=n.rc(2);n.zc("grayBackground",i.grayBackground)("contests",i.contests)("projects",i.projects)("threadSet",e)("users",i.users)("onlineOfflineStatuses$",i.onlineOfflineStatuses$)("selectedThreadId",i.selectedThreadId)("inboxMode",i.inboxMode)}}function pt(e,t){if(1&e&&(n.Wb(0),n.Zc(1,ft,1,8,"app-thread-set",10),n.Vb()),2&e){const e=n.rc();n.Gb(1),n.zc("ngForOf",e.threadSets)("ngForTrackBy",e.identifyThreadSet)}}function St(e,t){if(1&e&&(n.Yb(0,"fl-bit",12),n.Yb(1,"fl-text",13),n.cc(2,14),n.Xb(),n.Xb()),2&e){const e=n.rc();n.Gb(1),n.zc("size",e.TextSize.XXSMALL)}}function mt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-link",15),n.nc("click",function(){return n.Pc(e),n.rc().handleLoadThreads()}),n.cc(1,16),n.Xb()}if(2&e){const e=n.rc();n.zc("flMarginBottom",e.Margin.XXSMALL)}}function Tt(e,t){if(1&e&&n.Tb(0,"fl-spinner",17),2&e){const e=n.rc();n.zc("size",e.SpinnerSize.SMALL)}}let Ct=(()=>{class e{constructor(){this.TextSize=g.f,this.Margin=X.a,this.SpinnerSize=Je.d,this.grayBackground=!1,this.showLoadingSpinner=!1,this.showLoadingMoreSpinner=!1,this.isRecruiter=!1,this.showRecruiterSearchResults=!1,this.searchUserSelected=new n.n,this.selectThread=new n.n,this.loadMoreThreads=new n.n}ngOnChanges(){this.threadSets&&(this.setsHaveThreads=!!this.threadSets.find(e=>e.threads.length>0))}handleThreadSelected(e){this.selectThread.emit(e)}identifyThreadSet(e,t){return t.title}handleLoadThreads(){this.loadMoreThreads.emit()}handleSearchUserSelected(e){this.searchUserSelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-thread-list"]],hostVars:2,hostBindings:function(e,t){2&e&&n.Kb("IsCompact",t.isCompact)},inputs:{isCompact:"isCompact",grayBackground:"grayBackground",showLoadingSpinner:"showLoadingSpinner",searchUser:"searchUser",searchStatus:"searchStatus",threadSets:"threadSets",users:"users",onlineOfflineStatuses$:"onlineOfflineStatuses$",projects:"projects",contests:"contests",canLoadMore:"canLoadMore",showLoadingMoreSpinner:"showLoadingMoreSpinner",isRecruiter:"isRecruiter",showRecruiterSearchResults:"showRecruiterSearchResults",recruiterUserSearchUsername$:"recruiterUserSearchUsername$",inboxMode:"inboxMode",selectedThreadId:"selectedThreadId"},outputs:{searchUserSelected:"searchUserSelected",selectThread:"selectThread",loadMoreThreads:"loadMoreThreads"},features:[n.Eb],decls:8,vars:6,consts:function(){let e,t;return e=" No messages yet. ",t=" Load more... ",[["flTrackingLabel","MessagingThreadListInitialisationSpinner",3,"overlay",4,"ngIf"],[1,"ThreadListContent"],[3,"ngClass","grayBackground","showSearchResults","searchUsernameString$","onlineOfflineStatuses$","userSelected","threadSelected",4,"ngIf"],[4,"ngIf"],["class","EmptyThreadSet",4,"ngIf"],[1,"ThreadsLoad"],["flTrackingLabel","LoadMoreThreads","flTrackingSection","ThreadList",3,"flMarginBottom","click",4,"ngIf"],["flTrackingLabel","MessagingThreadListLoadMoreSpinner",3,"size",4,"ngIf"],["flTrackingLabel","MessagingThreadListInitialisationSpinner",3,"overlay"],[3,"ngClass","grayBackground","showSearchResults","searchUsernameString$","onlineOfflineStatuses$","userSelected","threadSelected"],["flTrackingSection","contact-list-thread-set","data-uitest-target","contactlist-thread-item",3,"grayBackground","contests","projects","threadSet","users","onlineOfflineStatuses$","selectedThreadId","inboxMode","selectThread",4,"ngFor","ngForOf","ngForTrackBy"],["flTrackingSection","contact-list-thread-set","data-uitest-target","contactlist-thread-item",3,"grayBackground","contests","projects","threadSet","users","onlineOfflineStatuses$","selectedThreadId","inboxMode","selectThread"],[1,"EmptyThreadSet"],[3,"size"],e,["flTrackingLabel","LoadMoreThreads","flTrackingSection","ThreadList",3,"flMarginBottom","click"],t,["flTrackingLabel","MessagingThreadListLoadMoreSpinner",3,"size"]]},template:function(e,t){1&e&&(n.Zc(0,ut,1,1,"fl-spinner",0),n.Yb(1,"fl-bit",1),n.Zc(2,gt,1,7,"app-recruiter-chat-search-result",2),n.Zc(3,pt,2,2,"ng-container",3),n.Zc(4,St,3,1,"fl-bit",4),n.Yb(5,"fl-bit",5),n.Zc(6,mt,2,1,"fl-link",6),n.Zc(7,Tt,1,1,"fl-spinner",7),n.Xb(),n.Xb()),2&e&&(n.zc("ngIf",t.showLoadingSpinner),n.Gb(2),n.zc("ngIf",t.isRecruiter),n.Gb(1),n.zc("ngIf",t.projects&&t.contests&&t.users&&t.threadSets),n.Gb(1),n.zc("ngIf",!t.setsHaveThreads),n.Gb(2),n.zc("ngIf",!t.showLoadingMoreSpinner&&t.canLoadMore&&t.setsHaveThreads),n.Gb(1),n.zc("ngIf",t.showLoadingMoreSpinner))},directives:[D.q,K.a,Je.c,Qe.a,_.a,dt,D.o,D.p,Me,ze.a,g.e,ve.b,X.b],styles:["[_nghost-%COMP%]{background:#f0f0f0;color:#f7f7f7;overflow-y:hidden;position:relative;width:100%}.IsCompact[_nghost-%COMP%]{background:#fff}@media (min-width:768px){.ThreadListContent[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0;flex:1 0 100%;overflow-y:auto}}.ThreadsLoad[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding-top:16px}.InboxMode[_ngcontent-%COMP%]{background:#f0f0f0}.EmptyThreadSet[_ngcontent-%COMP%]{padding-left:8px;padding-top:16px}"],changeDetection:0}),e})();var Mt=i("Krui");function It(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-header",10),n.nc("minimise",function(){return n.Pc(e),n.rc().toggleMinimise()})("setChatSoundSetting",function(t){return n.Pc(e),n.rc().setChatSoundSetting(t)}),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.Xb()}if(2&e){const e=n.rc();n.zc("soundSetting",n.tc(1,4,e.chatSoundSetting$))("isMinimised",e.isMinimised&&e.isCompact)("isCompact",e.isCompact)("unreadCount",n.tc(2,6,e.unreadCount$))}}function yt(e,t){if(1&e&&(n.Tb(0,"app-ticker",11),n.sc(1,"flAsync")),2&e){const e=n.rc();n.zc("items",n.tc(1,1,e.tickerItem$))}}function Ot(e,t){1&e&&n.Ub(0)}function $t(e,t){1&e&&n.Ub(0)}function xt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-search",14),n.nc("threadSearchSelected",function(){return n.Pc(e),n.rc(2).handleThreadSearchSelected()}),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.Xb()}if(2&e){const e=n.rc(2);n.zc("threadSearchEnabled",e.inboxMode)("inputControl",e.searchFormControl)("searchMode",n.tc(1,4,e.threadSearchMode$))("showThreadSearchOption",n.tc(2,6,e.showThreadSearchOption$))}}const wt=function(e){return{InboxList:e}};function Lt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-filter-switch",15),n.nc("setActiveFilter",function(t){return n.Pc(e),n.rc(2).handleFilterSwitched(t)}),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.Xb()}if(2&e){const e=n.rc(2);n.zc("ngClass",n.Ec(8,wt,e.inboxMode))("inboxMode",e.inboxMode)("unreadCount",n.tc(1,4,e.unreadCount$))("activeFilter",n.tc(2,6,e.activeFilter$))}}function vt(e,t){if(1&e&&(n.Zc(0,xt,3,8,"app-search",12),n.Zc(1,Lt,3,10,"app-filter-switch",13),n.sc(2,"flAsync")),2&e){const e=n.rc();n.zc("ngIf",e.inboxMode),n.Gb(1),n.zc("ngIf",n.tc(2,2,e.showFilterSwitch$))}}function zt(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-thread-list",16),n.nc("selectThread",function(t){return n.Pc(e),n.rc().handleThreadSelected(t)})("searchUserSelected",function(t){return n.Pc(e),n.rc().handleSearchUserSelected(t)})("loadMoreThreads",function(){return n.Pc(e),n.rc().handleLoadThreads()}),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.sc(3,"flAsync"),n.sc(4,"flAsync"),n.sc(5,"flAsync"),n.sc(6,"flAsync"),n.sc(7,"flAsync"),n.Xb()}if(2&e){const e=n.rc();n.zc("ngClass",n.Ec(30,wt,e.inboxMode))("isRecruiter",e.isRecruiter())("showLoadingSpinner",n.tc(1,16,e.showThreadListSpinner$))("showLoadingMoreSpinner",e.showLoadingMoreSpinner)("isCompact",e.isCompact)("grayBackground",!e.inboxMode&&!e.isCompact)("threadSets",n.tc(2,18,e.threadSets$))("users",n.tc(3,20,e.users$))("projects",n.tc(4,22,e.projects$))("contests",n.tc(5,24,e.contests$))("onlineOfflineStatuses$",e.onlineOfflineStatuses$)("recruiterUserSearchUsername$",e.recruiterUserSearchUsername$)("showRecruiterSearchResults",n.tc(6,26,e.recruiterSearchModeActive$))("canLoadMore",n.tc(7,28,e.canLoadMore$))("selectedThreadId",e.selectedThreadId)("inboxMode",e.inboxMode)}}function jt(e,t){if(1&e&&(n.Yb(0,"fl-bit",17),n.Tb(1,"fl-picture",18),n.Yb(2,"fl-text",19),n.cc(3,20),n.Xb(),n.Xb()),2&e){const e=n.rc();n.Gb(1),n.zc("src","messaging/magnifying-glass.svg"),n.Gb(1),n.zc("size",e.TextSize.SMALL)("color",e.FontColor.MID)}}function At(e,t){if(1&e){const e=n.Zb();n.Yb(0,"app-search",21),n.nc("keyEnter",function(){return n.Pc(e),n.rc().handleSearchKeyEnter()}),n.Xb()}if(2&e){const e=n.rc();n.zc("threadSearchEnabled",e.inboxMode)("inputControl",e.searchFormControl)}}let kt=(()=>{class e{constructor(e,t,i,a,r,c,o,l,d){this.auth=e,this.changeDetectorRef=t,this.datastore=i,this.modalService=a,this.router=r,this.timeUtils=c,this.videochat=o,this.webSocketService=l,this.messagingChat=d,this.FontColor=b.a,this.TextSize=g.f,this.inboxMode=!1,this.makingCall=new n.n,this.minimise=new n.n,this.isCompact=!1,this.isMinimised=!1,this.isHidden=!this.inboxMode,this.userId$=this.auth.getUserId(),this.activeFilterSubject$=new C.a("active"),this.searchFormControl=new s.f,this.threadSearchSelectedSubject$=new C.a(!1),this.threadSearchSelected$=this.threadSearchSelectedSubject$.asObservable().pipe(Object($.a)(1),Object(x.a)()),this.searchKeyEnterSubject$=new M.a,this.searchKeyEnter$=this.searchKeyEnterSubject$.asObservable().pipe(Object($.a)(1),Object(x.a)()),this.searchStatus="idle",this.autoOpenedThreads={},this.defaultThreadLimit=T.a,this.limitIncreaseStep=100,this.maxLimit=5e3,this.currentThreadsLimit=this.defaultThreadLimit,this.currentUnreadThreadsLimit=this.defaultThreadLimit,this.threadsLimitSubject$=new C.a(this.currentThreadsLimit),this.unreadThreadsLimitSubject$=new C.a(this.currentUnreadThreadsLimit),this.showLoadingMoreSpinner=!1,this.notificationSettingsCollection=this.datastore.collection("notificationsPreferences"),this.notifications$=I.a([this.datastore.collection("notifications",e=>e.limit(100)).valueChanges().pipe(Object(w.a)(e=>e.filter(h.b))),this.userId$]).pipe(Object(w.a)(([e,t])=>e.filter(e=>!("userId"in e.data&&Object(f.s)(e.data.userId)===Object(f.s)(t)))),Object(w.a)(e=>e.map(e=>({entry:e,tag:"notification",time:e.time})))),this.jobIdsToNotify$=this.notificationSettingsCollection.valueChanges().pipe(Object(w.a)(e=>e.filter(e=>e.enabled&&e.channel.startsWith("job_")&&"live"===e.notificationType).map(e=>{const t=e.channel.split("_");if(t.length>=2)return Object(f.s)(t[1])}).filter(f.h))),this.failingProjectsCollection=this.datastore.collection("projectFeedFailingProjects",e=>e.where("jobIds","intersects",this.jobIdsToNotify$).limit(100)),this.failingContestsCollection=this.datastore.collection("projectFeedFailingContests",e=>e.where("jobIds","intersects",this.jobIdsToNotify$).limit(100)),this.projectFeed$=I.a([this.datastore.collection("projectFeed",e=>e.where("jobIds","intersects",this.jobIdsToNotify$).limit(100)).valueChanges(),this.failingProjectsCollection.valueChanges(),this.failingContestsCollection.valueChanges()]).pipe(Object(w.a)(([e,t,i])=>[...e,...t,...i].map(e=>({entry:e,tag:"project",time:e.time})))),this.tickerItem$=I.a([this.notifications$,this.projectFeed$]).pipe(Object(w.a)(([e,t])=>[...e,...t].sort((e,t)=>e.time-t.time).slice(-100)),Object($.a)(1),Object(x.a)()),this.chatSoundSetting$=this.notificationSettingsCollection.valueChanges().pipe(Object(w.a)(e=>{const t=e.filter(e=>"messages"===e.notificationType&&"chat_sound"===e.channel);return t.length>0?t[0]:void 0}))}ngOnInit(){this.messagingChat.cleanStoredDraftMessages(),this.searchText$=this.searchFormControl.valueChanges.pipe(Object(L.a)(""),Object($.a)(1),Object(x.a)(),Object(v.a)()),this.threadSearchMode$=y.a(this.threadSearchSelected$.pipe(Object(w.a)(e=>e?H.THREAD:H.USER)),this.searchFormControl.valueChanges.pipe(Object(z.a)(e=>""===e.trim()),Object(j.a)(H.USER))).pipe(Object($.a)(1),Object(x.a)()),this.showThreadSearchOption$=I.a([this.threadSearchMode$,this.searchFormControl.valueChanges.pipe(Object(L.a)(""),Object(A.a)(250))]).pipe(Object(w.a)(([e,t])=>e===H.USER&&""!==t.trim()),Object(L.a)(!1));const e=I.a([this.searchText$,this.threadSearchMode$]).pipe(Object(w.a)(([e,t])=>{if(t!==H.USER&&""!==e.trim())return e.trim()}),Object(z.a)(f.h),Object(w.a)(e=>({searchTerm:e})));this.searchThreads$=this.datastore.collection("searchThreads",t=>t.search(e.pipe(Object(A.a)(500))).limit(100)).valueChanges().pipe(Object(r.a)()),this.showThreadListSpinner$=y.a(e.pipe(Object(j.a)(!0)),this.searchThreads$.pipe(Object(j.a)(!1))).pipe(Object(v.a)(),Object(L.a)(!1),Object($.a)(1),Object(x.a)()),this.showEmptySearchResult$=I.a([this.threadSearchMode$,this.showThreadListSpinner$,this.searchThreads$]).pipe(Object(w.a)(([e,t,i])=>e===H.THREAD&&!t&&0===i.length),Object(L.a)(!1),Object($.a)(1),Object(x.a)()),this.recruiterUserSearchUsername$=this.searchKeyEnter$.pipe(Object(z.a)(()=>this.isRecruiter()),Object(w.a)(()=>this.searchFormControl.value),Object(z.a)(e=>void 0!==e&&""!==e)),this.resetRecruiterSearch$=this.searchText$.pipe(Object(v.a)(),Object(j.a)(!0)),this.recruiterSearchModeActive$=y.a(this.searchKeyEnter$.pipe(Object(j.a)(!0)),this.searchText$.pipe(Object(j.a)(!1))).pipe(Object(v.a)(),Object($.a)(1),Object(x.a)()),this.activeFilter$=this.activeFilterSubject$.asObservable().pipe(Object(v.a)()),this.threads$=this.datastore.collection("threads",e=>e.limit(this.threadsLimitSubject$.pipe(Object(k.a)(()=>this.showLoadingMoreSpinner=!0)))).valueChanges().pipe(Object(k.a)(()=>this.showLoadingMoreSpinner=!1)),this.inboxMode?(this.unreadThreads$=this.datastore.collection("threads",e=>e.where("isRead","==",!1).limit(this.unreadThreadsLimitSubject$.pipe(Object(k.a)(()=>this.showLoadingMoreSpinner=!0)))).valueChanges().pipe(Object(k.a)(()=>this.showLoadingMoreSpinner=!1)),this.allThreads$=I.a([this.threads$,this.unreadThreads$]).pipe(Object(w.a)(([e,t])=>Object(c.o)([...e,...t],(e,t)=>e.id===t.id)))):(this.unreadThreads$=O.a([]),this.allThreads$=this.threads$),this.unreadCount$=this.allThreads$.pipe(Object(w.a)(e=>e.map(e=>e.messageUnreadCount).reduce((e,t)=>e+t,0))),this.threadSubscription=this.allThreads$.subscribe(e=>{const t=this.isHidden;this.isHidden=!(this.inboxMode||e&&0!==e.length),this.isHidden!==t&&this.changeDetectorRef.markForCheck()}),this.sortedThreads$=I.a([this.activeFilterSubject$,this.threads$,this.unreadThreads$]).pipe(Object(w.a)(([e,t,i])=>"unread"===e?i:t),Object(w.a)(e=>[...e].sort((e,t)=>t.timeUpdated-e.timeUpdated)),Object($.a)(1),Object(x.a)()),this.emptyThreadNavigateSubscription=I.a([this.messagingChat.getInboxViewState(),this.router.events.pipe(Object(z.a)(e=>e instanceof a.b),Object(j.a)(!0),Object(L.a)(!0)),this.sortedThreads$]).subscribe(([e,t,i])=>{if(e===d.c.PAGE)return;const n=this.router.parseUrl(this.router.url),s=n.root.children[a.d];if(i.length>0&&s&&1===s.segments.length&&"messages"===s.segments[0].path){const e=n.fragment&&n.fragment.includes("thread/")?n.fragment.split("thread/")[1]:i[0].id;this.router.navigate([`/messages/thread/${e}`],{queryParams:{},replaceUrl:!0})}});const t=I.a([this.allThreads$,this.searchThreads$]).pipe(Object(w.a)(([e,t])=>[...e,...t].map(e=>e.members).reduce((e,t)=>[...e,...t],[])),Object(w.a)(e=>Array.from(new Set(e))));this.users$=this.datastore.collection("users",t).valueChanges().pipe(Object(r.a)(),Object(o.a)(),Object($.a)(1),Object(x.a)()),this.onlineOfflineStatuses$=this.datastore.collection("onlineOffline",t).valueChanges();const i=I.a([this.allThreads$,this.searchThreads$]).pipe(Object(w.a)(([e,t])=>Object(m.g)([...e,...t],S.ContextTypeApi.PROJECT)));this.projects$=this.datastore.collection("threadProjects",i).valueChanges().pipe(Object(w.a)(e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t}),{})),Object(L.a)({}),Object($.a)(1),Object(x.a)());const n=I.a([this.allThreads$,this.searchThreads$]).pipe(Object(w.a)(([e,t])=>Object(m.g)([...e,...t],S.ContextTypeApi.CONTEST)));this.contests$=this.datastore.collection("contests",n).valueChanges().pipe(Object(w.a)(e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t}),{})),Object(L.a)({}),Object($.a)(1),Object(x.a)()),this.showFilterSwitch$=this.threadSearchMode$.pipe(Object(w.a)(e=>e!==H.THREAD),Object(v.a)(),Object(L.a)(!0),Object($.a)(1),Object(x.a)()),this.teams$=this.datastore.collection("teams",e=>e.where("members","includes",this.userId$.pipe(Object(w.a)(e=>Object(f.s)(e))))).valueChanges().pipe(Object(o.a)(),Object(L.a)({})),this.threadSets$=Object(l.a)([this.sortedThreads$,this.searchText$,this.activeFilterSubject$,this.users$,this.contests$,this.projects$,this.searchThreads$,this.threadSearchMode$,this.teams$]).pipe(Object(w.a)(([e,t,i,n,s,a,r,c,o])=>{const l={[me.SEARCH]:{title:"Search Results",threads:[],index:Te.SEARCH},[me.ACTIVE]:{title:void 0,threads:[],index:Te.ACTIVE},[me.OTHER]:{title:"Other chats",threads:[],index:Te.OTHER}},h=Object.values(o).reduce((e,t)=>Object.assign(Object.assign({},e),{[`team_${t.id.toString()}`]:{title:t.name,threads:[],index:Te.TEAMS}}),l);return c===H.THREAD&&""!==t.trim()?h[me.SEARCH].threads=[...r]:e.filter(e=>{switch(i){case"active":return"archived"!==e.folder;case"unread":return!e.isRead;case"support":return"archived"!==e.folder&&"admin_preferred_chat"===e.threadType&&"support_session"===e.context.type;case"archived":return"archived"===e.folder;default:return Object(f.b)(i)}}).filter(e=>this.isSearchMatch(e,t,n)).forEach(e=>{const t=me.ACTIVE;h[t].threads=[...h[t].threads,e]}),Object.values(h).sort((e,t)=>e.index-t.index)}),Object($.a)(1),Object(x.a)()),this.canLoadMore$=I.a([this.sortedThreads$,this.threadSearchMode$,this.activeFilterSubject$]).pipe(Object(w.a)(([e,t,i])=>t===H.USER&&("unread"===i?this.currentUnreadThreadsLimit<this.maxLimit&&e.length>=this.currentUnreadThreadsLimit:this.currentThreadsLimit<this.maxLimit&&e.length>=this.currentThreadsLimit)));const s=Object(F.a)(this.webSocketService,this.auth.authState$,this.inCall$.pipe(Object(v.a)()));this.callAlertSubscription=s.subscribe(e=>{void 0!==e&&(e.type!==p.a.NONE?this.popCallAlertModal(e):(this.makingCall.next(!!e.makingCall),this.modalService.close()))}),this.startChatSubscription=I.a([this.allThreads$.pipe(Object(R.a)(this.timeUtils.rxTimer(3e4))),O.a(Date.now())]).subscribe(([e,t])=>e.map(e=>{!this.autoOpenedThreads[e.id]&&e.messageUnreadCount>0&&e.message&&t-e.message.timeCreated<3e4&&(this.autoOpenedThreads[e.id]=!0,this.messagingChat.startChat({userIds:e.members,threadType:e.threadType,origin:"contactList",context:e.context,threadId:e.id,focus:!1,doNotRedirect:!0}))}))}ngOnDestroy(){this.threadSubscription&&this.threadSubscription.unsubscribe(),this.callAlertSubscription&&this.callAlertSubscription.unsubscribe(),this.emptyThreadNavigateSubscription&&this.emptyThreadNavigateSubscription.unsubscribe(),this.startChatSubscription&&this.startChatSubscription.unsubscribe()}toggleMinimise(){this.minimise.emit(!this.isMinimised)}setChatSoundSetting({setting:e,enabled:t}){this.notificationSettingsCollection.set("chat_sound",Object.assign(Object.assign({},e),{enabled:t}))}handleSearchKeyEnter(){this.searchKeyEnterSubject$.next(!0)}handleThreadSelected(e){this.inboxMode?this.router.navigate([`/messages/thread/${e.id}`],{queryParams:{}}):this.messagingChat.startChat({userIds:e.members,threadType:e.threadType,origin:"ng-contact-list",context:e.context,threadId:e.id,focus:!0})}handleThreadSearchSelected(){this.threadSearchSelectedSubject$.next(!0)}isRecruiter(){return Object(m.f)(this.currentUser)}handleSearchUserSelected(e){this.messagingChat.startChat({userIds:[e.id],threadType:S.ThreadTypeApi.ADMIN_PREFERRED_CHAT,origin:"ng-contact-list-user-search",context:{type:S.ContextTypeApi.SUPPORT_CHAT,id:e.id}})}handleFilterSwitched(e){this.activeFilterSubject$.next(e)}isSearchMatch(e,t,i){return this.getUsersForSearch(e,i).toLowerCase().includes(t.toLowerCase())}getUsersForSearch(e,t){return e.otherMembers.filter(e=>Boolean(e&&t[e])).map(e=>[t[e].displayName,t[e].username].join(", ")).join(", ")}popCallAlertModal(e){this.modalService.open("CallAlertModal",{inputs:{otherUserIds:e.otherMembers,callType:e.type,threadId:e.threadId,recorded:e.recorded},size:u.a.SMALL}).afterClosed().pipe(Object(E.a)(this.inCall$)).toPromise().then(([t,i])=>{i||(t?(this.videochat.openCallWindow({action:e.type,threadId:e.threadId,accepting:!0}),this.videochat.notifyAction("accept",e.threadId)):this.videochat.notifyAction("reject",e.threadId))})}handleLoadThreads(){"unread"===this.activeFilterSubject$.getValue()?(this.currentUnreadThreadsLimit=Math.min(this.currentUnreadThreadsLimit+this.limitIncreaseStep,this.maxLimit),this.unreadThreadsLimitSubject$.next(this.currentUnreadThreadsLimit)):(this.currentThreadsLimit=Math.min(this.currentThreadsLimit+this.limitIncreaseStep,this.maxLimit),this.threadsLimitSubject$.next(this.currentThreadsLimit))}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(Ie.a),n.Sb(n.h),n.Sb(ye.a),n.Sb($e.b),n.Sb(a.e),n.Sb(xe.a),n.Sb(p.b),n.Sb(Oe.a),n.Sb(d.d))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-messaging-contacts"]],hostVars:8,hostBindings:function(e,t){2&e&&n.Kb("IsInbox",t.inboxMode)("IsCompact",t.isCompact)("IsMinimised",t.isMinimised)("IsHidden",t.isHidden)},inputs:{currentUser:"currentUser",inCall$:"inCall$",inboxMode:"inboxMode",isCompact:"isCompact",isMinimised:"isMinimised",selectedThreadId:"selectedThreadId"},outputs:{makingCall:"makingCall",minimise:"minimise"},decls:15,vars:16,consts:function(){let e,t;return e="No messages found",t=" No conversations matched your search ",[[3,"soundSetting","isMinimised","isCompact","unreadCount","minimise","setChatSoundSetting",4,"ngIf"],["class","Ticker",3,"items",4,"ngIf"],[3,"flShowMobile"],[3,"flSticky"],[4,"ngTemplateOutlet"],[3,"flHideMobile"],["searchFilter",""],["class","ThreadList",3,"ngClass","isRecruiter","showLoadingSpinner","showLoadingMoreSpinner","isCompact","grayBackground","threadSets","users","projects","contests","onlineOfflineStatuses$","recruiterUserSearchUsername$","showRecruiterSearchResults","canLoadMore","selectedThreadId","inboxMode","selectThread","searchUserSelected","loadMoreThreads",4,"ngIf"],["class","SearchEmpty",4,"ngIf"],["class","SearchBar","flTrackingSection","contact-list-search",3,"threadSearchEnabled","inputControl","keyEnter",4,"ngIf"],[3,"soundSetting","isMinimised","isCompact","unreadCount","minimise","setChatSoundSetting"],[1,"Ticker",3,"items"],["class","SearchBar","flTrackingSection","contact-list-search",3,"threadSearchEnabled","inputControl","searchMode","showThreadSearchOption","threadSearchSelected",4,"ngIf"],["class","FilterSwitch","data-uitest-target","contactlist-filter-switch",3,"ngClass","inboxMode","unreadCount","activeFilter","setActiveFilter",4,"ngIf"],["flTrackingSection","contact-list-search",1,"SearchBar",3,"threadSearchEnabled","inputControl","searchMode","showThreadSearchOption","threadSearchSelected"],["data-uitest-target","contactlist-filter-switch",1,"FilterSwitch",3,"ngClass","inboxMode","unreadCount","activeFilter","setActiveFilter"],[1,"ThreadList",3,"ngClass","isRecruiter","showLoadingSpinner","showLoadingMoreSpinner","isCompact","grayBackground","threadSets","users","projects","contests","onlineOfflineStatuses$","recruiterUserSearchUsername$","showRecruiterSearchResults","canLoadMore","selectedThreadId","inboxMode","selectThread","searchUserSelected","loadMoreThreads"],[1,"SearchEmpty"],["alt",e,3,"src"],[3,"size","color"],t,["flTrackingSection","contact-list-search",1,"SearchBar",3,"threadSearchEnabled","inputControl","keyEnter"]]},template:function(e,t){if(1&e&&(n.Zc(0,It,3,8,"app-header",0),n.Zc(1,yt,2,3,"app-ticker",1),n.sc(2,"flAsync"),n.Yb(3,"fl-bit",2),n.Yb(4,"fl-bit",3),n.Zc(5,Ot,1,0,"ng-container",4),n.Xb(),n.Xb(),n.Yb(6,"fl-bit",5),n.Zc(7,$t,1,0,"ng-container",4),n.Xb(),n.Zc(8,vt,3,4,"ng-template",null,6,n.ad),n.Zc(10,zt,8,32,"app-thread-list",7),n.sc(11,"flAsync"),n.Zc(12,jt,4,3,"fl-bit",8),n.sc(13,"flAsync"),n.Zc(14,At,1,2,"app-search",9)),2&e){const e=n.Mc(9);n.zc("ngIf",!t.inboxMode),n.Gb(1),n.zc("ngIf",!t.isHidden&&!t.inboxMode&&!1===t.isCompact&&n.tc(2,10,t.tickerItem$)),n.Gb(2),n.zc("flShowMobile",!0),n.Gb(1),n.zc("flSticky",!0),n.Gb(1),n.zc("ngTemplateOutlet",e),n.Gb(1),n.zc("flHideMobile",!0),n.Gb(1),n.zc("ngTemplateOutlet",e),n.Gb(3),n.zc("ngIf",!1===n.tc(11,12,t.showEmptySearchResult$)),n.Gb(2),n.zc("ngIf",n.tc(13,14,t.showEmptySearchResult$)),n.Gb(2),n.zc("ngIf",!t.inboxMode)}},directives:[D.q,K.a,we.a,Le.b,D.v,Xe,He,V,ze.a,qe,D.o,Ct,Mt.a,g.e],pipes:[B.a],styles:["[_nghost-%COMP%]{border-left:1px solid #dedede;bottom:0;display:flex;flex-direction:column;height:100vh;overflow:hidden;pointer-events:auto;width:210px}.IsCompact[_nghost-%COMP%]{background:#fff;border-left:none;border-radius:0 0 0 0;height:350px}.IsCompact.IsMinimised[_nghost-%COMP%]{height:30px}.IsHidden[_nghost-%COMP%]{display:none}.IsInbox[_nghost-%COMP%]{box-shadow:0 0 0 1px #dedede}.IsDrawer[_nghost-%COMP%]{width:100%}.FilterSwitch[_ngcontent-%COMP%]{flex:0 0 auto;padding:8px}.ThreadList[_ngcontent-%COMP%]{flex:0 1 100%}.InboxList[_ngcontent-%COMP%]{background:#fff}.SearchBar[_ngcontent-%COMP%]{display:block;flex:0 0 auto;justify-content:center}.SearchEmpty[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.Ticker[_ngcontent-%COMP%]{flex:0 0 30%;overflow-y:auto}"],changeDetection:0}),e})()},qSur:function(e,t,i){"use strict";i.d(t,"a",function(){return y}),i.d(t,"b",function(){return O});var n=i("mrSG"),s=i("iInd"),a=i("yeKy"),r=i("jtHE"),c=i("2Vo4"),o=i("itXk"),l=i("GyhO"),h=i("lJxs"),d=i("eIep"),u=i("IzEk"),b=i("/uUt"),g=i("8Y7J"),f=i("eCtd"),p=i("/wLE"),S=i("L1P6"),m=i("JPhM");function T(e,t){if(1&e){const e=g.Zb();g.Yb(0,"app-messaging-contacts",4),g.nc("makingCall",function(t){return g.Pc(e),g.rc(3).setInCall(t)})("minimise",function(t){return g.Pc(e),g.rc(3).setMinimise(t)}),g.sc(1,"flAsync"),g.sc(2,"flAsync"),g.sc(3,"flAsync"),g.Xb()}if(2&e){const e=g.rc(3);g.zc("currentUser",g.tc(1,4,e.currentUserDoc.valueChanges()))("inCall$",e.inCall$)("isCompact",g.tc(2,6,e.chatViewState$)===e.ChatViewState.COMPACT)("isMinimised",g.tc(3,8,e.isMinimised$))}}function C(e,t){1&e&&g.Tb(0,"app-messaging-inbox-widget")}function M(e,t){if(1&e&&(g.Wb(0),g.Zc(1,T,4,10,"app-messaging-contacts",2),g.sc(2,"flAsync"),g.Zc(3,C,1,0,"ng-template",null,3,g.ad),g.Vb()),2&e){const e=g.Mc(4),t=g.rc(2);g.Gb(1),g.zc("ngIf",!g.tc(2,2,t.isNewInboxWidgetInQueryParams$))("ngIfElse",e)}}function I(e,t){if(1&e){const e=g.Zb();g.Wb(0),g.Yb(1,"app-messaging-chat",1),g.nc("makingCall",function(t){return g.Pc(e),g.rc().setInCall(t)}),g.Xb(),g.Zc(2,M,5,4,"ng-container",0),g.Vb()}if(2&e){const e=g.rc();g.Gb(1),g.zc("adminChatsOnly",e.hideMessaging)("inCall$",e.inCall$)("clickedOutside$",e.clickedOutside$),g.Gb(1),g.zc("ngIf",!e.hideMessaging)}}const y=100;let O=(()=>{class e{constructor(e,t,i,n,s,o,l){this.activatedRoute=e,this.elref=t,this.datastore=i,this.auth=n,this.messagingChat=s,this.localStorage=o,this.shellConfig=l,this.ChatViewState=a.b,this._isMinimisedSubject$=new r.a(1),this._inCallSubject$=new c.a(!1),this.inCall$=this._inCallSubject$.asObservable(),this.clickedOutsideSubject$=new c.a(!1),this.clickedOutside$=this.clickedOutsideSubject$.asObservable()}ngOnInit(){this.isLoggedIn$=this.auth.authState$.pipe(Object(h.a)(e=>!!e));const e=this.auth.getUserId();this.currentUserDoc=this.datastore.document("users",e),this.chatViewState$=this.shellConfig.getConfig(this.activatedRoute).pipe(Object(d.a)(e=>this.messagingChat.getViewState(e.containerSize)));const t=this.localStorage.get("webappThreadListMinimise").pipe(Object(u.a)(1),Object(h.a)(e=>e||!1));this.isMinimised$=o.a([l.a(t,this._isMinimisedSubject$),this.chatViewState$]).pipe(Object(h.a)(([e,t])=>e&&t===a.b.COMPACT)),this.isNewInboxWidgetInQueryParams$=this.activatedRoute.queryParams.pipe(Object(h.a)(e=>Object(s.m)(e).has("newInboxWidget")),Object(b.a)())}onClick(e){const t=this.elref.nativeElement.contains(e);this.clickedOutsideSubject$.next(!t)}onBlur(e){this.clickedOutsideSubject$.next(!0)}setInCall(e){this._inCallSubject$.next(e)}setMinimise(e){return Object(n.a)(this,void 0,void 0,function*(){yield this.localStorage.set("webappThreadListMinimise",e),this._isMinimisedSubject$.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(g.Sb(s.a),g.Sb(g.l),g.Sb(f.a),g.Sb(p.a),g.Sb(a.d),g.Sb(S.a),g.Sb(m.a))},e.\u0275cmp=g.Mb({type:e,selectors:[["app-messaging"]],hostBindings:function(e,t){1&e&&g.nc("click",function(e){return t.onClick(e.target)},!1,g.Nc)("blur",function(e){return t.onBlur(e.target)},!1,g.Oc)},inputs:{hideMessaging:"hideMessaging"},decls:3,vars:5,consts:[[4,"ngIf"],[3,"adminChatsOnly","inCall$","clickedOutside$","makingCall"],["data-uitest-target","contactlist-new",3,"currentUser","inCall$","isCompact","isMinimised","makingCall","minimise",4,"ngIf","ngIfElse"],["displayNewInboxWidget",""],["data-uitest-target","contactlist-new",3,"currentUser","inCall$","isCompact","isMinimised","makingCall","minimise"]],template:function(e,t){1&e&&(g.Zc(0,I,3,4,"ng-container",0),g.sc(1,"flAsync"),g.sc(2,"flAsync")),2&e&&g.zc("ngIf",g.tc(1,1,t.isLoggedIn$)&&g.tc(2,3,t.chatViewState$)!==t.ChatViewState.NONE)},styles:["[_nghost-%COMP%]{align-items:flex-end;bottom:0;display:flex;flex-direction:row;height:100%;padding-right:env(safe-area-inset-right);pointer-events:none;position:fixed;right:0;z-index:1021}"],changeDetection:0}),e})()}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-messaging-messaging-inbox-messaging-inbox-module-es2015.87b8cf20b94c70f25056.js.map