(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{J66h:function(e,t,r){var n;!function(r,o){e.exports=function(r){"use strict";var o,a=(r=r||{}).Base64,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(i),u=String.fromCharCode,l=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(c,l)},d=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),t>=2?"=":i.charAt(r>>>6&63),t>=1?"=":i.charAt(63&r)].join("")},p=r.btoa&&"function"==typeof r.btoa?function(e){return r.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,d)},h=function(e){return p(f(String(e)))},_=function(e){return e.replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,"")},g=function(e,t){return t?_(h(e)):h(e)};r.Uint8Array&&(o=function(e,t){for(var r="",n=0,o=e.length;n<o;n+=3){var a=e[n+1],s=e[n+2],u=e[n]<<16|a<<8|s;r+=i.charAt(u>>>18)+i.charAt(u>>>12&63)+(void 0!==a?i.charAt(u>>>6&63):"=")+(void 0!==s?i.charAt(63&u):"=")}return t?_(r):r});var m,y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(y,v)},E=function(e){var t=e.length,r=t%4,n=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),o=[u(n>>>16),u(n>>>8&255),u(255&n)];return o.length-=[0,0,2,1][r],o.join("")},w=r.atob&&"function"==typeof r.atob?function(e){return r.atob(e)}:function(e){return e.replace(/\S{1,4}/g,E)},U=function(e){return w(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},O=function(e){return String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},R=function(e){return function(e){return b(w(e))}(O(e))};if(r.Uint8Array&&(m=function(e){return Uint8Array.from(U(O(e)),function(e){return e.charCodeAt(0)})}),r.Base64={VERSION:"2.6.4",atob:U,btoa:p,fromBase64:R,toBase64:g,utob:f,encode:g,encodeURI:function(e){return g(e,!0)},btou:b,decode:R,noConflict:function(){var e=r.Base64;return r.Base64=a,e},fromUint8Array:o,toUint8Array:m},"function"==typeof Object.defineProperty){var S=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",S(function(){return R(this)})),Object.defineProperty(String.prototype,"toBase64",S(function(e){return g(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",S(function(){return g(this,!0)}))}}return r.Meteor&&(Base64=r.Base64),e.exports?e.exports.Base64=r.Base64:void 0===(n=(function(){return r.Base64}).apply(t,[]))||(e.exports=n),{Base64:r.Base64}}(r)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this)},KrVf:function(e,t,r){"use strict";r.d(t,"a",function(){return ve});var n=r("90vB"),o=r("IheW"),a=r("f6cb"),i=r("2Vo4"),s=r("lJxs"),u=r("NJ9Y"),l=r("pLZG"),c=r("IzEk"),f=r("JX91"),d=r("05l1"),p=r("x+ZX"),h=r("J66h"),_=r("GBY4"),g=r.n(_);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){var t="function"==typeof Map?new Map:void 0;return(b=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,O(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),U(r,e)})(e)}function E(e,t,r){return(E=w()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&U(o,r.prototype),o}).apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(n,e);var t,r=(t=n,function(){var e,r=O(t);if(w()){var n=O(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return v(this,e)});function n(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(y(this,n),(t=r.call(this,e)).originalRequest=a,t.originalResponse=i,t.causingError=o,null!=o&&(e+=", caused by ".concat(o.toString())),null!=a){var s=a.getHeader("X-Request-ID")||"n/a",u=a.getMethod(),l=a.getURL(),c=i?i.getStatus():"n/a",f=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(u,", url: ").concat(l,", response code: ").concat(c,", response text: ").concat(f,", request id: ").concat(s,")")}return t.message=e,t}return n}(b(Error));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,r,n;return t=e,n=[{key:"terminate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if("function"==typeof r||"function"==typeof n)throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");var o=x("DELETE",t,r);return j(o,null,r).then(function(e){if(204!==e.getStatus())throw new R("tus: unexpected response while terminating upload",null,o,e)}).catch(function(n){if(n instanceof R||(n=new R("tus: failed to terminate upload",n,o,null)),!I(n,0,r))throw n;var a=r.retryDelays[0],i=r.retryDelays.slice(1),s=P({},r,{retryDelays:i});return new Promise(function(e){return setTimeout(e,a)}).then(function(){return e.terminate(t,s)})})}}],(r=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then(function(t){return e._urlStorage.findUploadsByFingerprint(t)})}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var r=this.options.retryDelays;null==r||"[object Array]"===Object.prototype.toString.call(r)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach(function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))}),this.options.fingerprint(t,this.options).then(function(r){return null==r||"Calculated fingerprint: ".concat(r),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)}).then(function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()}).catch(function(t){e._emitError(t)})):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,r=this._size=this._source.size,n=0;this._parallelUploads=[];var o=function(e,t,r){for(var n=Math.floor(e/t),o=[],a=0;a<t;a++)o.push({start:n*a,end:n*(a+1)});return o[t-1].end=e,r&&o.forEach(function(e,t){e.uploadUrl=r[t]||null}),o}(this._source.size,null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,this._parallelUploadUrls);this._parallelUploadUrls=new Array(o.length);var a,i=o.map(function(a,i){var s=0;return t._source.slice(a.start,a.end).then(function(u){var l=u.value;return new Promise(function(u,c){var f=P({},t.options,{uploadUrl:a.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:P({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:u,onError:c,onProgress:function(e){n=n-s+e,s=e,t._emitProgress(n,r)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[i]=d.url,t._parallelUploadUrls.filter(function(e){return!!e}).length===o.length&&t._saveUploadInUrlStorage()}}),d=new e(l,f);d.start(),t._parallelUploads.push(d)})})});Promise.all(i).then(function(){(a=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=D(t.options.metadata);return""!==e&&a.setHeader("Upload-Metadata",e),t._sendRequest(a,null)}).then(function(e){if(k(e.getStatus(),200)){var r=e.getHeader("Location");null!=r?(t.url=M(t.options.endpoint,r),"Created upload at ".concat(t.url),t._emitSuccess()):t._emitHttpError(a,e,"tus: invalid or missing Location header")}else t._emitHttpError(a,e,"tus: unexpected response while creating upload")}).catch(function(e){t._emitError(e)})}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.url),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(t,r){var n=this;if("function"==typeof r)throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach(function(e){e.abort(t)}),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,r,n){this._emitError(new R(r,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),I(e,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){t.start()},r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,n=D(this.options.metadata);""!==n&&t.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then(function(r){if(k(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=M(e.options.endpoint,n),"Created upload at ".concat(e.url),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")}).catch(function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then(function(r){var n=r.getStatus();if(!k(n,200))return k(n,400)&&e._removeFromUrlStorage(),423===n?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(r.getHeader("Upload-Offset"),10);if(isNaN(o))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var a=parseInt(r.getHeader("Upload-Length"),10);if(!isNaN(a)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),o===a)return e._emitProgress(a,a),void e._emitSuccess();e._offset=o,e._performUpload()}else e._emitHttpError(t,r,"tus: invalid or missing length value")}}).catch(function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)})}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then(function(r){k(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")}).catch(function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset "+t._offset,r)}))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,n=this._offset+this.options.chunkSize;return e.setProgressHandler(function(e){t._emitProgress(r+e,t._size)}),e.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n).then(function(r){var n=r.value;return t.options.uploadLengthDeferred&&r.done&&(t._size=t._offset+(n&&n.size?n.size:0),e.setHeader("Upload-Length",t._size)),null===n?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,n))})}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=x(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(t){e._emitError(t)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then(function(t){return e._urlStorageKey=t}).catch(function(t){e._emitError(t)})}}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return j(e,t,this.options)}}])&&T(t.prototype,r),n&&T(t,n),e}();function D(e){var t=[];for(var r in e)t.push(r+" "+h.Base64.encode(e[r]));return t.join(",")}function k(e,t){return e>=t&&e<t+100}function x(e,t,r){var n=r.httpStack.createRequest(e,t);n.setHeader("Tus-Resumable","1.0.0");var o=r.headers||{};for(var a in o)n.setHeader(a,o[a]);if(r.addRequestId){var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});n.setHeader("X-Request-ID",i)}return n}function j(e,t,r){return("function"==typeof r.onBeforeRequest?Promise.resolve(r.onBeforeRequest(e)):Promise.resolve()).then(function(){return e.send(t).then(function(t){return("function"==typeof r.onAfterResponse?Promise.resolve(r.onAfterResponse(e,t)):Promise.resolve()).then(function(){return t})})})}function I(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);var n,o=e.originalResponse?e.originalResponse.getStatus():0;return(!k(o,400)||409===o||423===o)&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function M(e,t){return new g.a(t,e).toString()}A.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};var L=A;var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return(t=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();var F=!1;try{F="localStorage"in window,localStorage.setItem("tusSupport",localStorage.getItem("tusSupport"))}catch(be){if(be.code!==be.SECURITY_ERR&&be.code!==be.QUOTA_EXCEEDED_ERR)throw be;F=!1}var z=F,B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return(t=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),n="tus::".concat(e,"::").concat(r);return localStorage.setItem(n,JSON.stringify(t)),Promise.resolve(n)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(e))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,t.push(o)}catch(be){}}return t}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t,r){return t&&q(e.prototype,t),r&&q(e,r),e}var J=function(){function e(){N(this,e)}return G(e,[{key:"createRequest",value:function(e,t){return new $(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),$=function(){function e(t,r){N(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return G(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(r,n){e._xhr.onload=function(){r(new V(e._xhr))},e._xhr.onerror=function(e){n(e)},e._xhr.send(t)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),V=function(){function e(t){N(this,e),this._xhr=t}return G(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),K=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t,r){return t&&X(e.prototype,t),r&&X(e,r),e}var Z=function(){function e(t){Y(this,e),this._file=t,this.size=t.size}return W(e,[{key:"slice",value:function(e,t){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return r=this._file.slice(e,t),new Promise(function(e,t){var n=new FileReader;n.onload=function(){var t=new Uint8Array(n.result);e({value:t})},n.onerror=function(e){t(e)},n.readAsArrayBuffer(r)});var r,n=this._file.slice(e,t);return Promise.resolve({value:n})}},{key:"close",value:function(){}}]),e}(),Q=function(){function e(t,r){Y(this,e),this._chunkSize=r,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return W(e,[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,n=t<=this._bufferOffset+ee(this._buffer);if(this._done||n){var o=this._getDataFromBuffer(e,t);return Promise.resolve({value:o,done:null==o&&this._done})}return this._reader.read().then(function(n){var o=n.value;return n.done?r._done=!0:r._buffer=void 0===r._buffer?o:function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,o),r._readUntilEnoughDataOrDone(e,t)})}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===ee(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function ee(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var te=function(){function e(){Y(this,e)}return W(e,[{key:"openFile",value:function(e,t){return K()&&e&&void 0!==e.uri?(r=e.uri,new Promise(function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){e(n.response)},n.onerror=function(e){t(e)},n.open("GET",r),n.send()})).then(function(e){return new Z(e)}).catch(function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e)}):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new Z(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new Q(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var r}}]),e}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(be){return!1}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach(function(t){fe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=ce({},L.defaultOptions,{httpStack:new J,fileReader:new te,urlStorage:z?new B:new H,fingerprint:function(e,t){return K()?Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(a,e);var t,r,n,o=(t=a,function(){var e,r=ue(t);if(se()){var n=ue(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return ie(this,e)});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ne(this,a),t=ce({},de,{},t),o.call(this,e,t)}return r=a,(n=[{key:"terminate",value:function(e,t,r){return t=ce({},de,{},t),L.terminate(e,t,r)}}])&&oe(r,n),a}(L),he=(window,r("7Cbv")),_e=r("os2j");const ge={[_e.a.FL_DRIVE]:e=>({endpoint:`files/0.1/files/${e.id}`,fileParam:"files[]",downloadURLEndpoint:`files/0.1/files/${e.id}/download?as_json=true`,downloadURL:e=>e.download_url,isLegacy:!0}),[_e.a.LEGACY_PROJECT_FILES]:e=>({endpoint:"projects/upload.php",isGaf:!0,isLegacy:!0,fileParam:"files[]",DEPRECATED_extraParams:e=>{if(!e.customMetadata||!e.customMetadata.projectId)throw new Error("Missing projectId in custom metadata");return{"attachments[]":e.name,project_id:e.customMetadata.projectId,bid_id:e.customMetadata.bidId}}}),[_e.a.LEGACY_PROJECT_ATTACHMENTS]:()=>({endpoint:"projects/uploadTemporaryFile.php",isGaf:!0,fileParam:"files[]",DEPREACTED_DO_NOT_USE_backendId:e=>e.fileIds[0],isLegacy:!0}),[_e.a.PROFILE_PICTURES]:e=>({endpoint:"users/0.1/self/profile_picture/",fileParam:"filedata",downloadURL:e=>e.avatar_url,DEPRECATED_extraParams:e=>{var t;if(!(e.customMetadata&&e.customMetadata.x&&e.customMetadata.y&&e.customMetadata.cropW&&e.customMetadata.cropH))throw new Error("missing x, y, cropW, or cropH custom metadata");return{x:e.customMetadata.x,y:e.customMetadata.y,cropW:e.customMetadata.cropW,cropH:e.customMetadata.cropH,should_detect_face:null!==(t=e.customMetadata.shouldDetectFace)&&void 0!==t?t:"false"}},isLegacy:!0}),[_e.a.PROFILE_COVER_IMAGES]:e=>({endpoint:"users/0.1/self/cover_image/",fileParam:"filedata",DEPRECATED_extraParams:e=>{if(!(e.customMetadata&&e.customMetadata.x&&e.customMetadata.y&&e.customMetadata.crop_width&&e.customMetadata.crop_height))throw new Error("missing x, y, crop_width, or crop_height custom metadata");return{x:e.customMetadata.x,y:e.customMetadata.y,crop_width:e.customMetadata.crop_width,crop_height:e.customMetadata.crop_height}},isLegacy:!0}),[_e.a.GROUP_COVER_IMAGE]:e=>({DEPRECATED_funkyChangingEndpoint:e=>{if(!e.customMetadata||!e.customMetadata.groupId)throw new Error("missing groupId custom metadata");return`groups/0.1/groups/${e.customMetadata.groupId}/cover_image/`},endpoint:"this_is_not_used",fileParam:"filedata",DEPRECATED_extraParams:e=>{if(!(e.customMetadata&&e.customMetadata.x&&e.customMetadata.y&&e.customMetadata.crop_width&&e.customMetadata.crop_height))throw new Error("missing x, y, crop_width, or crop_height custom metadata");return{x:e.customMetadata.x,y:e.customMetadata.y,crop_width:e.customMetadata.crop_width,crop_height:e.customMetadata.crop_height}},isLegacy:!0}),[_e.a.MESSAGING_ATTACHMENTS]:e=>({endpoint:"this_is_not_used",DEPRECATED_funkyChangingEndpoint:e=>{if(!e.customMetadata||!e.customMetadata.threadId)throw new Error("missing threadId custom metadata");return`messages/0.1/threads/${e.customMetadata.threadId}/messages/`},fileParam:"files[]",DEPRECATED_extraParams:e=>{if(!e.customMetadata||!e.customMetadata.threadId||!e.customMetadata.clientMessageId)throw new Error("missing threadId or clientMessageId custom metadata");return{thread_id:e.customMetadata.threadId,client_message_id:e.customMetadata.clientMessageId}},DEPRECATED_funkyChangingDownloadUrlEndpoint:t=>{if(!t.messageId)throw new Error("missing messageId custom metadata for messaging attachment");return`messages/0.1/messages/${t.messageId}/attachments/${encodeURIComponent(e.id)}`},downloadURL:({download_url:e})=>e,isLegacy:!0}),[_e.a.SUPERUSER_MESSAGING_ATTACHMENTS]:e=>({endpoint:"this_is_not_used",fileParam:"this_is_not_used",DEPRECATED_funkyChangingDownloadUrlEndpoint:t=>{if(!t.messageId)throw new Error("missing messageId custom metadata for messaging attachment");return`superuser/0.1/admin_messages/${t.messageId}/files/${encodeURIComponent(e.id)}`},downloadURL:({download_url:e})=>e,isLegacy:!0}),[_e.a.PORTFOLIO_ITEMS]:()=>({endpoint:"showcase/uploadFile.php",fileParam:"files[]",isGaf:!0,isLegacy:!0,DEPREACTED_DO_NOT_USE_backendId:e=>e.id}),[_e.a.LEGACY_CONTEST_ATTACHMENTS]:()=>({endpoint:"contests/uploadTemporaryFile.php",isGaf:!0,isLegacy:!0,fileParam:"files[]",DEPREACTED_DO_NOT_USE_backendId:e=>e.file_ids[0]}),[_e.a.POST_ATTACHMENTS]:e=>({endpoint:"posts/0.1/files/",fileParam:"file",downloadURLEndpoint:`posts/0.1/files/${e.id}/download?view_inline=true`,downloadURL:e=>e.url,isLegacy:!0}),[_e.a.FREELANCER_CV]:e=>({isLegacy:!1})};var me=r("8Y7J");class ye{constructor(e){this.upload$=e,this.uploadSubscription=this.upload$.subscribe()}changes(){return this.upload$}percentageChanges(){return this.upload$.pipe(Object(s.a)(e=>e.bytesTransferred/e.totalBytes*100))}getDownloadURL(){return this.upload$.pipe(Object(u.a)(),Object(s.a)(e=>"error"!==e.state?e.downloadURL:void 0),Object(l.a)(a.h))}cancel(){this.uploadSubscription&&this.uploadSubscription.unsubscribe()}}let ve=(()=>{class e{constructor(e){this.freelancerHttp=e}upload(e,t,r){if(!e)throw new Error("Required parameter {bucket} is not defined!");const n=Object(he.a)();return ge[e]({bucket:e,id:n}).isLegacy?this._legacyUpload(e,n,t,r):this._upload(e,n,t,r)}replace(e,t,r,n){if(!ge[e]({bucket:e,id:t}).isLegacy)throw new Error("Not implemented");return this._legacyUpload(e,t,r,n)}delete(e,t){throw new Error("Not implemented")}getDownloadURL(e,t,r={}){var n,o;const a=ge[e]({bucket:e,id:t});if(!a.isLegacy)throw new Error("Only legacy storage buckets can use this function");const i=null!==(n=a.downloadURLEndpoint)&&void 0!==n?n:null===(o=a.DEPRECATED_funkyChangingDownloadUrlEndpoint)||void 0===o?void 0:o.call(a,r);if(!i)throw new Error("Storage backend does not support getting the file download URL");return this.freelancerHttp.get(i).pipe(Object(c.a)(1)).toPromise().then(e=>{if("success"===e.status){if(!a.downloadURL)throw new Error("No downloadURL parsing method has been defined for that storage");return{status:"success",downloadURL:a.downloadURL(e.result)}}return{status:"error",errorCode:e.errorCode,requestId:e.requestId}})}getImageDimensionsFromFile(e){return new Promise(t=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=new Image;e.src=r.result,e.onload=()=>{t({width:e.width,height:e.height})}}})}getMetadata(e,t){throw new Error("Not implemented")}updateMetadata(e,t,r){throw new Error("Not implemented")}_upload(e,t,r,o){const a=Object.assign(Object.assign({},o||{}),{bucket:e,id:t,name:r.name,size:r.size,timeCreated:Date.now(),updated:Date.now()});if(ge[e]({bucket:e,id:t}).isLegacy)throw new Error("This storage bucket only supports legacy uploads.");const s={state:"running",ref:{bucket:e,id:t},metadata:a,bytesTransferred:0,totalBytes:r.size},u=this.freelancerHttp.getBaseServiceUrl(n.b.FILE_SERVICE),l=new i.a(s);return new pe(r,{endpoint:u,retryDelays:[0,3e3,5e3],metadata:{fileId:t,fileName:r.name,fileType:r.type},onError(e){const t=function(e){const t={status:"error",errorCode:"UNKNOWN_ERROR"};if(function(e){return"originalResponse"in e}(e))try{const t=JSON.parse(e.originalResponse.getBody());return{status:t.status,errorCode:t.error_code,requestId:t.request_id}}catch(be){return t}return t}(e);l.next(Object.assign(Object.assign({},s),{state:"error",error:t})),l.complete()},onProgress:e=>{l.next(Object.assign(Object.assign({},s),{bytesTransferred:e}))},onSuccess:()=>{l.next(Object.assign(Object.assign({},s),{bytesTransferred:r.size,state:"success"})),l.complete()}}).start(),new ye(l.asObservable())}_legacyUpload(e,t,r,n){const i=ge[e]({bucket:e,id:t});if(!i.isLegacy)throw new Error("This storage bucket does not support legacy uploads");const u=Object.assign(Object.assign({},n||{}),{bucket:e,id:t,name:r.name,size:r.size,timeCreated:Date.now(),updated:Date.now()}),c=new FormData;c.append(i.fileParam,r),c.append("metadata",JSON.stringify(u)),i.DEPRECATED_extraParams&&Object.entries(i.DEPRECATED_extraParams(u)).forEach(([e,t])=>{void 0!==t&&c.append(e,t)});const h={state:"running",ref:{bucket:e,id:t},metadata:u,bytesTransferred:0,totalBytes:r.size},_=this.freelancerHttp.post(i.DEPRECATED_funkyChangingEndpoint?i.DEPRECATED_funkyChangingEndpoint(u):i.endpoint,c,{reportProgress:!0,isGaf:i.isGaf||!1}).pipe(Object(s.a)(e=>e.type===o.e.UploadProgress?Object.assign(Object.assign({},h),{bytesTransferred:e.loaded}):e.type===o.e.Response&&e.body?Object.assign(Object.assign({},h),"success"===e.body.status?{state:"success",bytesTransferred:h.totalBytes,downloadURL:i.downloadURL?i.downloadURL(e.body.result):void 0,ref:Object.assign(Object.assign({},h.ref),{DEPREACTED_DO_NOT_USE_backendId:i.DEPREACTED_DO_NOT_USE_backendId?i.DEPREACTED_DO_NOT_USE_backendId(e.body.result):void 0})}:{state:"error",bytesTransferred:h.totalBytes,error:{errorCode:e.body.errorCode,requestId:e.body.requestId}}):void 0),Object(l.a)(a.h),Object(f.a)(h),Object(d.a)(1),Object(p.a)());return new ye(_)}}return e.\u0275fac=function(t){return new(t||e)(me.jc(n.a))},e.\u0275prov=me.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},os2j:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){return e.PROFILE_COVER_IMAGES="profile_cover_images",e.FL_DRIVE="fl_drive",e.LEGACY_PROJECT_FILES="legacy_project_files",e.LEGACY_PROJECT_ATTACHMENTS="legacy_project_attachments",e.PROFILE_PICTURES="profile_pictures",e.MESSAGING_ATTACHMENTS="messaging_attachments",e.SUPERUSER_MESSAGING_ATTACHMENTS="superuser_messaging_attachments",e.PORTFOLIO_ITEMS="portfolio_items",e.LEGACY_CONTEST_ATTACHMENTS="legacy_contest_files",e.POST_ATTACHMENTS="post_files",e.GROUP_COVER_IMAGE="group_cover_image",e.FREELANCER_CV="freelancer_cv",e}({})}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-contests-contest-view-contest-view-module~app-dis~36d60243-es2015.6729b690cbc5a4c2f46c.js.map