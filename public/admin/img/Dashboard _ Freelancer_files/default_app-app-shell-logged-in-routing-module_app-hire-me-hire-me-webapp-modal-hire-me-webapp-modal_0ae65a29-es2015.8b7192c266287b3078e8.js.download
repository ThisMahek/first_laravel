(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"9a83":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r}),a.d(e,"c",function(){return c});var i=a("OpNG"),o=a("cUs2"),s=a("ueDg"),d=a("9ioL");function n(){return{defaultOrder:{field:"submitDate",direction:i.a.DESC},fetch:(t,e,a,i)=>({endpoint:"projects/0.1/bids",params:{bids:e,bidders:Object(o.h)(a,"bidderId"),projects:Object(o.h)(a,"projectId"),frontend_bid_statuses:Object(o.h)(a,"frontendBidStatus"),award_statuses:Object(o.h)(a,"awardStatus"),complete_statuses:Object(o.h)(a,"completeStatus"),project_owners:Object(o.h)(a,"projectOwnerId"),quotations:!0}}),push:r,set:void 0,update:c,remove:void 0}}function r(t,e){return{endpoint:"projects/0.1/bids/",asFormData:!1,payload:{project_id:e.projectId,bidder_id:e.bidderId,amount:e.amount,period:e.period,milestone_percentage:e.milestonePercentage||50,description:e.description,sponsored:e.sponsored},push:void 0,set:void 0,update:void 0,remove:void 0}}function c(t,e,a){const i=`projects/0.1/bids/${a.id}`;let o,n=!0;switch(e.awardStatus){case s.BidAwardStatusApi.PENDING:o=e.extraForUpdate?{action:d.a.AWARD,work_limit:e.extraForUpdate.workLimit,billing_cycle:e.extraForUpdate.billingCycle,skip_hourly_contract:e.extraForUpdate.skipHourlyContract}:{action:d.a.AWARD};break;case s.BidAwardStatusApi.REVOKED:o={action:d.a.REVOKE};break;case s.BidAwardStatusApi.REJECTED:o={action:d.b.DENY,reason_code:e.rejectReasonCode,other_feedback:e.otherFeedback};break;case s.BidAwardStatusApi.AWARDED:o={action:d.b.ACCEPT}}if(void 0!==e.shortlisted&&e.shortlisted!==a.shortlisted){if(o)throw new Error("Cannot update two requests at once");o=e.shortlisted?{action:d.a.SHORTLIST}:{action:d.a.UNSHORTLIST}}if(void 0!==e.hidden&&e.hidden!==a.hidden){if(o)throw new Error("Cannot update two requests at once");o=e.hidden?{action:d.a.HIDE}:{action:d.a.UNHIDE}}if(void 0!==e.isLocationTracked&&e.isLocationTracked!==a.isLocationTracked){if(o)throw new Error("Cannot update two requests at once");if(!e.isLocationTracked)throw new Error("You cannot update the isLocationTracked to false");o={action:d.a.REQUEST_LOCATION_SHARING}}if(e.highlighted){if(o)throw new Error("Cannot update two requests at once");o={action:d.b.HIGHLIGHT}}if(e.retracted){if(o)throw new Error("Cannot update two requests at once");o={action:d.b.RETRACT}}if(void 0!==e.description||void 0!==e.period||void 0!==e.amount){if(o)throw new Error("Cannot update with action and bid at once");o={description:e.description,period:e.period,amount:e.amount},n=!1}if(e.completeStatus){if(o)throw new Error("Cannot update two requests at once");return o={action:d.c.END,bid_id:a.id,status:e.completeStatus},{asFormData:!0,method:"PUT",endpoint:`projects/0.1/projects/${a.projectId}`,payload:o}}if(o)return{asFormData:n,payload:o,endpoint:i,method:"PUT"};throw new Error("Cannot update for bids")}},"UC/D":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return d});var i=a("f6cb"),o=a("e+HA");function s(t){if(!t.project_id)throw Error("Milestone request doesn't have a project ID.");if(!t.time_created)throw Error("Milestone request doesn't have a time created.");return{id:t.transaction_id||Math.random(),projectOwnerId:t.project_owner_id,bidderId:t.bidder_id,amount:t.amount,reason:t.reason,description:t.other_reason,projectId:t.project_id,bidId:t.bid_id,currency:t.currency?Object(o.a)(t.currency):void 0,isFromPrepaid:t.is_from_prepaid,status:t.status,disputeId:Object(i.s)(t.dispute_id),cancellationRequested:t.cancellation_requested,timeCreated:1e3*t.time_created,actionReason:t.cancellation_reason,actionReasonText:t.reason_text,timeReleased:t.time_released?1e3*t.time_released:void 0,isInitialPayment:t.is_initial_payment}}function d(t){if(!t.project_id)throw Error("Milestone doesn't have a project ID.");if(void 0===t.time_created)throw Error("Milestone doesn't have a time created.");return{id:t.transaction_id&&"number"==typeof t.transaction_id?Object(i.s)(t.transaction_id):Math.random(),projectOwnerId:Object(i.s)(t.project_owner_id),bidderId:Object(i.s)(t.bidder_id),amount:Object(i.s)(t.amount),reason:t.reason,description:t.other_reason,projectId:Object(i.s)(t.project_id),bidId:Object(i.s)(t.bid_id),currency:t.currency?Object(o.b)(t.currency):void 0,isFromPrepaid:t.is_from_prepaid,status:t.status,disputeId:Object(i.s)(t.dispute_id),timeCreated:"string"==typeof t.time_created?1e3*Object(i.s)(t.time_created):Date.now(),isInitialPayment:t.is_initial_payment}}},eI96:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var i=a("9u4R"),o=a("tqRt"),s=a("OpNG"),d=a("cUs2"),n=a("f6cb"),r=a("ueDg");function c(){return{defaultOrder:{field:"timeCreated",direction:s.a.DESC},fetch:(t,e,a,i)=>({endpoint:"projects/0.1/milestones",params:{projects:Object(d.h)(a,"projectId"),bids:Object(d.h)(a,"bidId"),bidders:Object(d.h)(a,"bidderId"),statuses:Object(d.h)(a,"status"),milestones:e,project_owners:Object(d.h)(a,"projectOwnerId"),is_initial_payment:Object(d.h)(a,"isInitialPayment")[0]}}),push:(t,e,a)=>{if(void 0===(null==a?void 0:a.invoiceId)&&!e.description)throw new Error("Milestone description not provided on push");return{endpoint:"projects/0.1/milestones/",payload:{bidder_id:e.bidderId,amount:e.amount,project_id:e.projectId,description:e.description||"",request_id:a?Object(n.s)(a.requestId):void 0,invoice_id:a?Object(n.s)(a.invoiceId):void 0}}},set:void 0,update:(t,e,a)=>{const i=`projects/0.1/milestones/${a.id}/`;let o;if((a.status===r.MilestoneStatusApi.FROZEN||a.status===r.MilestoneStatusApi.REQUESTED_RELEASE)&&e.status===r.MilestoneStatusApi.CLEARED&&void 0!==e.amount){if(o)throw new Error("Cannot update two milestones at once, at release");o={action:"release",amount:e.amount}}if(a.status===r.MilestoneStatusApi.FROZEN&&e.status===r.MilestoneStatusApi.REQUESTED_RELEASE){if(o)throw new Error("Cannot update two milestones at once, at request release");o={action:"request_release"}}if((a.status===r.MilestoneStatusApi.FROZEN||a.status===r.MilestoneStatusApi.REQUESTED_RELEASE||a.status===r.MilestoneStatusApi.PENDING)&&e.status===r.MilestoneStatusApi.CANCELED){if(o)throw new Error("Cannot update two milestones at once, at cancel");o={action:"cancel"}}if(a.description!==e.description&&e.status!==r.MilestoneStatusApi.REQUESTED_RELEASE&&e.status!==r.MilestoneStatusApi.CLEARED){if(o)throw new Error("Cannot update two milestones at once, at update");o={action:"update",description:e.description}}if("request_cancel"===e.action&&e.actionReason&&(o={action:e.action,reason:e.actionReason,reason_text:"other"===e.actionReason?e.actionReasonText:""}),a.cancellationRequested&&!1===e.cancellationRequested){if(o)throw new Error("Cannot update two milestones at once, at reject cancel");o={action:"reject_cancel"}}if(void 0===o)throw new Error("Could not update due to missing payload");return{asFormData:!1,payload:o,endpoint:i,method:"PUT"}},remove:void 0}}var u=a("UC/D");function p(t={},e){switch(e.type){case"API_FETCH_SUCCESS":if("milestones"===e.payload.type){const{result:a,ref:i,order:o}=e.payload;return Object(d.o)(t,Object(d.z)(a.milestones,u.a),o,i)}return t;case"API_UPDATE_SUCCESS":if("milestones"===e.payload.type){const{delta:a,originalDocument:i,ref:o,result:n}=e.payload;if(a.status===r.MilestoneStatusApi.CLEARED){const e=n?n.remaining_milestone:void 0;if(e&&e.transaction_id){const a=Object(d.u)(o,t,i.id),s=n.released_milestone,r=Object(d.b)(a,[s],()=>Object(u.a)(Object.assign({},s)),o);return Object(d.b)(r,[e],()=>Object(u.a)(Object.assign({},e)),o)}return Object(d.A)(t,[i.id],t=>Object(s.e)(t,Object(u.a)(Object.assign({},n.original_milestone))),o)}return a.status===r.MilestoneStatusApi.CANCELED?Object(d.u)(o,t,i.id):Object(d.A)(t,[i.id],t=>Object(s.e)(t,a),o)}return t;case"API_PUSH_SUCCESS":if("milestones"===e.payload.type){const{result:a,ref:i}=e.payload;return Object(d.q)(t,Object(d.z)([a],u.a,i.path.authUid),i)}return t;case"WS_MESSAGE":{const a={path:{collection:"milestones",authUid:e.payload.toUserId}};if("notifications"===e.payload.parent_type)switch(e.payload.type){case"cancelMilestone":return Object(d.u)(a,t,Object(n.s)(e.payload.data.tranId));case"rejectMilestoneCancellation":return Object(d.A)(t,[e.payload.data.id],t=>Object.assign(Object.assign({},t),{cancellationRequested:!1,actionReason:void 0,actionReadonText:void 0,action:void 0}),a);case"createMilestone":{const{newMilestone:i}=e.payload.data;return Object(d.b)(t,[i],u.b,a)}case"accepted":{const{milestoneIds:i}=e.payload.data;return Object(d.A)(t,i,t=>Object.assign(Object.assign({},t),{status:r.MilestoneStatusApi.FROZEN}),a)}case"releaseMilestone":{const{milestoneId:i}=e.payload.data;return Object(d.A)(t,[Object(n.s)(i)],t=>Object.assign(Object.assign({},t),{status:r.MilestoneStatusApi.CLEARED}),a)}case"milestoneStatusUpdate":{const{milestoneId:i,milestoneStatus:o}=e.payload.data;return Object(d.A)(t,[Object(n.s)(i)],t=>Object.assign(Object.assign({},t),{status:o}),a)}case"requestCancelMilestone":{const{milestoneId:i,actionReason:o,actionReasonText:s}=e.payload.data;return Object(d.A)(t,[Object(n.s)(i)],t=>Object.assign(Object.assign({},t),{cancellationRequested:!0,actionReason:o,actionReasonText:s}),a)}case"requestToRelease":{const{tranId:i}=e.payload.data;return Object(d.A)(t,[Object(n.s)(i)],t=>Object.assign(Object.assign({},t),{status:r.MilestoneStatusApi.REQUESTED_RELEASE}),a)}case"generateAutomaticMilestone":return Object(d.b)(t,[e.payload.data],u.b,a);default:return t}return t}default:return t}}var b=a("8Y7J");let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Qb({type:t}),t.\u0275inj=b.Pb({imports:[[o.j.forFeature("milestones",p),i.d.forFeature("milestones",c)]]}),t})()},jZoe:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var i=a("9u4R"),o=a("tqRt"),s=a("9a83"),d=a("cUs2"),n=a("OpNG"),r=a("f6cb"),c=a("ueDg"),u=a("9O23");function p(t={},e){switch(e.type){case"API_FETCH_SUCCESS":if("bids"===e.payload.type){const{result:a,ref:i,order:o}=e.payload;return Object(d.o)(t,Object(d.z)(a.bids,u.a),o,i)}return t;case"API_UPDATE_SUCCESS":if("projectViewBids"===e.payload.type||"bids"===e.payload.type){const{delta:a,originalDocument:i}=e.payload,o={path:{collection:"bids",authUid:e.payload.ref.path.authUid}};return Object(d.A)(t,[i.id],t=>Object(n.e)(t,a),o)}if("bidEditRequests"===e.payload.type){const{delta:a,result:i}=e.payload,o={path:{collection:"bids",authUid:e.payload.ref.path.authUid}};let s,n;return a.status===c.BidEditRequestStatusApi.ACCEPTED?(s=i.new_amount,n=i.new_period):(s=i.old_amount,n=i.old_period),Object(d.A)(t,[i.bid_id],t=>Object.assign(Object.assign({},t),{amount:s,period:n}),o)}return t;case"API_PUSH_SUCCESS":if("projectViewBids"===e.payload.type||"bids"===e.payload.type){const{result:a}=e.payload,i={path:{collection:"bids",authUid:e.payload.ref.path.authUid}};return Object(d.q)(t,Object(d.z)([a],u.a),i)}return t;case"WS_MESSAGE":{const a={path:{collection:"bids",authUid:e.payload.toUserId}};if("notifications"===e.payload.parent_type)switch(e.payload.type){case"bid":return Object(d.b)(t,[e.payload],u.c,a);case"bid_self":case"bid_updated":{const i=Object(r.s)(e.payload.data.id);return Object(d.A)(t,[i],t=>Object.assign(Object.assign({},t),{id:i,bidderId:Object(r.s)(e.payload.data.userId),projectId:Object(r.s)(e.payload.data.projectId),amount:Object(r.s)(e.payload.data.amount),period:Object(r.s)(e.payload.data.period),description:e.payload.data.bid.descr||"",score:Object(r.s)(e.payload.data.bid.score),submitDate:1e3*Object(r.s)(e.payload.data.time),timeSubmitted:1e3*Object(r.s)(e.payload.data.time)}),a)}case"bidretracted":return Object(d.u)(a,t,e.payload.data.bid_id);case"revoked":{const{apiMessage:i}=e.payload.data,{id:o}=i.bid;return Object(d.A)(t,[o],t=>Object.assign(Object.assign({},t),{id:o,bidderId:i.bid.bidder_id,projectId:i.project.id,awardStatus:i.bid.award_status}),a)}case"accepted":{const{apiMessage:i}=e.payload.data,{id:o}=i.bid;return Object(d.A)(t,[o],t=>Object.assign(Object.assign(Object.assign(Object.assign({},t),{id:o,bidderId:i.bid.bidder_id,projectId:i.project.id}),i.bid.amount?{amount:i.bid.amount}:{}),{retracted:e.payload.data.bid.retracted,period:i.bid.period,awardStatus:i.bid.award_status,sponsored:e.payload.data.bid.sponsored}),a)}case"denyed":{const{apiMessage:i}=e.payload.data,o=Object(r.s)(e.payload.data.bidId),s=c.BidAwardStatusApi.REJECTED;return Object(d.A)(t,[o],t=>Object.assign(Object.assign({},t),{id:Object(r.s)(e.payload.data.bidId),bidderId:i.bid.bidder_id,projectId:i.project.id,awardStatus:s}),a)}case"award":{const{apiMessage:i,acceptByTime:o}=e.payload.data,{id:s}=i.bid;return Object(d.A)(t,[s],t=>Object.assign(Object.assign({},t),{id:s,bidderId:i.bid.bidder_id,projectId:i.project.id,amount:i.bid.amount,period:i.bid.period,awardStatus:i.bid.award_status,awardExpireTime:o&&1e3*o}),a)}case"completed":{const{bidId:i}=e.payload.data;return i?Object(d.A)(t,[Object(r.s)(i)],t=>Object.assign(Object.assign({},t),{completeStatus:c.BidCompleteStatusApi.COMPLETE}),a):t}case"editAwardedBidAccepted":{const{bidID:i,newAmount:o,newPeriod:s}=e.payload.data.editBidDetails;return Object(d.A)(t,[Object(r.s)(i)],t=>Object.assign(Object.assign({},t),{amount:o,period:s}),a)}case"sponsor_bid":{const{id:i,sum:o}=e.payload.data.object.bid;return Object(d.A)(t,[Object(r.s)(i)],t=>Object.assign(Object.assign({},t),{sponsored:Object(r.s)(o)}),a)}default:return t}return t}default:return t}}var b=a("8Y7J");let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Qb({type:t}),t.\u0275inj=b.Pb({imports:[[o.j.forFeature("bids",p),i.d.forFeature("bids",s.a)]]}),t})()}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-hire-me-hire-me-webapp-modal-hire-me-webapp-modal~0ae65a29-es2015.8b7192c266287b3078e8.js.map