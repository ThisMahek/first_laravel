(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"92dx":function(e,t,s){"use strict";s.d(t,"a",function(){return l});var n=s("8Y7J"),i=s("stJK"),c=s("w13q"),o=s("SVse");const r=function(e){return{IsKeyboardOpen:e}},a=["*"];let l=(()=>{class e{constructor(e,t){this.keyboardService=e,this.changeDetectorRef=t,this.isKeyboardOpen=!1}ngOnInit(){this.keyboardSubscription=this.keyboardService.isOpen().subscribe(e=>{this.isKeyboardOpen=e,this.changeDetectorRef.detectChanges()})}ngOnDestroy(){this.keyboardSubscription&&this.keyboardSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(i.a),n.Sb(n.h))},e.\u0275cmp=n.Mb({type:e,selectors:[["fl-sticky-footer-body"]],ngContentSelectors:a,decls:2,vars:3,consts:[[1,"StickyFooterBody",3,"ngClass"]],template:function(e,t){1&e&&(n.yc(),n.Yb(0,"fl-bit",0),n.xc(1),n.Xb()),2&e&&n.zc("ngClass",n.Ec(1,r,t.isKeyboardOpen))},directives:[c.a,o.o],styles:["[_nghost-%COMP%]{display:block}.StickyFooterBody[_ngcontent-%COMP%]{bottom:calc(66px + env(safe-area-inset-bottom));left:0;overflow-y:auto;padding:16px;position:absolute;top:calc(52px + env(safe-area-inset-top));width:100%}.StickyFooterBody.IsKeyboardOpen[_ngcontent-%COMP%]{bottom:0}@media (min-width:768px){.StickyFooterBody[_ngcontent-%COMP%]{overflow-y:visible;padding:0;position:static}}"],changeDetection:0}),e})()},LLeR:function(e,t,s){"use strict";s.d(t,"a",function(){return M});var n=s("8Y7J"),i=s("s7LF"),c=s("fYbj"),o=s("HsDr"),r=s("w5Bh"),a=s("cWjy"),l=s("SVse"),d=s("B23V"),h=s("zOIv"),u=s("HLWz"),b=s("/zj7"),f=s("KtYJ"),p=s("w13q");const g=["inputComponent"],m=["listItem"];function y(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-button",5),n.nc("click",function(t){return n.Pc(e),n.rc().handleIconClearClick(t)}),n.Tb(1,"fl-icon",6),n.Xb()}if(2&e){const e=n.rc();n.Gb(1),n.zc("name","ui-close-alt")("color",e.IconColor.MID)("size",e.IconSize.SMALL)}}function S(e,t){1&e&&n.Ub(0)}function C(e,t){if(1&e&&(n.Yb(0,"fl-scrollable-content",10),n.Zc(1,S,1,0,"ng-container",11),n.Xb()),2&e){n.rc(2);const e=n.Mc(5);n.zc("autoHeight",!0),n.Gb(1),n.zc("ngTemplateOutlet",e)}}function x(e,t){1&e&&n.Ub(0)}function I(e,t){if(1&e&&n.Zc(0,x,1,0,"ng-container",11),2&e){n.rc(2);const e=n.Mc(5);n.zc("ngTemplateOutlet",e)}}function k(e,t){if(1&e&&(n.Yb(0,"fl-card",7),n.Zc(1,C,2,2,"fl-scrollable-content",8),n.Zc(2,I,1,1,"ng-template",null,9,n.ad),n.Xb()),2&e){const e=n.Mc(3),t=n.rc();n.zc("edgeToEdge",!0),n.Gb(1),n.zc("ngIf",t.scrollableSearchResults)("ngIfElse",e)}}function w(e,t){if(1&e&&(n.Yb(0,"fl-list-item"),n.Yb(1,"fl-bit",16),n.bd(2),n.Xb(),n.Xb()),2&e){const e=n.rc().$implicit,t=n.rc(2);n.Gb(2),n.dd(" ",t.itemTypeTitles[e]," ")}}function T(e,t){1&e&&n.Ub(0)}const O=function(e){return{$implicit:e}};function U(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-list-item",17,18),n.nc("mousemove",function(){n.Pc(e);const t=n.Mc(1);return n.rc(3).mouseMove(t)})("mouseleave",function(){return n.Pc(e),n.rc(3).mouseLeave()})("click",function(){n.Pc(e);const s=t.$implicit;return n.rc(3).selectItem(s)}),n.Zc(2,T,1,0,"ng-container",19),n.Xb()}if(2&e){const e=t.$implicit,s=t.index,i=n.rc().$implicit,c=n.rc(2);n.Hb("itemType",i)("itemIndex",s),n.Gb(2),n.zc("ngTemplateOutlet",c.itemTemplates[e.type])("ngTemplateOutletContext",n.Ec(4,O,e.context))}}function v(e,t){if(1&e&&(n.Wb(0),n.Yb(1,"fl-list"),n.Zc(2,w,3,1,"fl-list-item",13),n.Xb(),n.Yb(3,"fl-list",14),n.Zc(4,U,3,6,"fl-list-item",15),n.Xb(),n.Vb()),2&e){const e=t.$implicit,s=n.rc(2);n.Gb(2),n.zc("ngIf",s.itemTypeTitles[e]),n.Gb(1),n.zc("bottomBorder",!0)("clickable",!0),n.Gb(1),n.zc("ngForOf",s.groupedSearchResults[e])("ngForTrackBy",s.trackBySearchItem)}}function P(e,t){if(1&e&&n.Zc(0,v,5,5,"ng-container",12),2&e){const e=n.rc();n.zc("ngForOf",e.itemTypes)("ngForTrackBy",e.trackByValue)}}let M=(()=>{class e{constructor(e){this.focus=e,this.IconSize=o.e,this.IconColor=o.c,this.expanded=!1,this.groupedSearchResults={},this.queryControl=new i.f(""),this.focusIndex=-1,this.inputFocus=!1,this.itemTypes=[],this.trackByValue=c.n,this.isExpandable=!1,this.itemTypeTitles={},this.itemTemplates={},this.scrollableSearchResults=!1,this.searchResults=[],this.placeholder="Search",this.displayResults=!0,this.borderless=!1,this.backgroundColor=r.a.LIGHT,this.expandableIconLight=!1,this.query=new n.n,this.select=new n.n,this.submit=new n.n,this.clear=new n.n}documentClick(e){e&&!this.inputComponent.inputContainer.nativeElement.contains(e.target)&&this.expanded&&(this.expanded=!!this.queryControl.value,this.displayResults=!1,this.setSearchIconColor())}ngOnInit(){this.querySubscription=this.queryControl.valueChanges.subscribe(e=>{this.query.emit(e)}),this.setSearchIconColor()}setSearchIconColor(){this.isExpandable&&!this.expanded?this.expandableIconLight&&(this.searchIconColor=o.c.LIGHT):this.searchIconColor=o.c.DARK}ngOnChanges(){this.removeFocus(),this.groupedSearchResults=this.searchResults.reduce((e,t)=>(t.type in e||(e[t.type]=[]),e[t.type].push(t),e),{untyped:[]}),this.itemTypes=Object.keys(this.groupedSearchResults)}ngOnDestroy(){var e;null===(e=this.querySubscription)||void 0===e||e.unsubscribe()}handleIconStartClick(e){e.stopPropagation(),this.focus.focusElement(this.inputComponent.nativeElement),this.displayResults=!0,this.expanded=!0,this.setSearchIconColor()}handleIconClearClick(e){e.stopPropagation(),this.clearQuery(),this.focus.focusElement(this.inputComponent.nativeElement)}clearQuery(){this.queryControl.setValue(""),this.clear.emit()}handleInputKeyDown(e){const t=e.key.toLowerCase();("arrowdown"===t||"arrowup"===t||"tab"===t)&&e.preventDefault()}handleInputKeyUp(e){const t=e.key.toLowerCase();"enter"!==t?"escape"===t?this.clearQuery():"arrowdown"===t?(this.moveDown(),e.stopPropagation(),e.preventDefault()):"arrowup"===t?(this.moveUp(),e.stopPropagation(),e.preventDefault()):"tab"===t&&(e.shiftKey?this.moveUp():this.moveDown(),e.stopPropagation(),e.preventDefault()):this.selectOrSubmit()}selectOrSubmit(){if(this.focusItem){const e=this.listItemElements.toArray()[this.focusIndex].nativeElement.getAttribute("itemType"),t=Number(this.listItemElements.toArray()[this.focusIndex].nativeElement.getAttribute("itemIndex"));this.select.emit(this.groupedSearchResults[e][t])}else this.submit.emit()}selectItem(e){this.select.emit(e),e.displayValue?this.queryControl.setValue(e.displayValue,{emitEvent:!1}):this.clearQuery()}moveDown(){this.focusIndex+=1,this.reFocus()}moveUp(){this.focusIndex-=1,this.reFocus()}mouseMove(e){this.focusIndex=this.listItems.toArray().indexOf(e),this.reFocus()}mouseLeave(){this.removeFocus()}reFocus(){this.fixFocusOverflow(),this.updateFocusItem()}updateFocusItem(){const e=this.listItems.toArray()[this.focusIndex];e&&(this.focusItem=e)}removeFocus(){this.focusItem&&(delete this.focusItem,this.focusIndex=-1)}fixFocusOverflow(){this.focusIndex<0?this.focusIndex=this.searchResults.length-1:this.focusIndex>=this.searchResults.length&&(this.focusIndex=0)}trackBySearchItem(e,t){return t}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(a.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["fl-search"]],viewQuery:function(e,t){if(1&e&&(n.id(g,1),n.id(m,1),n.id(m,1,n.l)),2&e){let e;n.Lc(e=n.oc())&&(t.inputComponent=e.first),n.Lc(e=n.oc())&&(t.listItems=e),n.Lc(e=n.oc())&&(t.listItemElements=e)}},hostBindings:function(e,t){1&e&&n.nc("click",function(e){return t.documentClick(e)},!1,n.Nc)},inputs:{isExpandable:"isExpandable",iconEnd:"iconEnd",itemTypeTitles:"itemTypeTitles",itemTemplates:"itemTemplates",scrollableSearchResults:"scrollableSearchResults",searchResults:"searchResults",placeholder:"placeholder",displayResults:"displayResults",borderless:"borderless",backgroundColor:"backgroundColor",expandableIconLight:"expandableIconLight"},outputs:{query:"query",select:"select",submit:"submit",clear:"clear"},features:[n.Eb],decls:6,vars:13,consts:[[3,"backgroundColor","control","placeholder","iconStart","iconStartLabel","leftIconColor","rightIconColor","isExpandable","borderless","expanded","searchInput","iconStartClick","keyup","keydown"],["inputComponent",""],["class","ButtonClear",3,"click",4,"ngIf"],["class","SearchResults",3,"edgeToEdge",4,"ngIf"],["searchResults",""],[1,"ButtonClear",3,"click"],[1,"IconClear",3,"name","color","size"],[1,"SearchResults",3,"edgeToEdge"],["class","ScrollbarContainer",3,"autoHeight",4,"ngIf","ngIfElse"],["nonScrollable",""],[1,"ScrollbarContainer",3,"autoHeight"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"bottomBorder","clickable"],[3,"mousemove","mouseleave","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"GroupTitle"],[3,"mousemove","mouseleave","click"],["listItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Yb(0,"fl-input",0,1),n.nc("iconStartClick",function(e){return t.handleIconStartClick(e)})("keyup",function(e){return t.handleInputKeyUp(e)})("keydown",function(e){return t.handleInputKeyDown(e)}),n.Xb(),n.Zc(2,y,2,3,"fl-button",2),n.Zc(3,k,4,3,"fl-card",3),n.Zc(4,P,1,2,"ng-template",null,4,n.ad)),2&e&&(n.zc("backgroundColor",t.backgroundColor)("control",t.queryControl)("placeholder",t.placeholder)("iconStart","ui-search")("iconStartLabel","Search")("leftIconColor",t.searchIconColor)("rightIconColor",t.IconColor.MID)("isExpandable",t.isExpandable)("borderless",t.borderless)("expanded",t.expanded)("searchInput",!0),n.Gb(2),n.zc("ngIf",t.queryControl.value),n.Gb(1),n.zc("ngIf",t.displayResults&&t.queryControl.value))},directives:[r.b,l.q,d.b,o.d,h.b,u.a,l.v,l.p,b.a,f.b,p.a],styles:["[_nghost-%COMP%]{display:block;position:relative}.SearchResults[_ngcontent-%COMP%]{position:absolute;z-index:900}.GroupTitle[_ngcontent-%COMP%]{font-size:11px;line-height:1.45;font-weight:700;text-transform:uppercase}.ButtonClear[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);line-height:0;right:8px}.IconClear.IconClear.IconClear[_ngcontent-%COMP%]{display:block}.ScrollbarContainer[_ngcontent-%COMP%]{max-height:200px}"],changeDetection:0}),e})()},WPjn:function(e,t,s){"use strict";s.d(t,"b",function(){return p}),s.d(t,"a",function(){return g});var n=s("2zwU"),i=s("8Y7J"),c=s("stJK"),o=s("SVse"),r=s("w13q");function a(e,t){1&e&&i.Ub(0)}function l(e,t){if(1&e&&(i.Yb(0,"fl-bit",3),i.Zc(1,a,1,0,"ng-container",4),i.Xb()),2&e){const e=i.rc(),t=i.Mc(3);i.zc("flSticky",!0)("flStickyStatic",e.stickyStatic)("flStickyPosition",e.StickyPosition.BOTTOM)("flStickyBehaviour",e.StickyBehaviour.ALWAYS),i.Hb("data-full-width",e.fullWidth),i.Gb(1),i.zc("ngTemplateOutlet",t)}}function d(e,t){1&e&&i.Ub(0)}function h(e,t){if(1&e&&(i.Wb(0),i.Zc(1,d,1,0,"ng-container",4),i.Vb()),2&e){i.rc();const e=i.Mc(3);i.Gb(1),i.zc("ngTemplateOutlet",e)}}const u=function(e,t){return{IsKeyboardOpen:e,IsHidden:t}};function b(e,t){if(1&e&&(i.Yb(0,"fl-bit",5),i.xc(1),i.Xb()),2&e){const e=i.rc();i.zc("ngClass",i.Fc(3,u,e.isKeyboardOpen,e.isKeyboardOpen&&e.hideOnKeyboardActive)),i.Hb("data-position",e.position)("data-box-shadow",e.boxShadow)}}const f=["*"];var p=function(e){return e.ABSOLUTE="absolute",e.FIXED="fixed",e}({});let g=(()=>{class e{constructor(e,t){this.keyboardService=e,this.changeDetectorRef=t,this.StickyFooterPosition=p,this.StickyBehaviour=n.a,this.StickyPosition=n.c,this.isKeyboardOpen=!1,this.position=p.ABSOLUTE,this.boxShadow=!0,this.stickyStatic=!1,this.fullWidth=!0,this.hideOnKeyboardActive=!0}ngOnInit(){this.keyboardSubscription=this.keyboardService.isOpen().subscribe(e=>{this.isKeyboardOpen=e,this.changeDetectorRef.detectChanges()})}ngOnDestroy(){this.keyboardSubscription&&this.keyboardSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(c.a),i.Sb(i.h))},e.\u0275cmp=i.Mb({type:e,selectors:[["fl-sticky-footer"]],inputs:{position:"position",boxShadow:"boxShadow",stickyStatic:"stickyStatic",fullWidth:"fullWidth",hideOnKeyboardActive:"hideOnKeyboardActive"},ngContentSelectors:f,decls:4,vars:2,consts:[["class","StickyFooterContainer",3,"flSticky","flStickyStatic","flStickyPosition","flStickyBehaviour",4,"ngIf"],[4,"ngIf"],["content",""],[1,"StickyFooterContainer",3,"flSticky","flStickyStatic","flStickyPosition","flStickyBehaviour"],[4,"ngTemplateOutlet"],[1,"StickyFooter",3,"ngClass"]],template:function(e,t){1&e&&(i.yc(),i.Zc(0,l,2,6,"fl-bit",0),i.Zc(1,h,2,1,"ng-container",1),i.Zc(2,b,2,6,"ng-template",null,2,i.ad)),2&e&&(i.zc("ngIf",t.position===t.StickyFooterPosition.FIXED),i.Gb(1),i.zc("ngIf",t.position===t.StickyFooterPosition.ABSOLUTE))},directives:[o.q,r.a,n.b,o.v,o.o],styles:["[_nghost-%COMP%]{display:block}.StickyFooterContainer[data-full-width=true][_ngcontent-%COMP%]{left:0;min-width:100%}.StickyFooter[_ngcontent-%COMP%]{background:#fff;bottom:0;display:flex;left:0;padding:16px;transition:padding .15s ease-in-out,transform .15s ease-in-out;z-index:1030}@media (min-width:768px){.StickyFooter[_ngcontent-%COMP%]{align-items:flex-end;justify-content:flex-end}}@media (orientation:landscape){@supports (padding:max(0px)){.StickyFooter[_ngcontent-%COMP%]{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}}}.StickyFooter[data-position=absolute][_ngcontent-%COMP%]{position:absolute;width:100%}@media (min-width:768px){.StickyFooter[data-position=absolute][_ngcontent-%COMP%]{padding:0;position:static;width:auto}}@media (min-width:768px){.StickyFooter[data-position=absolute][_ngcontent-%COMP%]:not(.IsKeyboardOpen){padding-bottom:env(safe-area-inset-bottom)}}.StickyFooter[data-box-shadow=true][_ngcontent-%COMP%]{box-shadow:0 0 4px 0 rgba(0,0,0,.08),0 2px 4px 0 rgba(0,0,0,.12)}@media (min-width:768px){.StickyFooter[data-box-shadow=true][_ngcontent-%COMP%]{box-shadow:none}}@supports (padding:max(0px)){.StickyFooter[_ngcontent-%COMP%]:not(.IsKeyboardOpen){padding-bottom:max(16px,env(safe-area-inset-bottom))}}.StickyFooter.IsHidden[_ngcontent-%COMP%]{transform:translateY(100%)}"],changeDetection:0}),e})()},lkvM:function(e,t,s){"use strict";s.d(t,"a",function(){return c});var n=s("8Y7J");const i=["*"];let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["fl-sticky-footer-wrapper"]],ngContentSelectors:i,decls:1,vars:0,template:function(e,t){1&e&&(n.yc(),n.xc(0))},styles:["[_nghost-%COMP%]{display:block;height:100%;left:0;position:fixed;top:0;width:100%}@media (min-width:768px){[_nghost-%COMP%]{height:auto;position:static}}"],changeDetection:0}),e})()},v5ZQ:function(e,t,s){"use strict";s.d(t,"a",function(){return V});var n=s("8Y7J"),i=s("yeKy"),c=s("B23V"),o=s("dO68"),r=s("9Aot"),a=s("Rnop"),l=s("o9eT"),d=s("2Vo4"),h=s("itXk"),u=s("/uUt"),b=s("pLZG"),f=s("lJxs"),p=s("JX91"),g=s("eCtd"),m=s("SVse"),y=s("w13q"),S=s("lkvM"),C=s("92dx"),x=s("WPjn"),I=s("LLeR"),k=s("HLWz"),w=s("KtYJ"),T=s("/zj7"),O=s("p8b5");const U=["flListItem"];function v(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-list-item"),n.Yb(1,"app-messaging-contact-item",7),n.nc("selectUser",function(){n.Pc(e);const s=t.$implicit;return n.rc(2).selectUser.emit(s)})("deselectUser",function(){n.Pc(e);const s=t.$implicit;return n.rc(2).deselectUser.emit(s)}),n.Xb(),n.Xb()}if(2&e){const e=t.$implicit,s=n.rc(2);n.Gb(1),n.zc("user",e)("isUserSelected",s.selectedUsers.has(e))}}function P(e,t){if(1&e&&(n.Yb(0,"fl-list-item-body"),n.Yb(1,"fl-list",5),n.Zc(2,v,2,2,"fl-list-item",6),n.Xb(),n.Xb()),2&e){const e=n.rc();n.Gb(1),n.zc("outerPadding",!1)("padding",e.ListItemPadding.SMALL)("type",e.ListItemType.NON_BORDERED),n.Gb(1),n.zc("ngForOf",e.users)}}const M=["*"];let A=(()=>{class e{constructor(){this.FontColor=a.a,this.ListItemPadding=w.e,this.ListItemType=w.f,this.Margin=r.a,this.TextSize=l.f,this.TextTransform=l.g,this.deselectUser=new n.n,this.selectUser=new n.n}ngOnChanges(e){"users"in e&&this.users&&this.listItemComponent&&this.listItemComponent.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-messaging-add-people-section"]],viewQuery:function(e,t){if(1&e&&n.id(U,1),2&e){let e;n.Lc(e=n.oc())&&(t.listItemComponent=e.first)}},inputs:{users:"users",selectedUsers:"selectedUsers"},outputs:{deselectUser:"deselectUser",selectUser:"selectUser"},features:[n.Eb],ngContentSelectors:M,decls:8,vars:8,consts:function(){let e;return e="" + "\ufffd#6\ufffd" + "" + "\ufffd/#6\ufffd" + " (" + "\ufffd0\ufffd" + ") ",[[3,"clickable","expandable","padding"],["flListItem",""],[3,"textTransform","color","size"],e,[4,"ngIf"],[3,"outerPadding","padding","type"],[4,"ngFor","ngForOf"],[3,"user","isUserSelected","selectUser","deselectUser"]]},template:function(e,t){1&e&&(n.yc(),n.Yb(0,"fl-list",0),n.Yb(1,"fl-list-item",null,1),n.Yb(3,"fl-list-item-header"),n.Yb(4,"fl-text",2),n.ic(5,3),n.xc(6),n.fc(),n.Xb(),n.Xb(),n.Zc(7,P,3,4,"fl-list-item-body",4),n.Xb(),n.Xb()),2&e&&(n.zc("clickable",!0)("expandable",!0)("padding",t.ListItemPadding.SMALL),n.Gb(4),n.zc("textTransform",t.TextTransform.UPPERCASE)("color",t.FontColor.MID)("size",t.TextSize.XXXSMALL),n.Gb(2),n.gc(t.users?t.users.length:0),n.dc(5),n.Gb(1),n.zc("ngIf",(null==t.users?null:t.users.length)>0))},directives:[T.a,w.b,w.c,l.e,m.q,w.a,m.p,O.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),e})();var L=s("wZbG"),z=s("al+g");const E=["flSearch"],$=function(e){return{"MessagingAddPeople-ctaContainer--fullInbox":e}};function B(e,t){if(1&e&&(n.Wb(0),n.Ub(1,3),n.Yb(2,"fl-bit",4),n.Ub(3,3),n.Xb(),n.Vb()),2&e){const e=n.rc(),t=n.Mc(6),s=n.Mc(8);n.Gb(1),n.zc("ngTemplateOutlet",t),n.Gb(1),n.zc("ngClass",n.Ec(3,$,!e.chatboxMode)),n.Gb(1),n.zc("ngTemplateOutlet",s)}}function R(e,t){if(1&e&&(n.Yb(0,"fl-sticky-footer-wrapper"),n.Yb(1,"fl-sticky-footer-body"),n.Ub(2,3),n.Xb(),n.Yb(3,"fl-sticky-footer"),n.Ub(4,3),n.Xb(),n.Xb()),2&e){n.rc();const e=n.Mc(6),t=n.Mc(8);n.Gb(2),n.zc("ngTemplateOutlet",e),n.Gb(2),n.zc("ngTemplateOutlet",t)}}function _(e,t){1&e&&(n.Wb(0),n.cc(1,15),n.Vb())}function D(e,t){1&e&&(n.Wb(0),n.cc(1,16),n.Vb())}function F(e,t){1&e&&(n.Wb(0),n.cc(1,17),n.Vb())}function G(e,t){1&e&&(n.Wb(0),n.cc(1,18),n.Vb())}function X(e,t){if(1&e&&(n.Yb(0,"fl-text",14),n.sc(1,"flAsync"),n.Zc(2,_,2,0,"ng-container",0),n.sc(3,"flAsync"),n.sc(4,"flAsync"),n.Zc(5,D,2,0,"ng-container",0),n.sc(6,"flAsync"),n.sc(7,"flAsync"),n.Zc(8,F,2,0,"ng-container",0),n.sc(9,"flAsync"),n.sc(10,"flAsync"),n.sc(11,"flAsync"),n.sc(12,"flAsync"),n.Zc(13,G,2,0,"ng-container",0),n.sc(14,"flAsync"),n.sc(15,"flAsync"),n.sc(16,"flAsync"),n.sc(17,"flAsync"),n.Xb()),2&e){const e=n.rc(2);let t=null,s=null;n.zc("size",e.TextSize.XXSMALL)("color",n.tc(1,6,e.candidateUserSearchError$)?e.FontColor.ERROR:e.FontColor.MID),n.Gb(2),n.zc("ngIf",!!n.tc(3,8,e.candidateUserSearchError$)&&n.tc(4,10,e.backendUserSearchText$)),n.Gb(3),n.zc("ngIf",!n.tc(6,12,e.candidateUserSearchLoaded$)&&n.tc(7,14,e.backendUserSearchText$)),n.Gb(3),n.zc("ngIf",0===(null==(t=n.tc(9,16,e.candidateUserSearch$))?null:t.length)&&!n.tc(10,18,e.candidateUserSearchError$)&&n.tc(11,20,e.candidateUserSearchLoaded$)&&n.tc(12,22,e.backendUserSearchText$)),n.Gb(5),n.zc("ngIf",(!n.tc(14,24,e.backendUserSearchText$)||(null==(s=n.tc(15,26,e.candidateUserSearch$))?null:s.length)>0)&&!n.tc(16,28,e.candidateUserSearchError$)&&n.tc(17,30,e.candidateUserSearchLoaded$))}}function Y(e,t){if(1&e){const e=n.Zb();n.Wb(0),n.Yb(1,"app-messaging-add-people-section",9),n.nc("selectUser",function(t){return n.Pc(e),n.rc(2).selectUser(t)})("deselectUser",function(t){return n.Pc(e),n.rc(2).deselectUser(t)}),n.cc(2,19),n.sc(3,"flAsync"),n.Xb(),n.Tb(4,"fl-hr",11),n.Vb()}if(2&e){const e=n.rc(2);n.Gb(1),n.zc("users",n.tc(3,2,e.candidateUserSearch$))("selectedUsers",e.selectedUsers)}}function j(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-search",5,6),n.nc("query",function(t){return n.Pc(e),n.rc().filterUsersCandidate(t)})("submit",function(){return n.Pc(e),n.rc().userSearchByUsername()}),n.Xb(),n.Zc(2,X,18,32,"fl-text",7),n.Yb(3,"fl-scrollable-content",8),n.Zc(4,Y,5,4,"ng-container",0),n.Yb(5,"app-messaging-add-people-section",9),n.nc("selectUser",function(t){return n.Pc(e),n.rc().selectUser(t)})("deselectUser",function(t){return n.Pc(e),n.rc().deselectUser(t)}),n.cc(6,10),n.Xb(),n.Tb(7,"fl-hr",11),n.Yb(8,"app-messaging-add-people-section",9),n.nc("selectUser",function(t){return n.Pc(e),n.rc().selectUser(t)})("deselectUser",function(t){return n.Pc(e),n.rc().deselectUser(t)}),n.cc(9,12),n.Xb(),n.Tb(10,"fl-hr",11),n.Yb(11,"app-messaging-add-people-section",9),n.nc("selectUser",function(t){return n.Pc(e),n.rc().selectUser(t)})("deselectUser",function(t){return n.Pc(e),n.rc().deselectUser(t)}),n.cc(12,13),n.Xb(),n.Xb()}if(2&e){const e=n.rc();n.Gb(2),n.zc("ngIf",e.isLoggedInUserSupportAgent),n.Gb(2),n.zc("ngIf",e.isLoggedInUserSupportAgent),n.Gb(1),n.zc("users",e.filteredContacts)("selectedUsers",e.selectedUsers),n.Gb(3),n.zc("users",e.filteredThreadBidders)("selectedUsers",e.selectedUsers),n.Gb(3),n.zc("users",e.filteredThreadCollaborators)("selectedUsers",e.selectedUsers)}}const N=function(e){return{"MessagingAddPeople-button--fullInbox":e}};function Z(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-button",20),n.nc("click",function(){return n.Pc(e),n.rc().hideAddPeople()}),n.cc(1,21),n.Xb(),n.Yb(2,"fl-button",22),n.nc("click",function(){return n.Pc(e),n.rc().addMembers()}),n.cc(3,23),n.Xb()}if(2&e){const e=n.rc();n.zc("ngClass",n.Ec(8,N,!e.chatboxMode))("color",e.ButtonColor.TRANSPARENT_DARK)("flMarginRight",e.Margin.MID)("size",e.ButtonSize.SMALL),n.Gb(2),n.zc("ngClass",n.Ec(10,N,!e.chatboxMode))("color",e.ButtonColor.SECONDARY)("size",e.ButtonSize.SMALL)("disabled",0===e.selectedUsers.size)}}let V=(()=>{class e{constructor(e,t){this.datastore=e,this.messagingChat=t,this.ButtonColor=c.a,this.ButtonSize=o.a,this.ChatViewState=i.b,this.FontColor=a.a,this.Margin=r.a,this.TextSize=l.f,this.chatboxMode=!0,this.hideAddPeopleScreen=new n.n,this.addChatMembers=new n.n,this._searchTextSubject$=new d.a(""),this.searchText$=this._searchTextSubject$.asObservable(),this._backendUserSearchTextSubject$=new d.a(""),this.backendUserSearchText$=this._backendUserSearchTextSubject$.asObservable(),this.selectedUsers=new Set}ngOnInit(){this.messagingViewState$=this.messagingChat.getViewState(),this.searchTextSubscription=this.searchText$.subscribe(e=>{this.filteredThreadBidders=this.filterCandidatesBySearchTerm(this.threadBidders,e),this.filteredThreadCollaborators=this.filterCandidatesBySearchTerm(this.threadCollaborators,e),this.filteredContacts=this.filterCandidatesBySearchTerm(this.threadContacts,e)}),this.candidateUsersCollection=this.datastore.collection("users",e=>e.limit(1).where("username","equalsIgnoreCase",this.backendUserSearchText$.pipe(Object(u.a)(),Object(b.a)(e=>""!==e)))),this.candidateUserSearchLoaded$=this.candidateUsersCollection.status$.pipe(Object(f.a)(e=>e.ready),Object(p.a)(!0)),this.candidateUserSearchError$=this.candidateUsersCollection.status$.pipe(Object(f.a)(e=>e.error),Object(p.a)(void 0)),this.candidateUserSearch$=h.a([this.candidateUsersCollection.valueChanges(),this.backendUserSearchText$,this.candidateUserSearchLoaded$]).pipe(Object(f.a)(([e,t,s])=>""!==t&&s?e:[]))}ngOnDestroy(){var e;null===(e=this.searchTextSubscription)||void 0===e||e.unsubscribe()}ngOnChanges(e){"threadBidders"in e&&this.threadBidders&&(this.filteredThreadBidders=this.filterCandidatesBySearchTerm(this.threadBidders,this._searchTextSubject$.value)),"threadCollaborators"in e&&this.threadCollaborators&&(this.filteredThreadCollaborators=this.filterCandidatesBySearchTerm(this.threadCollaborators,this._searchTextSubject$.value)),"threadContacts"in e&&this.threadContacts&&(this.filteredContacts=this.filterCandidatesBySearchTerm(this.threadContacts,this._searchTextSubject$.value))}selectUser(e){this.selectedUsers.add(e)}deselectUser(e){this.selectedUsers.delete(e)}hideAddPeople(){this.hideAddPeopleScreen.emit(),this.clearSelectedUsers()}filterUsersCandidate(e){this._searchTextSubject$.next(e.toLowerCase().trim()),""===e&&this.isLoggedInUserSupportAgent&&this._backendUserSearchTextSubject$.next("")}addMembers(){this.selectedUsers.size>0&&(this.addChatMembers.emit(Array.from(this.selectedUsers.values()).map(e=>e.id)),this.clearSelectedUsers())}clearSelectedUsers(){this.selectedUsers.clear()}clearSearchUser(){this._searchTextSubject$.next(""),this._backendUserSearchTextSubject$.next("")}userSearchByUsername(){this.isLoggedInUserSupportAgent&&this._backendUserSearchTextSubject$.next(this._searchTextSubject$.value)}filterCandidatesBySearchTerm(e,t){return e.filter(e=>e.displayName.toLowerCase().includes(t)||e.username.toLowerCase().includes(t))}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(g.a),n.Sb(i.d))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-messaging-add-people"]],viewQuery:function(e,t){if(1&e&&n.id(E,3),2&e){let e;n.Lc(e=n.oc())&&(t.searchComponent=e.first)}},inputs:{chatboxMode:"chatboxMode",isLoggedInUserSupportAgent:"isLoggedInUserSupportAgent",threadBidders:"threadBidders",threadCollaborators:"threadCollaborators",threadContacts:"threadContacts"},outputs:{hideAddPeopleScreen:"hideAddPeopleScreen",addChatMembers:"addChatMembers"},features:[n.Eb],decls:9,vars:8,consts:function(){let e,t,s,n,i,c,o,r,a,l;return e=" Contacts ",t=" Bidders ",s=" Collaborators ",n=" Something went wrong while searching for this user. ",i=" Searching... ",c=" No user found. ",o=" Press Enter to search for users by username. ",r=" Search ",a=" Go back ",l=" Add ",[[4,"ngIf"],["addPeopleBody",""],["addPeopleCtas",""],[3,"ngTemplateOutlet"],[1,"MessagingAddPeople-ctaContainer",3,"ngClass"],[3,"query","submit"],["flSearch",""],["class","MessagingAddPeople-searchStatus",3,"size","color",4,"ngIf"],[1,"MessagingAddPeople-sections"],[3,"users","selectedUsers","selectUser","deselectUser"],e,[1,"MessagingAddPeople-divider"],t,s,[1,"MessagingAddPeople-searchStatus",3,"size","color"],n,i,c,o,r,["flTrackingLabel","AddPeopleBackButton",1,"MessagingAddPeople-button",3,"ngClass","color","flMarginRight","size","click"],a,["flTrackingLabel","ModifyMembersButton",1,"MessagingAddPeople-button",3,"ngClass","color","size","disabled","click"],l]},template:function(e,t){1&e&&(n.Zc(0,B,4,5,"ng-container",0),n.sc(1,"flAsync"),n.sc(2,"flAsync"),n.Zc(3,R,5,2,"fl-sticky-footer-wrapper",0),n.sc(4,"flAsync"),n.Zc(5,j,13,8,"ng-template",null,1,n.ad),n.Zc(7,Z,4,12,"ng-template",null,2,n.ad)),2&e&&(n.zc("ngIf",void 0!==n.tc(1,2,t.messagingViewState$)&&n.tc(2,4,t.messagingViewState$)!==t.ChatViewState.NONE),n.Gb(3),n.zc("ngIf",!t.chatboxMode&&n.tc(4,6,t.messagingViewState$)===t.ChatViewState.NONE))},directives:[m.q,m.v,y.a,m.o,S.a,C.a,x.a,I.a,k.a,A,L.a,l.e,c.b,r.b],pipes:[z.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 56px)}.MessagingAddPeople-searchStatus[_ngcontent-%COMP%]{padding-left:16px}.MessagingAddPeople-sections[_ngcontent-%COMP%]{flex:1 1 0}.MessagingAddPeople-divider[_ngcontent-%COMP%]{padding:0 16px}.MessagingAddPeople-ctaContainer[_ngcontent-%COMP%]{display:flex;padding:24px}@media (min-width:768px){.MessagingAddPeople-ctaContainer--fullInbox[_ngcontent-%COMP%]{justify-content:flex-end;padding:24px 0}}.MessagingAddPeople-button[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:center}.MessagingAddPeople-button--fullInbox[_ngcontent-%COMP%]{min-width:130px}@media (min-width:768px){.MessagingAddPeople-button--fullInbox[_ngcontent-%COMP%]{display:inline-block;flex-grow:0}}"],changeDetection:0}),e})()},yeKy:function(e,t,s){"use strict";s.d(t,"b",function(){return p}),s.d(t,"c",function(){return g}),s.d(t,"a",function(){return m}),s.d(t,"e",function(){return y}),s.d(t,"d",function(){return S});var n=s("mrSG"),i=s("f3kX"),c=s("uHzL"),o=s("f6cb"),r=s("tsv4"),a=s("2Vo4"),l=s("IzEk"),d=s("lJxs"),h=s("8Y7J"),u=s("lOjL"),b=s("L1P6"),f=s("HeVh"),p=function(e){return e.NONE="none",e.COMPACT="compact",e.FULL="full",e}({}),g=function(e){return e.PAGE="page",e.COLUMN="column",e}({}),m=function(e){return e.MINIMISED="minimised",e.REGULAR="regular",e.EXPANDED="expanded",e}({});const y={[m.MINIMISED]:{height:56,width:320},[m.REGULAR]:{height:456,width:320},[m.EXPANDED]:{height:675,width:475}};let S=(()=>{class e{constructor(e,t,s){this.location=e,this.localStorage=t,this.breakpointObserver=s,this.disableToastNotificationsSubject$=new a.a(!1),this.isToastDisabled$=this.disableToastNotificationsSubject$.asObservable()}canStartChat(){return Object(o.h)(this.liveChatHandler)}startChat({userIds:e,threadType:t,origin:s,context:n,threadId:i,focus:c=!0,doNotRedirect:o=!1}){if(this.liveChatHandler)this.liveChatHandler({userIds:e,threadType:t,origin:s,context:n,threadId:i,focus:c});else{if(o)return;if(i)this.location.navigateByUrl(`/messages/thread/${i}`);else{const s=new URL(`${window.location.origin}/messages/new`),i=s.searchParams;i.append("thread_type",t),n&&(i.append("context_type",n.type),n.type!==r.ContextTypeApi.NONE&&i.append("context_id",n.id.toString())),e.forEach(e=>{i.append("members",e.toString())}),this.location.navigateByUrl(`${s.pathname}${s.search}`)}}}registerLiveChat(e){this.liveChatHandler=e}unregisterLiveChat(){this.liveChatHandler=void 0}disableToastNotifications(){this.disableToastNotificationsSubject$.next(!0)}enableToastNotifications(){this.disableToastNotificationsSubject$.next(!1)}cleanStoredDraftMessages(){this.localStorage.get("webappChatDraftMessages").pipe(Object(l.a)(1)).toPromise().then(e=>Object(n.a)(this,void 0,void 0,function*(){if(!e)return;const t=Object(o.p)(e,(e,t)=>!(!t||!t.lastUpdated||Date.now()-t.lastUpdated>6048e5));yield this.localStorage.set("webappChatDraftMessages",t)}))}getDimensionLimits(e){return e?{min:{height:y[m.REGULAR].height,width:y[m.REGULAR].width},max:{height:window.innerHeight-114-40,width:620}}:{min:{height:210,width:260},max:{height:window.innerHeight-114-40,width:620}}}constrainChatboxDimensions(e,t){const s=this.getDimensionLimits(t),n={height:e.height,width:e.width};return e.height>s.max.height?n.height=s.max.height:e.height<s.min.height&&(n.height=s.min.height),e.width>s.max.width?n.width=s.max.width:e.width<s.min.width&&(n.width=s.min.width),n}isValidChatboxDimensions(e,t){const s=this.getDimensionLimits(t);return!(e.height>s.max.height||e.height<s.min.height||e.width>s.max.width||e.width<s.min.width)}getViewState(e){let t;switch(e){case c.b.DESKTOP_XLARGE:case c.b.DESKTOP_XXLARGE:t=i.a.DESKTOP_XXXLARGE;break;default:t=i.a.DESKTOP_XXLARGE}return this.breakpointObserver.observe([i.a.TABLET,t]).pipe(Object(d.a)(s=>s.breakpoints[i.a.TABLET]?s.breakpoints[t]&&e!==c.b.FLUID?p.FULL:p.COMPACT:p.NONE))}getInboxViewState(){return this.breakpointObserver.observe(i.a.TABLET).pipe(Object(d.a)(e=>e.matches?g.COLUMN:g.PAGE))}fitChatsToScreen(e,{offset:t=0,gap:s=0,useDimensions:n=!1}={}){let i=t;return e.filter(e=>(i+=(n&&e.dimensions?e.dimensions.width:e.width)+s,i<window.innerWidth))}}return e.\u0275fac=function(t){return new(t||e)(h.jc(u.a),h.jc(b.a),h.jc(f.a))},e.\u0275prov=h.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-messaging-messaging-chat-groupchat-management-mod~6fc391e6-es2015.f3869d72073d7a291805.js.map