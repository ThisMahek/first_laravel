(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"7LCa":function(e,t,r){"use strict";r.d(t,"a",function(){return S});var a=r("9u4R"),s=r("7bNT"),i=r("tqRt"),n=r("mrSG"),o=r("FRAM"),d=r("f6cb"),c=r("itXk"),u=r("pLZG"),l=r("vkgz"),p=r("8Y7J"),f=r("/wLE"),m=r("iInd");let h=(()=>{class e{constructor(e,t,r){this.actions$=e,this.auth=t,this.router=r,this.effect$=c.a([this.actions$.pipe(Object(u.a)(o.c)),this.auth.getUserId()]).pipe(Object(l.a)(([e,t])=>{const{payload:r}=e;"groupchat"===r.type&&"remove"===r.data.action&&r.data.payload.members.includes(Object(d.s)(t))&&this.router.url.startsWith("/messages")&&this.router.navigate(["/messages"])}))}}return e.\u0275fac=function(t){return new(t||e)(p.jc(s.a),p.jc(f.a),p.jc(m.e))},e.\u0275prov=p.Ob({token:e,factory:e.\u0275fac}),Object(n.b)([Object(s.b)({dispatch:!1})],e.prototype,"effect$",void 0),e})();var b=r("OpNG"),y=r("cUs2"),g=r("tsv4");function O(){return{defaultOrder:{field:"timeUpdated",direction:b.a.DESC},fetch:(e,t,r,a)=>({endpoint:"messages/0.1/threads",params:{threads:t,members:Object(y.h)(r,"otherMembers")[0],context_type:j(r),contexts:_(r),thread_types:Object(y.h)(r,"threadType"),is_read:Object(y.h)(r,"isRead")[0],folders:Object(y.h)(r,"folder"),unread_count:"true",last_message:"true",context_details:"true",user_read_times:"true"}}),push:(e,t)=>({endpoint:"messages/0.1/threads/",asFormData:!0,payload:{context:t.context.type!==g.ContextTypeApi.NONE?t.context.id:void 0,context_type:t.context.type,thread_type:t.threadType,members:t.members,message:t.message&&t.message.message||"",source:21}}),set:void 0,update:(e,t,r)=>{let a,s,i="PUT";if(!0===t.isRead){if(a)throw new Error("Cannot update two fields at once");a={threads:[Object(d.s)(r.id)],action:"read"},s="messages/0.1/threads/"}if(void 0!==t.isMuted){if(a)throw new Error("Cannot update two fields at once");a={threads:[Object(d.s)(r.id)],action:t.isMuted?"mute":"unmute"},s="messages/0.1/threads/"}if(void 0!==t.isBlocked){if(a)throw new Error("Cannot update two fields at once");a={threads:[Object(d.s)(r.id)],action:t.isBlocked?"block":"unblock"},s="messages/0.1/threads/"}if(t.folder){if(a)throw new Error("Cannot update two fields at once");if("inbox"===t.folder)a={threads:[Object(d.s)(r.id)],action:"unarchive"};else{if("archived"!==t.folder)throw new Error("Cannot push for threads");a={threads:[Object(d.s)(r.id)],action:"archive"}}s="messages/0.1/threads/"}if(t.members&&t.members.length!==r.members.length){if(a)throw new Error("Cannot update two fields at once");s=`messages/0.1/threads/${r.id}/members/`,t.members.length>r.members.length?a={thread_id:r.id,action:"add",members:t.members.filter(d.h).filter(e=>!r.members.includes(e))}:t.members.length<r.members.length&&(a={thread_id:r.id,action:"remove",members:r.members.filter(e=>!(t.members||[]).includes(e))})}if(t.typing){if(a)throw new Error("Cannot update two fields at once");a={thread_id:r.id},s=`messages/0.1/threads/${r.id}/typing/`,i="POST"}if(void 0===a||void 0===s)throw new Error("Cound not update any fields of");return{asFormData:!0,payload:a,endpoint:s,method:i}},remove:void 0}}function j(e){var t;return(null===(t=null==e?void 0:e.queryParams)||void 0===t?void 0:t.context)?Object(y.h)(e,"context",e=>"=="===e.condition?e.value.type:void 0)[0]:Object(y.h)(e,"contextType")[0]}function _(e){return Object(y.h)(e,"context",e=>"=="===e.condition&&e.value.type!==g.ContextTypeApi.NONE?e.value.id:void 0).filter(d.h)}var v=r("etQe"),w=r("AO4K");function E(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("threads"===t.payload.type){const{result:r,ref:a,order:s}=t.payload;return Object(y.o)(e,Object(y.z)(r.threads,w.b,a.path.authUid),s,a)}return e;case"API_PUSH_SUCCESS":if("threads"===t.payload.type){const{result:r,ref:a}=t.payload;return Object(y.q)(e,Object(y.z)([r],w.b,a.path.authUid),a)}return e;case"API_UPDATE":if("threads"===t.payload.type){const{delta:r,originalDocument:a,ref:s}=t.payload,i=a.id.toString(),n=Object(y.s)(e,s.path,i);if(!n)throw new Error("Thread being updated is missing in the store");return Object(y.q)(e,Object(y.z)([i],e=>{if(r.folder){const e=r.folder||"inbox";return Object.assign(Object.assign({},n),{folder:e})}return r.isRead?Object.assign(Object.assign({},n),{messageUnreadCount:0,isRead:!0}):n}),s)}return e;case"API_UPDATE_SUCCESS":if("threads"===t.payload.type){const{delta:r,originalDocument:a,ref:s,rawRequest:i}=t.payload;if("action"in i&&"add"===i.action)return Object(y.q)(e,Object(y.z)([t.payload.result],w.b,s.path.authUid),s);const n=a.id.toString(),o=Object(y.s)(e,s.path,n);if(!o)throw new Error("Thread being updated is missing in the store");return Object(y.q)(e,Object(y.z)([n],e=>Object(b.e)(o,r)),s)}return e;case"API_UPDATE_ERROR":if("threads"===t.payload.type){const{delta:r,originalDocument:a,ref:s}=t.payload,i=a.id.toString(),n=Object(y.s)(e,s.path,i);if(!n)throw new Error("Thread being updated is missing in the store");return Object(y.q)(e,Object(y.z)([i],e=>Object.assign(Object.assign({},n),r.folder?{folder:a.folder||"inbox"}:{})),s)}return e;case"WS_MESSAGE":{const{payload:r}=t,a=r.toUserId,s={collection:"threads",authUid:a},i={path:s};if("messages"===r.parent_type&&("user_read"===r.type||"typing"===r.type)){const t="user_read"===r.type?r.data.user_id:r.data.from_user,s="user_read"===r.type?r.data.thread_ids:[r.data.thread];return Object(y.A)(e,s,e=>Object.assign(Object.assign({},e),{userReadTimes:Object.assign(Object.assign({},e.userReadTimes),{[t]:Date.now()}),messageUnreadCount:t===Object(d.s)(a)?0:e.messageUnreadCount}),i)}if("messages"===r.parent_type&&"write_privacy_update"===r.type)return Object(y.A)(e,r.data.thread_ids,e=>Object.assign(Object.assign({},e),{writePrivacy:r.data.write_privacy}),i);if("messages"===r.parent_type&&"private"===r.type)return Object(y.A)(e,[r.data.thread_id],e=>{const t={attachments:r.data.attachments,fromUser:r.data.from_user,id:r.data.id,message:r.data.message,messageSource:r.data.message_source,threadId:r.data.thread_id,timeCreated:1e3*r.data.time_created,sendStatus:v.a.SENT},a=r.data.from_user===Object(d.s)(r.toUserId)?0:e.messageUnreadCount+1;return Object.assign(Object.assign({},e),{message:t,messageUnreadCount:a,isRead:0===a,timeUpdated:t.timeCreated,userReadTimes:Object.assign(Object.assign({},e.userReadTimes),{[r.data.from_user]:t.timeCreated})})},i);if("notifications"===r.parent_type&&"groupchat"===r.type){const{members:t}=r.data.payload,a=Object(y.s)(e,s,r.data.payload.thread);if(!a)return e;const n="add"===r.data.action?[...a.members,...t]:a.members.filter(e=>!t.includes(e)),o=n.filter(e=>e!==Object(d.s)(r.toUserId)),c="add"===r.data.action?a.inactiveMembers.filter(e=>!t.includes(e)):[...a.inactiveMembers,...t];return n.includes(Object(d.s)(r.toUserId))?Object(y.b)(e,[r.data.payload.thread],e=>Object.assign(Object.assign({},a),{members:n,otherMembers:o,inactiveMembers:c}),i):Object(y.u)(i,e,r.data.payload.thread)}return e}default:return e}}let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Qb({type:e}),e.\u0275inj=p.Pb({imports:[[i.j.forFeature("threads",E),s.c.forFeature([h]),a.d.forFeature("threads",O)]]}),e})()},AO4K:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o});var a=r("f6cb"),s=r("tsv4"),i=r("OI7T");function n(e,t){var r;const n=e.thread;if(!n.id)throw new Error("Threads should have an id");if(!n.owner)throw new Error("Threads should have an owner");if(n.thread_type===s.ThreadTypeApi.COMMENT_FEED)throw new Error("Threads should not have thread type comment feed");const c=Object.entries(n.user_read_times||{}).reduce((e,[t,r])=>Object.assign(Object.assign({},e),r?{[t]:1e3*r}:{}),{}),u=e.highlights&&0!==e.highlights.length?e.highlights.map(d):void 0;return{context:o(n.context),contextType:(null===(r=n.context)||void 0===r?void 0:r.type)||s.ContextTypeApi.NONE,folder:e.folder||s.FolderApi.INBOX,highlights:u,id:e.id,isBlocked:e.is_blocked||!1,isFake:!1,isMuted:e.is_muted||!1,isRead:e.is_read||!1,members:n.members||[],inactiveMembers:n.inactive_members||[],message:n.message?Object(i.a)(n.message):void 0,messageCount:e.message_count,messageUnreadCount:e.message_unread_count||0,otherMembers:n.members.filter(e=>e!==Object(a.s)(t)),owner:n.owner,threadType:n.thread_type,timeCreated:1e3*(n.time_created||0),timeRead:1e3*(e.time_read||0),timeUpdated:1e3*(e.time_updated||0),userReadTimes:c,writePrivacy:n.write_privacy||s.PrivacyLevelApi.MEMBERS}}function o(e){if(!e||e&&e.type===s.ContextTypeApi.NONE)return{type:s.ContextTypeApi.NONE};if(e.type===s.ContextTypeApi.POST)throw new Error("Thread should not have context type 'post'");if(null==e.id)throw new Error("Threads should have a context id if context is not none");return{type:e.type,id:e.id}}function d(e){return{field:e.field,highlightedText:{preceding:e.highlighted_text[0]||"",highlighted:e.highlighted_text[1]||"",succeeding:e.highlighted_text[2]||""}}}},I0A4:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r("9u4R"),s=r("tqRt"),i=r("OpNG");function n(){return{defaultOrder:{field:"id",direction:i.a.DESC},fetch:void 0,push:void 0,set:void 0,update:void 0,remove:void 0,isSubscribable:!0}}var o=r("cUs2"),d=r("mRGw");function c(e={},t){switch(t.type){case"WS_MESSAGE":if("onlineoffline"===t.payload.parent_type&&"statusget"===t.payload.type){const{toUserId:r,data:a}=t.payload;return Object(o.q)(e,Object(o.z)(Object.entries(a),d.b),{path:{collection:"onlineOffline",authUid:r}})}if("onlineoffline"===t.payload.parent_type&&"statuschange"===t.payload.type){const{data:r,toUserId:a}=t.payload;return Object(o.q)(e,Object(o.z)([r],d.a),{path:{collection:"onlineOffline",authUid:a}})}return e;default:return e}}var u=r("8Y7J");let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Qb({type:e}),e.\u0275inj=u.Pb({imports:[[s.j.forFeature("onlineOffline",c),a.d.forFeature("onlineOffline",n)]]}),e})()},OI7T:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var a=r("f6cb"),s=r("etQe");const i=e=>{if(e){const t=JSON.parse(e.content,function(e,t){switch(e){case"content-type":case"display-type":{const r=e.split("-"),a=r.slice(1).map(e=>`${e[0].toUpperCase()}${e.slice(1)}`).join("");this[`${r[0]}${a}`]=t;break}case"action":return t.toUpperCase();case"from_user":{const r=e.split("_"),a=r.slice(1).map(e=>`${e[0].toUpperCase()}${e.slice(1)}`).join("");this[`${r[0]}${a}`]=t;break}case"type":return t.toLowerCase();default:return t}}),r=e.latest_submissions?JSON.parse(e.latest_submissions):void 0;if(t&&t.long&&t.short&&t.email)return{category:e.category,long:t.long.map(e=>e instanceof Array?e:[e]),short:t.short.map(e=>e instanceof Array?e:[e]),email:t.email,latestSubmissions:r,fromUser:t.fromUser,types:t.types}}};function n(e){const t=e.attachments?e.attachments.map(e=>e.filename):[];return{id:e.id,attachments:t,clientMessageId:Object(a.s)(e.client_message_id),fromUser:e.from_user,message:e.message,messageId:e.id,messageSource:e.message_source,richMessage:i(e.rich_message),threadId:e.thread_id,timeCreated:1e3*e.time_created,sendStatus:s.a.SENT}}function o(e){const t=e.data;return{id:t.id,attachments:[],clientMessageId:Object(a.s)(t.client_message_id),fromUser:t.from_user,message:t.message,messageId:t.id,messageSource:t.message_source,parentId:t.parent_id,richMessage:i(t.rich_message),threadId:t.thread_id,timeCreated:1e3*t.time_created,sendStatus:s.a.SENT}}},fejZ:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r("9u4R"),s=r("tqRt"),i=r("OpNG");function n(){return{defaultOrder:{field:"id",direction:i.a.ASC},fetch:(e,t,r,a)=>({endpoint:"memberships/0.1/benefits",params:{benefit_names:t}}),push:void 0,set:void 0,update:void 0,remove:void 0}}var o=r("cUs2");function d(e){return{id:e.internal_name,name:e.display_name,value:-1===e.value?1/0:e.value,aggregation:e.duplicate_rule}}function c(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("membershipBenefits"===t.payload.type){const{result:r,ref:a,order:s}=t.payload;return Object(o.o)(e,Object(o.z)(r.benefits,d),s,a)}return e;default:return e}}var u=r("8Y7J");let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Qb({type:e}),e.\u0275inj=u.Pb({imports:[[s.j.forFeature("membershipBenefits",c),a.d.forFeature("membershipBenefits",n)]]}),e})()},miUi:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var a=r("9u4R"),s=r("tqRt"),i=r("OpNG"),n=r("f6cb");function o(){return{defaultOrder:{field:"id",direction:i.a.ASC},fetch:()=>({endpoint:"users/0.1/self",isGaf:!1,params:{jobs:"true"}}),push:(e,t)=>({endpoint:"users/0.1/self/jobs",payload:{jobs:t.skills||[]},isGaf:!1,asFormData:!0}),set:void 0,update:(e,t,r)=>{const a=t.skills?t.skills.filter(n.h):[];if(0===a.length)throw Error("You need at least 1 job to update.");return{endpoint:"users/0.1/self/jobs",method:"PUT",asFormData:!0,payload:{jobs:a}}},remove:(e,t,r)=>({method:"DELETE",endpoint:"users/0.1/self/jobs",payload:{jobs:r.skills}})}}var d=r("cUs2");function c(e){return{id:e.id,skills:(e.jobs||[]).map(e=>e.id)}}function u(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("userSkills"===t.payload.type){const{result:r,ref:a,order:s}=t.payload;return Object(d.o)(e,Object(d.z)([r],c),s,a)}return e;case"API_PUSH":if("userSkills"===t.payload.type){const{document:r,ref:a}=t.payload;return Object(d.q)(e,Object(d.z)([r],e=>e),a)}return e;case"API_PUSH_ERROR":if("userSkills"===t.payload.type){const{document:r,ref:a}=t.payload;return Object(d.u)(a,e,r.id)}return e;case"API_DELETE_SUCCESS":if("userSkills"===t.payload.type){const{originalDocument:r,ref:a}=t.payload,s=Object(d.u)(a,e,a.path.authUid),i={id:r.id,skills:[]};return Object(d.q)(s,Object(d.z)([i],e=>e),a)}return e;case"API_DELETE_ERROR":if("userSkills"===t.payload.type){const{originalDocument:r,ref:a}=t.payload;return Object(d.q)(e,Object(d.z)([r],e=>e),a)}return e;case"API_UPDATE":if("userSkills"===t.payload.type){const{delta:r,ref:a,originalDocument:s}=t.payload;return Object(d.q)(e,Object(d.z)([Object(i.e)(s,r)],e=>e),a)}return e;case"API_UPDATE_ERROR":if("userSkills"===t.payload.type){const{ref:r,originalDocument:a}=t.payload;return Object(d.q)(e,Object(d.z)([a],e=>e),r)}return e;default:return e}}var l=r("8Y7J");let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({imports:[[s.j.forFeature("userSkills",u),a.d.forFeature("userSkills",o)]]}),e})()},"oA5+":function(e,t,r){"use strict";r.d(t,"a",function(){return g});var a=r("SVse"),s=r("EXHp"),i=r("cokP"),n=r("xezD"),o=r("I0A4"),d=r("7LCa"),c=r("8Y7J");let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({imports:[[a.c,o.a,d.a,i.a]]}),e})(),l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({imports:[[a.c,i.a]]}),e})();var p=r("7Wq5"),f=r("pjJp"),m=r("miUi"),h=r("fejZ"),b=r("18b0");let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({imports:[[a.c,p.a,f.a,m.a,h.a,b.a,i.a]]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({imports:[[n.a,u,a.c,l,s.a,y,i.a],n.a,l,y]}),e})()},xezD:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r("SVse"),s=r("iuNj"),i=r("cokP"),n=r("8Y7J");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Qb({type:e}),e.\u0275inj=n.Pb({imports:[[a.c,s.a,i.a]]}),e})()}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-contests-contest-award-modal-contest-award-modal-~311169a1-es2015.c95566cd52cbad8a9b22.js.map